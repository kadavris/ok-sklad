<?xml version="1.0" standalone="yes"?>  <DATAPACKET Version="2.0"><METADATA><FIELDS><FIELD attrname="ID" fieldtype="i4"/><FIELD attrname="TEXTSTR" fieldtype="string" WIDTH="255"/><FIELD attrname="LINEID" fieldtype="i4"/></FIELDS><PARAMS/></METADATA><ROWDATA><ROW ID="4" TEXTSTR="select * from users where name=:name" LINEID="0"/><ROW ID="15" TEXTSTR="select cr.currid, cr.onvalue, cr.ondate" LINEID="0"/><ROW ID="15" TEXTSTR=" from currencyrate cr" LINEID="1"/><ROW ID="15" TEXTSTR=" where cr.ondate=" LINEID="2"/><ROW ID="15" TEXTSTR="  (select max(ondate) from currencyrate where currid=cr.currid and ondate&lt;=:ondate)" LINEID="3"/><ROW ID="18" TEXTSTR="select * from Measures where mid=:mid" LINEID="0"/><ROW ID="19" TEXTSTR="select max(mid) from measures" LINEID="0"/><ROW ID="20" TEXTSTR="update measures set def=0" LINEID="0"/><ROW ID="23" TEXTSTR="delete from measures where mid=:mid" LINEID="0"/><ROW ID="25" TEXTSTR="update measures set def=1 where mid=:mid" LINEID="0"/><ROW ID="27" TEXTSTR="select cr.*" LINEID="0"/><ROW ID="27" TEXTSTR=" from currencyrate cr" LINEID="1"/><ROW ID="27" TEXTSTR=" where cr.ondate=" LINEID="2"/><ROW ID="27" TEXTSTR="  (select max(ondate) from currencyrate where currid=cr.currid and ondate&lt;=:ondate)" LINEID="3"/><ROW ID="30" TEXTSTR="select * from currency where currid=:currid" LINEID="0"/><ROW ID="31" TEXTSTR="select * from currencyrate where rateid=:rateid" LINEID="0"/><ROW ID="32" TEXTSTR="select max(currid) from currency" LINEID="0"/><ROW ID="33" TEXTSTR="update currency set def=0" LINEID="0"/><ROW ID="36" TEXTSTR="select max(rateid) from currencyrate" LINEID="0"/><ROW ID="37" TEXTSTR="insert into currencyrate" LINEID="0"/><ROW ID="37" TEXTSTR="  (rateid, currid, ondate, onvalue)" LINEID="1"/><ROW ID="37" TEXTSTR=" values" LINEID="2"/><ROW ID="37" TEXTSTR="  (:rateid, :currid, :ondate, :onvalue)" LINEID="3"/><ROW ID="38" TEXTSTR="update currencyrate" LINEID="0"/><ROW ID="38" TEXTSTR=" set onvalue=:onvalue," LINEID="1"/><ROW ID="38" TEXTSTR="     ondate=:ondate," LINEID="2"/><ROW ID="38" TEXTSTR="     currid=:currid" LINEID="3"/><ROW ID="38" TEXTSTR=" where rateid=:rateid" LINEID="4"/><ROW ID="40" TEXTSTR="delete from currencyrate where currid=:currid" LINEID="0"/><ROW ID="41" TEXTSTR="select min(currid) from currency" LINEID="0"/><ROW ID="42" TEXTSTR="update currency set def=1 where currid=:currid" LINEID="0"/><ROW ID="43" TEXTSTR="delete from currencyrate where rateid=:rateid" LINEID="0"/><ROW ID="39" TEXTSTR="delete from currency where currid=:currid" LINEID="0"/><ROW ID="46" TEXTSTR="delete from EQUIPTYPE where ETYPEID=:etypeid" LINEID="0"/><ROW ID="47" TEXTSTR="select * from EQUIPTYPE where ETYPEID=:etypeid" LINEID="0"/><ROW ID="48" TEXTSTR="select max(ETYPEID) from EQUIPTYPE" LINEID="0"/><ROW ID="53" TEXTSTR="delete from usergroups where grpid=:grpid" LINEID="0"/><ROW ID="55" TEXTSTR="update usergroups set name=:name where grpid=:grpid" LINEID="0"/><ROW ID="56" TEXTSTR="select * from usergroups where grpid=:grpid" LINEID="0"/><ROW ID="57" TEXTSTR="select max(grpid) from usergroups" LINEID="0"/><ROW ID="59" TEXTSTR="select ug.*" LINEID="0"/><ROW ID="59" TEXTSTR=" from userrel ur, usergroups ug" LINEID="1"/><ROW ID="59" TEXTSTR=" where ur.userid=:userid" LINEID="2"/><ROW ID="59" TEXTSTR="  and ur.grpid=ug.grpid" LINEID="3"/><ROW ID="62" TEXTSTR="select max(userid) from users" LINEID="0"/><ROW ID="63" TEXTSTR="select * from users where userid=:userid" LINEID="0"/><ROW ID="64" TEXTSTR="delete from userrel where userid=:userid" LINEID="0"/><ROW ID="65" TEXTSTR="insert into userrel (userid, grpid) values (:userid, :grpid)" LINEID="0"/><ROW ID="68" TEXTSTR="delete from useraccess where userid=:userid" LINEID="0"/><ROW ID="70" TEXTSTR="delete from users where userid=:userid" LINEID="0"/><ROW ID="73" TEXTSTR="insert into useractivity (userid, funid, ontime)" LINEID="0"/><ROW ID="73" TEXTSTR=" values (:userid, :funid, :ontime)" LINEID="1"/><ROW ID="74" TEXTSTR="delete from useractivity where userid=:userid" LINEID="0"/><ROW ID="75" TEXTSTR="delete from useractivity" LINEID="0"/><ROW ID="76" TEXTSTR="update useractivity set funid=:funid, ontime=:ontime" LINEID="0"/><ROW ID="76" TEXTSTR=" where userid=:userid" LINEID="1"/><ROW ID="72" TEXTSTR="select ua.*, u.name as login, u.fullname as userfullname" LINEID="0"/><ROW ID="72" TEXTSTR=" from useractivity ua, users u" LINEID="1"/><ROW ID="72" TEXTSTR=" where u.userid=ua.userid" LINEID="2"/><ROW ID="72" TEXTSTR="" LINEID="3"/><ROW ID="77" TEXTSTR="select * from useractivity where userid=:userid" LINEID="0"/><ROW ID="80" TEXTSTR="update %tablename set deleted=1 where %keyname=:id" LINEID="0"/><ROW ID="16" TEXTSTR="select * from measures where deleted=0" LINEID="0"/><ROW ID="83" TEXTSTR="delete from banks where BankID=:BankId" LINEID="0"/><ROW ID="85" TEXTSTR="update Banks set def=1 where BankId=:BankId" LINEID="0"/><ROW ID="87" TEXTSTR="select * from Banks where def=1" LINEID="0"/><ROW ID="88" TEXTSTR="select * from Banks where BankID=:BankID" LINEID="0"/><ROW ID="89" TEXTSTR="select max(BankID) from Banks" LINEID="0"/><ROW ID="90" TEXTSTR="update banks set def=0" LINEID="0"/><ROW ID="84" TEXTSTR="select min(BankID) from Banks where deleted=0" LINEID="0"/><ROW ID="93" TEXTSTR="update %tablename set deleted=0 where %keyname=:id" LINEID="0"/><ROW ID="95" TEXTSTR="select min(ETypeID) from EquipType where deleted=0" LINEID="0"/><ROW ID="96" TEXTSTR="update EquipType set def=1 where ETypeID=:ETypeID" LINEID="0"/><ROW ID="97" TEXTSTR="select * from EquipType where def=1" LINEID="0"/><ROW ID="98" TEXTSTR="update EquipType set def=0" LINEID="0"/><ROW ID="49" TEXTSTR="insert into EQUIPTYPE (ETYPEID, NAME, def, deleted)" LINEID="0"/><ROW ID="49" TEXTSTR=" values (:ETYPEID, :name, :def, :deleted)" LINEID="1"/><ROW ID="50" TEXTSTR="update EQUIPTYPE set name=:name, def=:def, deleted=:deleted where ETYPEID=:ETYPEID" LINEID="0"/><ROW ID="94" TEXTSTR="delete from recyclebin where delid=:delid and tabid=:tabid" LINEID="0"/><ROW ID="105" TEXTSTR="select * from Materials where matid=:matid" LINEID="0"/><ROW ID="100" TEXTSTR="select tr.*, t.tablename, t.keyname, tt.tablename as tname" LINEID="0"/><ROW ID="100" TEXTSTR=" from tablerel tr, tables t, tables tt" LINEID="1"/><ROW ID="100" TEXTSTR=" where t.tabid=tr.pid" LINEID="2"/><ROW ID="100" TEXTSTR="  and tt.tabid=tr.tabid" LINEID="3"/><ROW ID="106" TEXTSTR="select max(MatID) from materials" LINEID="0"/><ROW ID="14" TEXTSTR="select * from currency where deleted=0 order by shortname" LINEID="0"/><ROW ID="109" TEXTSTR="select * from Materials where def=1" LINEID="0"/><ROW ID="110" TEXTSTR="update materials set def=0" LINEID="0"/><ROW ID="111" TEXTSTR="delete from Materials where MatID=:MatId" LINEID="0"/><ROW ID="112" TEXTSTR="select min(MatID) from Materials where deleted=0" LINEID="0"/><ROW ID="113" TEXTSTR="update Materials set def=1 where MatId=:MatId" LINEID="0"/><ROW ID="115" TEXTSTR="select * from WorkType where deleted=0" LINEID="0"/><ROW ID="116" TEXTSTR="select * from WorkType where def=1" LINEID="0"/><ROW ID="117" TEXTSTR="select * from WorkType where WTypeID=:WTypeID" LINEID="0"/><ROW ID="118" TEXTSTR="select max(WTypeID) from WorkType" LINEID="0"/><ROW ID="120" TEXTSTR="insert into WORKTYPE (WTYPEID, NAME, ARTIKUL, DEF, DELETED)" LINEID="0"/><ROW ID="120" TEXTSTR="values (:WTYPEID, :name, :artikul, :DEF, :DELETED)" LINEID="1"/><ROW ID="121" TEXTSTR="update WORKTYPE set name=:name, artikul=:artikul, def=:def, deleted=:deleted where WTYPEID=:WTYPEID" LINEID="0"/><ROW ID="119" TEXTSTR="update WorkType set def=0" LINEID="0"/><ROW ID="125" TEXTSTR="select max(KATYPEID) from KAgentTYPE" LINEID="0"/><ROW ID="127" TEXTSTR="insert into KAgentTYPE (KATYPEID, NAME, DEF, DELETED) values (:KATYPEID, :name, :DEF, :DELETED)" LINEID="0"/><ROW ID="128" TEXTSTR="update KAgentTYPE set name=:name, def=:def, DELETED=:DELETED where KATYPEID=:KATYPEID" LINEID="0"/><ROW ID="126" TEXTSTR="update KAgentTYPE set def=0" LINEID="0"/><ROW ID="131" TEXTSTR="select * from AccountType where TypeID=:TypeID" LINEID="0"/><ROW ID="52" TEXTSTR="select * from usergroups where deleted=0" LINEID="0"/><ROW ID="54" TEXTSTR="insert into usergroups" LINEID="0"/><ROW ID="54" TEXTSTR=" (grpid, name, deleted)" LINEID="1"/><ROW ID="54" TEXTSTR="values" LINEID="2"/><ROW ID="54" TEXTSTR=" (:grpid, :name, 0)" LINEID="3"/><ROW ID="24" TEXTSTR="select min(mid) from measures where deleted=0" LINEID="0"/><ROW ID="132" TEXTSTR="select max(TypeId) from AccountType" LINEID="0"/><ROW ID="134" TEXTSTR="select max(id) from recyclebin" LINEID="0"/><ROW ID="133" TEXTSTR="update AccountType set def=0" LINEID="0"/><ROW ID="135" TEXTSTR="insert into AccountTYPE (TYPEID, NAME, DEF, DELETED)" LINEID="0"/><ROW ID="135" TEXTSTR="values (:TYPEID, :name, :def, :deleted)" LINEID="1"/><ROW ID="136" TEXTSTR="update AccountTYPE set name=:name, def=:def, deleted=:deleted where TYPEID=:TYPEID" LINEID="0"/><ROW ID="138" TEXTSTR="select eqid, etypeid, EQUIP.name, artikul, power, notes, EquipType.Name TypeName" LINEID="0"/><ROW ID="138" TEXTSTR="from EQUIP, EquipType" LINEID="1"/><ROW ID="138" TEXTSTR="where EQUIP.deleted=0  and EQUIP.etypeid=EquipType.etypeid" LINEID="2"/><ROW ID="139" TEXTSTR="select * from Equip where EQID=:EQID" LINEID="0"/><ROW ID="140" TEXTSTR="select max(EQID) from Equip" LINEID="0"/><ROW ID="45" TEXTSTR="select *" LINEID="0"/><ROW ID="45" TEXTSTR="from EQUIPTYPE" LINEID="1"/><ROW ID="45" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="45" TEXTSTR="order by name" LINEID="3"/><ROW ID="143" TEXTSTR="select min(WTypeID) from WorkType where deleted=0" LINEID="0"/><ROW ID="144" TEXTSTR="update WorkType set def=1 where WTypeId=:WTypeId" LINEID="0"/><ROW ID="145" TEXTSTR="select min(KATypeID) from KAgentType where deleted=0" LINEID="0"/><ROW ID="146" TEXTSTR="update KAgentType set def=1 where KATypeID=:KATypeID" LINEID="0"/><ROW ID="147" TEXTSTR="select min(TypeID) from AccountType where deleted=0" LINEID="0"/><ROW ID="148" TEXTSTR="update AccountType set def=1 where TypeID=:TypeID" LINEID="0"/><ROW ID="142" TEXTSTR="update Equip" LINEID="0"/><ROW ID="142" TEXTSTR="set ETypeID=:Etypeid, Name=:name, Artikul=:artikul, Power=:power, Notes=:notes, deleted=:deleted" LINEID="1"/><ROW ID="142" TEXTSTR="where EQID=:EQID" LINEID="2"/><ROW ID="141" TEXTSTR="insert into equip (eqid, etypeid, name, artikul, power, notes, deleted)" LINEID="0"/><ROW ID="141" TEXTSTR="values (:eqid, :etypeid, :name, :artikul, :power, :notes, :deleted)" LINEID="1"/><ROW ID="155" TEXTSTR="select * from KAgentType where def=1" LINEID="0"/><ROW ID="157" TEXTSTR="select max(AccID) from AgentAccount" LINEID="0"/><ROW ID="158" TEXTSTR="select max(PersonID) from AgentPersons" LINEID="0"/><ROW ID="159" TEXTSTR="delete from AgentPersons where KAID=:KAID" LINEID="0"/><ROW ID="166" TEXTSTR="select * from AccountType where def=1" LINEID="0"/><ROW ID="26" TEXTSTR="select * from currency where deleted=0" LINEID="0"/><ROW ID="26" TEXTSTR="order by name" LINEID="1"/><ROW ID="168" TEXTSTR="select *" LINEID="0"/><ROW ID="168" TEXTSTR="from PrewAccount" LINEID="1"/><ROW ID="168" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="169" TEXTSTR="select * from PrewAccount where PrewID=:PrewID" LINEID="0"/><ROW ID="170" TEXTSTR="select max(PrewId) from PrewAccount" LINEID="0"/><ROW ID="171" TEXTSTR="insert into PrewAccount" LINEID="0"/><ROW ID="171" TEXTSTR="(PREWID, PREFIX, NAME, KAIDEXECUTOR, KAIDCUSTOMER, PERSONID, CRDATE, BASIS, PAYMENTSTYPE, TRANSFERPRICETYPE, NOTES, DELETED)" LINEID="1"/><ROW ID="171" TEXTSTR="values" LINEID="2"/><ROW ID="171" TEXTSTR="(:PREWID, :PREFIX, :NAME, :KAIDEXECUTOR, :KAIDCUSTOMER, :PERSONID, :CRDATE, :BASIS, :PAYMENTSTYPE, :TRANSFERPRICETYPE, :NOTES, :DELETED)" LINEID="3"/><ROW ID="172" TEXTSTR="update PrewAccount" LINEID="0"/><ROW ID="172" TEXTSTR=" set PREFIX=:PREFIX, NAME=:NAME, KAIDEXECUTOR=:KAIDEXECUTOR, KAIDCUSTOMER=:KAIDCUSTOMER, PERSONID=:PERSONID, CRDATE=:CRDATE, BASIS=:BASIS," LINEID="1"/><ROW ID="172" TEXTSTR=" PAYMENTSTYPE=:PAYMENTSTYPE, TRANSFERPRICETYPE=:TRANSFERPRICETYPE, NOTES=:NOTES, DELETED=:DELETED" LINEID="2"/><ROW ID="172" TEXTSTR=" where PrewId=:PrewId" LINEID="3"/><ROW ID="175" TEXTSTR="select typeid, name from accounttype" LINEID="0"/><ROW ID="176" TEXTSTR="select cr.rateid, cr.ondate, cr.onvalue" LINEID="0"/><ROW ID="176" TEXTSTR=" from currencyrate cr" LINEID="1"/><ROW ID="176" TEXTSTR=" where cr.currid=:currid" LINEID="2"/><ROW ID="176" TEXTSTR="  and cr.ondate=" LINEID="3"/><ROW ID="176" TEXTSTR="  (select max(ondate) from currencyrate where currid=cr.currid and ondate&lt;=:ondate)" LINEID="4"/><ROW ID="174" TEXTSTR="select PrewMaterials.*, Measures.ShortName, Currency.ShortName CurrName" LINEID="0"/><ROW ID="174" TEXTSTR="from PrewMaterials, Measures, Currency" LINEID="1"/><ROW ID="174" TEXTSTR="where  PrewMaterials.Mid=Measures.Mid and PrewMaterials.CurrID=Currency.CurrID" LINEID="2"/><ROW ID="174" TEXTSTR="and PrewID=:PrewID" LINEID="3"/><ROW ID="177" TEXTSTR="update profiles set lang=:lang, runcc=:runcc where profid=:profid" LINEID="0"/><ROW ID="179" TEXTSTR="select max(PMatID) from PrewMaterials" LINEID="0"/><ROW ID="180" TEXTSTR="delete from PrewMaterials where PrewID=:PrewID" LINEID="0"/><ROW ID="181" TEXTSTR="insert into PrewMaterials (PMATID, PREWID, MATID, AMOUNT, PRICE, CURRID, NAME, MID)" LINEID="0"/><ROW ID="181" TEXTSTR="values (:PMATID, :PREWID, :MATID, :AMOUNT, :PRICE, :CURRID, :NAME, :MID)" LINEID="1"/><ROW ID="181" TEXTSTR="" LINEID="2"/><ROW ID="181" TEXTSTR="" LINEID="3"/><ROW ID="182" TEXTSTR="update profiles set lang=:lang where profid=:profid" LINEID="0"/><ROW ID="183" TEXTSTR="select * from bankspersons where bankid=:bankid" LINEID="0"/><ROW ID="184" TEXTSTR="delete from bankspersons where bankid=:bankid" LINEID="0"/><ROW ID="185" TEXTSTR="select max(personid) from bankspersons" LINEID="0"/><ROW ID="186" TEXTSTR="insert into bankspersons" LINEID="0"/><ROW ID="186" TEXTSTR=" (personid, bankid, name, job, phone, email, notes)" LINEID="1"/><ROW ID="186" TEXTSTR="values" LINEID="2"/><ROW ID="186" TEXTSTR=" (:personid, :bankid, :name, :job, :phone, :email, :notes)" LINEID="3"/><ROW ID="187" TEXTSTR="select * from bankspersons where personid=:personid" LINEID="0"/><ROW ID="188" TEXTSTR="delete from bankspersons where personid=:personid" LINEID="0"/><ROW ID="189" TEXTSTR="update bankspersons set name=:name, phone=:phone, email=:email, bankid=:bankid," LINEID="0"/><ROW ID="189" TEXTSTR=" notes=:notes, job=:job where personid=:personid" LINEID="1"/><ROW ID="190" TEXTSTR="select distinct Post" LINEID="0"/><ROW ID="190" TEXTSTR="from AgentPersons" LINEID="1"/><ROW ID="190" TEXTSTR="order by post" LINEID="2"/><ROW ID="191" TEXTSTR="select * from KAgentTypeRel" LINEID="0"/><ROW ID="192" TEXTSTR="select KAID, KATYPEID from KAGENTTYPEREL where KAID=:KAID" LINEID="0"/><ROW ID="200" TEXTSTR="select s.*, sr.revdate, sr.revnum, sr.revid" LINEID="0"/><ROW ID="200" TEXTSTR=" from spec s, specrev sr" LINEID="1"/><ROW ID="200" TEXTSTR=" where s.specid=sr.specid" LINEID="2"/><ROW ID="200" TEXTSTR="  and sr.revdate=" LINEID="3"/><ROW ID="200" TEXTSTR="   (select max(revdate) from specrev where specid=s.specid and revdate&lt;=:ondate)" LINEID="4"/><ROW ID="201" TEXTSTR="insert into spec (specid, name, artikul, deleted)" LINEID="0"/><ROW ID="201" TEXTSTR=" values (:specid, :name, :artikul, 0)" LINEID="1"/><ROW ID="202" TEXTSTR="update spec" LINEID="0"/><ROW ID="202" TEXTSTR=" set name=:name," LINEID="1"/><ROW ID="202" TEXTSTR="     artikul=:artikul" LINEID="2"/><ROW ID="202" TEXTSTR=" where specid=:specid" LINEID="3"/><ROW ID="202" TEXTSTR="" LINEID="4"/><ROW ID="203" TEXTSTR="select s.*, sr.revdate, sr.revid, sr.revnum" LINEID="0"/><ROW ID="203" TEXTSTR=" from spec s, specrev sr" LINEID="1"/><ROW ID="203" TEXTSTR=" where s.specid=:specid" LINEID="2"/><ROW ID="203" TEXTSTR="  and s.specid=sr.specid" LINEID="3"/><ROW ID="203" TEXTSTR="  and sr.revdate=" LINEID="4"/><ROW ID="203" TEXTSTR="   (select max(revdate) from specrev where specid=s.specid and revdate&lt;=:ondate)" LINEID="5"/><ROW ID="204" TEXTSTR="select sm.*, m.name as matname, me.shortname as mname" LINEID="0"/><ROW ID="204" TEXTSTR=" from specmat sm, materials m, measures me" LINEID="1"/><ROW ID="204" TEXTSTR=" where sm.revid=:revid" LINEID="2"/><ROW ID="204" TEXTSTR="  and m.matid=sm.matid" LINEID="3"/><ROW ID="204" TEXTSTR="  and m.mid=me.mid" LINEID="4"/><ROW ID="205" TEXTSTR="select *" LINEID="0"/><ROW ID="205" TEXTSTR=" from specmat" LINEID="1"/><ROW ID="205" TEXTSTR=" where revid=:revid" LINEID="2"/><ROW ID="205" TEXTSTR="  and matid is null" LINEID="3"/><ROW ID="210" TEXTSTR="select * from matgroup where grpid=:grpid" LINEID="0"/><ROW ID="211" TEXTSTR="select max(grpid) from matgroup" LINEID="0"/><ROW ID="215" TEXTSTR="update matgroup set name=:name where grpid=:grpid" LINEID="0"/><ROW ID="216" TEXTSTR="delete from matgroup where grpid=:grpid" LINEID="0"/><ROW ID="152" TEXTSTR="select *" LINEID="0"/><ROW ID="152" TEXTSTR="from AgentPersons" LINEID="1"/><ROW ID="152" TEXTSTR="where KAID=:KAID" LINEID="2"/><ROW ID="152" TEXTSTR="order by NAME" LINEID="3"/><ROW ID="160" TEXTSTR="delete from AgentAccount" LINEID="0"/><ROW ID="160" TEXTSTR="where KAID=:KAID" LINEID="1"/><ROW ID="193" TEXTSTR="select KAID, KATYPEID" LINEID="0"/><ROW ID="193" TEXTSTR="from KAGENTTYPEREL" LINEID="1"/><ROW ID="193" TEXTSTR="where KAID=:KAID and KATYPEID=:KATYPEID" LINEID="2"/><ROW ID="194" TEXTSTR="select KATypeID, Name" LINEID="0"/><ROW ID="194" TEXTSTR="from KAGENTTYPE" LINEID="1"/><ROW ID="194" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="194" TEXTSTR="order by Name" LINEID="3"/><ROW ID="195" TEXTSTR="delete from KAGENTTYPEREL" LINEID="0"/><ROW ID="195" TEXTSTR="where KAID=:KAID" LINEID="1"/><ROW ID="196" TEXTSTR="select max(REID)" LINEID="0"/><ROW ID="196" TEXTSTR="from KAGENTTYPEREL" LINEID="1"/><ROW ID="197" TEXTSTR="insert into KAGENTTYPEREL(KAID, REID, KATYPEID)" LINEID="0"/><ROW ID="197" TEXTSTR="values (:KAID, :REID, :KATYPEID)" LINEID="1"/><ROW ID="198" TEXTSTR="select KAGENTTYPEREL.KAID, KagentType.Name, KAGENTTYPEREL.KATYPEID" LINEID="0"/><ROW ID="198" TEXTSTR="from KAGENTTYPEREL, KagentType" LINEID="1"/><ROW ID="198" TEXTSTR="where KAGENTTYPEREL.KATYPEID=KagentType.KATYPEID" LINEID="2"/><ROW ID="198" TEXTSTR="order by KagentType.Name" LINEID="3"/><ROW ID="198" TEXTSTR="" LINEID="4"/><ROW ID="123" TEXTSTR="select *" LINEID="0"/><ROW ID="123" TEXTSTR="from KAGENTTYPE" LINEID="1"/><ROW ID="123" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="123" TEXTSTR="order by Name" LINEID="3"/><ROW ID="124" TEXTSTR="select *" LINEID="0"/><ROW ID="124" TEXTSTR="from KAgentType" LINEID="1"/><ROW ID="124" TEXTSTR="where KATypeID=:KATypeID" LINEID="2"/><ROW ID="130" TEXTSTR="select *" LINEID="0"/><ROW ID="130" TEXTSTR="from AccountType" LINEID="1"/><ROW ID="130" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="130" TEXTSTR="order by name" LINEID="3"/><ROW ID="219" TEXTSTR="select * from warehouse where wid=:wid" LINEID="0"/><ROW ID="220" TEXTSTR="select max(wid) from warehouse" LINEID="0"/><ROW ID="209" TEXTSTR="select * from matgroup where deleted=0" LINEID="0"/><ROW ID="232" TEXTSTR="update matgroup set pid=:pid where grpid=:grpid" LINEID="0"/><ROW ID="234" TEXTSTR="update materials set grpid=:grpid where matid=:matid" LINEID="0"/><ROW ID="235" TEXTSTR="select * from entparams" LINEID="0"/><ROW ID="237" TEXTSTR="update entparams set name=:name, addr=:addr, phone=:phone, account=:account," LINEID="0"/><ROW ID="237" TEXTSTR=" bankid=:bankid, inn=:inn, okpo=:okpo, certnum=:certnum" LINEID="1"/><ROW ID="238" TEXTSTR="delete from entparams" LINEID="0"/><ROW ID="242" TEXTSTR="select * from commonparams" LINEID="0"/><ROW ID="243" TEXTSTR="delete from commonparams" LINEID="0"/><ROW ID="246" TEXTSTR="select epd.*" LINEID="0"/><ROW ID="246" TEXTSTR=" from expparams ep, functions f, expparamsdet epd" LINEID="1"/><ROW ID="246" TEXTSTR=" where ep.funid=f.funid" LINEID="2"/><ROW ID="246" TEXTSTR="  and f.classname=:classname" LINEID="3"/><ROW ID="246" TEXTSTR="  and ep.profid=:profid" LINEID="4"/><ROW ID="246" TEXTSTR="  and epd.expid=ep.expid" LINEID="5"/><ROW ID="246" TEXTSTR=" order by epd.num" LINEID="6"/><ROW ID="248" TEXTSTR="select * from expparams where funid=:funid" LINEID="0"/><ROW ID="249" TEXTSTR="select max(expid) from expparams" LINEID="0"/><ROW ID="250" TEXTSTR="insert into expparams (expid, funid, profid)" LINEID="0"/><ROW ID="250" TEXTSTR=" values (:expid, :funid, :profid)" LINEID="1"/><ROW ID="251" TEXTSTR="delete from expparamsdet where expid=:expid" LINEID="0"/><ROW ID="252" TEXTSTR="insert into expparamsdet (expid, fieldname, num, checked)" LINEID="0"/><ROW ID="252" TEXTSTR=" values (:expid, :fieldname, :num, :checked)" LINEID="1"/><ROW ID="178" TEXTSTR="update profintf set istyle=:istyle, oddcolor=:oddcolor where profid=:profid" LINEID="0"/><ROW ID="269" TEXTSTR="select m.*, ms.shortname" LINEID="0"/><ROW ID="269" TEXTSTR=" from materials m, measures ms" LINEID="1"/><ROW ID="269" TEXTSTR=" where m.matid=:matid" LINEID="2"/><ROW ID="269" TEXTSTR="  and m.mid=ms.mid" LINEID="3"/><ROW ID="221" TEXTSTR="insert into warehouse(WID, NAME, ADDR, NOTES, DELETED, DEF)" LINEID="0"/><ROW ID="221" TEXTSTR=" values (:WID, :NAME, :ADDR, :NOTES, :DELETED, :DEF)" LINEID="1"/><ROW ID="222" TEXTSTR="update warehouse" LINEID="0"/><ROW ID="222" TEXTSTR="set NAME=:NAME, ADDR=:ADDR, NOTES=:NOTES, DELETED=:DELETED, DEF=:DEF" LINEID="1"/><ROW ID="222" TEXTSTR="where wid=:wid" LINEID="2"/><ROW ID="272" TEXTSTR="select * from warehouse where def=1" LINEID="0"/><ROW ID="273" TEXTSTR="update warehouse set def=0" LINEID="0"/><ROW ID="274" TEXTSTR="select min(wid) from warehouse where deleted=0" LINEID="0"/><ROW ID="275" TEXTSTR="update warehouse set def=1 where wid=:wid" LINEID="0"/><ROW ID="225" TEXTSTR="select * from waybilllist where wbillid=:wbillid" LINEID="0"/><ROW ID="226" TEXTSTR="select max(wbillid) from WaybillList" LINEID="0"/><ROW ID="230" TEXTSTR="select * from WaybillList where NUM=:NUM" LINEID="0"/><ROW ID="277" TEXTSTR="select cr.rateid, cr.ondate, cr.onvalue" LINEID="0"/><ROW ID="277" TEXTSTR=" from currencyrate cr" LINEID="1"/><ROW ID="277" TEXTSTR=" where cr.currid=:currid" LINEID="2"/><ROW ID="277" TEXTSTR="  and cr.ondate=" LINEID="3"/><ROW ID="277" TEXTSTR="  (select max(ondate) from currencyrate where currid=cr.currid and ondate&lt;=:ondate)" LINEID="4"/><ROW ID="278" TEXTSTR="select max(POSID) from WAYBILLDET" LINEID="0"/><ROW ID="279" TEXTSTR="delete from WAYBILLDET where WBILLID=:WBILLID" LINEID="0"/><ROW ID="283" TEXTSTR="select *" LINEID="0"/><ROW ID="283" TEXTSTR="from PayType" LINEID="1"/><ROW ID="285" TEXTSTR="select wblist.*, curr.SHORTNAME currname, curr.REPSHORTNAME currpershortname, ka.name kaname, ka.fullname kafullname, ka.phone kaphone" LINEID="0"/><ROW ID="285" TEXTSTR="from WaybillList wblist, kagent ka, CURRENCY curr" LINEID="1"/><ROW ID="285" TEXTSTR="where wblist.deleted=0" LINEID="2"/><ROW ID="285" TEXTSTR="      and wblist.WTYPE=0" LINEID="3"/><ROW ID="285" TEXTSTR="      and ka.kaid=wblist.kaid" LINEID="4"/><ROW ID="285" TEXTSTR="      and curr.currid=wblist.currid" LINEID="5"/><ROW ID="285" TEXTSTR="order by wblist.ondate desc" LINEID="6"/><ROW ID="286" TEXTSTR="select WAYBILLDET.*" LINEID="0"/><ROW ID="286" TEXTSTR="from WAYBILLDET" LINEID="1"/><ROW ID="286" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="286" TEXTSTR="order by posid" LINEID="3"/><ROW ID="292" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="292" TEXTSTR="set CHECKED=1" LINEID="1"/><ROW ID="292" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="293" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="293" TEXTSTR="set CHECKED=0" LINEID="1"/><ROW ID="293" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="302" TEXTSTR="select * from paytype" LINEID="0"/><ROW ID="302" TEXTSTR=" order by name" LINEID="1"/><ROW ID="308" TEXTSTR="select max(paydocid) from paydoc" LINEID="0"/><ROW ID="309" TEXTSTR="delete from paydoc where paydocid=:paydocid" LINEID="0"/><ROW ID="8" TEXTSTR="select * from currency where def=1" LINEID="0"/><ROW ID="35" TEXTSTR="update currency" LINEID="0"/><ROW ID="35" TEXTSTR=" set name=:name," LINEID="1"/><ROW ID="35" TEXTSTR="     shortname=:shortname," LINEID="2"/><ROW ID="35" TEXTSTR="     def=:def," LINEID="3"/><ROW ID="35" TEXTSTR="     repshortname=:repshortname," LINEID="4"/><ROW ID="35" TEXTSTR="     repfracname=:repfracname" LINEID="5"/><ROW ID="35" TEXTSTR=" where currid=:currid" LINEID="6"/><ROW ID="34" TEXTSTR="insert into currency" LINEID="0"/><ROW ID="34" TEXTSTR="  (currid, name, shortname, def, deleted, repshortname, repfracname, curtype)" LINEID="1"/><ROW ID="34" TEXTSTR=" values" LINEID="2"/><ROW ID="34" TEXTSTR="  (:currid, :name, :shortname, :def, 0, :repshortname, :repfracname, 0)" LINEID="3"/><ROW ID="282" TEXTSTR="select * from currency where def=1" LINEID="0"/><ROW ID="156" TEXTSTR="select *" LINEID="0"/><ROW ID="156" TEXTSTR="from KAgent" LINEID="1"/><ROW ID="156" TEXTSTR="where KAID=:KAID" LINEID="2"/><ROW ID="163" TEXTSTR="select max(KAID)" LINEID="0"/><ROW ID="163" TEXTSTR="from KAgent" LINEID="1"/><ROW ID="311" TEXTSTR="update paydoc set checked=:checked where paydocid=:paydocid" LINEID="0"/><ROW ID="314" TEXTSTR="select * from payorder where paydocid=:paydocid" LINEID="0"/><ROW ID="316" TEXTSTR="delete from payorder where paydocid=:paydocid" LINEID="0"/><ROW ID="317" TEXTSTR="select po.paydocid" LINEID="0"/><ROW ID="317" TEXTSTR=" from paydoc pd, kagent ka, paytype pt, payorder po" LINEID="1"/><ROW ID="317" TEXTSTR=" where pd.kaid=ka.kaid" LINEID="2"/><ROW ID="317" TEXTSTR="  and pd.deleted=0" LINEID="3"/><ROW ID="317" TEXTSTR="  and pd.ondate between :fromdate and :todate" LINEID="4"/><ROW ID="317" TEXTSTR="  and pd.doctype=:doctype" LINEID="5"/><ROW ID="317" TEXTSTR="  and pt.ptypeid=pd.ptypeid" LINEID="6"/><ROW ID="317" TEXTSTR="  and pd.paydocid=po.paydocid" LINEID="7"/><ROW ID="317" TEXTSTR="  %m" LINEID="8"/><ROW ID="320" TEXTSTR="select * from paykind" LINEID="0"/><ROW ID="325" TEXTSTR="select * from payorderparams" LINEID="0"/><ROW ID="327" TEXTSTR="delete from payorderparams" LINEID="0"/><ROW ID="326" TEXTSTR="insert into payorderparams (pkindid, acc, paytype, paytime, code, res, q, dest, doccount)" LINEID="0"/><ROW ID="326" TEXTSTR=" values (:pkindid, :acc, :paytype, :paytime, :code, :res, :q, :dest, :doccount)" LINEID="1"/><ROW ID="329" TEXTSTR="select * from cashorderparams" LINEID="0"/><ROW ID="330" TEXTSTR="select * from cashorder where paydocid=:paydocid" LINEID="0"/><ROW ID="331" TEXTSTR="delete from cashorder where paydocid=:paydocid" LINEID="0"/><ROW ID="332" TEXTSTR="insert into cashorder (paydocid, okud, debet, corracc, num, ondate)" LINEID="0"/><ROW ID="332" TEXTSTR=" values (:paydocid, :okud, :debet, :corracc, :num, :ondate)" LINEID="1"/><ROW ID="333" TEXTSTR="delete from cashorderparams" LINEID="0"/><ROW ID="334" TEXTSTR="insert into cashorderparams (okud, debet, corracc, doccount)" LINEID="0"/><ROW ID="334" TEXTSTR=" values (:okud, :debet, :corracc, :doccount)" LINEID="1"/><ROW ID="335" TEXTSTR="select co.paydocid" LINEID="0"/><ROW ID="335" TEXTSTR=" from paydoc pd, kagent ka, paytype pt, cashorder co" LINEID="1"/><ROW ID="335" TEXTSTR=" where pd.kaid=ka.kaid" LINEID="2"/><ROW ID="335" TEXTSTR="  and pd.deleted=0" LINEID="3"/><ROW ID="335" TEXTSTR="  and pd.ondate between :fromdate and :todate" LINEID="4"/><ROW ID="335" TEXTSTR="  and pd.doctype=:doctype" LINEID="5"/><ROW ID="335" TEXTSTR="  and pt.ptypeid=pd.ptypeid" LINEID="6"/><ROW ID="335" TEXTSTR="  and pd.paydocid=co.paydocid" LINEID="7"/><ROW ID="335" TEXTSTR="  %m" LINEID="8"/><ROW ID="336" TEXTSTR="select ap.*" LINEID="0"/><ROW ID="336" TEXTSTR=" from agentpersons ap" LINEID="1"/><ROW ID="336" TEXTSTR=" where ap.kaid=:kaid" LINEID="2"/><ROW ID="336" TEXTSTR=" order by ap.name" LINEID="3"/><ROW ID="336" TEXTSTR="" LINEID="4"/><ROW ID="339" TEXTSTR="delete from agentaccount where accid=:accid" LINEID="0"/><ROW ID="341" TEXTSTR="select distinct docname from agentdoc order by docname" LINEID="0"/><ROW ID="342" TEXTSTR="delete from agentdoc where kaid=:kaid" LINEID="0"/><ROW ID="343" TEXTSTR="insert into agentdoc" LINEID="0"/><ROW ID="343" TEXTSTR=" (kaid, docnum, docseries, docname, docwhoproduce, docdate)" LINEID="1"/><ROW ID="343" TEXTSTR=" values" LINEID="2"/><ROW ID="343" TEXTSTR=" (:kaid, :docnum, :docseries, :docname, :docwhoproduce, :docdate)" LINEID="3"/><ROW ID="344" TEXTSTR="select * from agentdoc where kaid=:kaid" LINEID="0"/><ROW ID="345" TEXTSTR="update kagent set ktype=:ktype where kaid=:kaid" LINEID="0"/><ROW ID="346" TEXTSTR="select * from agentpersons where personid=:personid" LINEID="0"/><ROW ID="347" TEXTSTR="delete from agentpersons where personid=:personid" LINEID="0"/><ROW ID="348" TEXTSTR="update agentpersons set name=:name, post=:post, email=:email," LINEID="0"/><ROW ID="348" TEXTSTR="  phone=:phone, kaid=:kaid, notes=:notes" LINEID="1"/><ROW ID="348" TEXTSTR=" where personid=:personid" LINEID="2"/><ROW ID="82" TEXTSTR="select * from banks where deleted=0 order by name" LINEID="0"/><ROW ID="6" TEXTSTR="select p.*, pi.istyle, pi.oddcolor" LINEID="0"/><ROW ID="6" TEXTSTR=" from profiles p, profintf pi" LINEID="1"/><ROW ID="6" TEXTSTR=" where p.profid=pi.profid" LINEID="2"/><ROW ID="101" TEXTSTR="%sql" LINEID="0"/><ROW ID="354" TEXTSTR="select wmt.*" LINEID="0"/><ROW ID="354" TEXTSTR="from wmatturn wmt" LINEID="1"/><ROW ID="354" TEXTSTR="where wmt.posid=:posid and wmt.sourceid=:sourceid" LINEID="2"/><ROW ID="365" TEXTSTR="select sum(wm.amount) as reserved, m.matid, m.grpid" LINEID="0"/><ROW ID="365" TEXTSTR=" from materials m, wmatturn wm, waybilldet wbd" LINEID="1"/><ROW ID="365" TEXTSTR=" where wbd.matid=m.matid" LINEID="2"/><ROW ID="365" TEXTSTR="  and wbd.posid=wm.posid" LINEID="3"/><ROW ID="365" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="4"/><ROW ID="365" TEXTSTR="  and wm.turntype=2" LINEID="5"/><ROW ID="365" TEXTSTR="  %m" LINEID="6"/><ROW ID="365" TEXTSTR=" group by m.matid, m.grpid" LINEID="7"/><ROW ID="295" TEXTSTR="select sum(wm.amount*wm.turntype) as remain, m.matid," LINEID="0"/><ROW ID="295" TEXTSTR="  m.name as matname, m.artikul, m.grpid, ms.shortname" LINEID="1"/><ROW ID="295" TEXTSTR=" from materials m, measures ms, wmatturn wm, waybilldet wbd" LINEID="2"/><ROW ID="295" TEXTSTR=" where wbd.matid=m.matid" LINEID="3"/><ROW ID="295" TEXTSTR="  and wbd.posid=wm.posid" LINEID="4"/><ROW ID="295" TEXTSTR="  and m.mid=ms.mid" LINEID="5"/><ROW ID="295" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="6"/><ROW ID="295" TEXTSTR="  and wm.turntype&lt;&gt;2" LINEID="7"/><ROW ID="295" TEXTSTR="  %m" LINEID="8"/><ROW ID="295" TEXTSTR=" group by m.matid, m.name, m.artikul, m.grpid, ms.shortname" LINEID="9"/><ROW ID="295" TEXTSTR=" %remain" LINEID="10"/><ROW ID="371" TEXTSTR="select kapersons.name" LINEID="0"/><ROW ID="371" TEXTSTR="from agentpersons kapersons" LINEID="1"/><ROW ID="371" TEXTSTR="where kaid=:kaid" LINEID="2"/><ROW ID="374" TEXTSTR="select name from warehouse where wid=:wid" LINEID="0"/><ROW ID="375" TEXTSTR="delete from WMatTurn" LINEID="0"/><ROW ID="375" TEXTSTR="where SourceID in (select POSID from WAYBILLDET where WBILLID=:WBILLID)" LINEID="1"/><ROW ID="376" TEXTSTR="select max(num) from materials where grpid=:grpid" LINEID="0"/><ROW ID="378" TEXTSTR="update materials set num=:num where matid=:matid" LINEID="0"/><ROW ID="379" TEXTSTR="update materials set num=num-1" LINEID="0"/><ROW ID="379" TEXTSTR=" where grpid=:grpid" LINEID="1"/><ROW ID="379" TEXTSTR="  and num&lt;=:num" LINEID="2"/><ROW ID="377" TEXTSTR="update materials set num=num+1" LINEID="0"/><ROW ID="377" TEXTSTR=" where grpid=:grpid" LINEID="1"/><ROW ID="377" TEXTSTR="  and num&gt;=:num" LINEID="2"/><ROW ID="382" TEXTSTR="select matid, wid" LINEID="0"/><ROW ID="382" TEXTSTR="from waybilldet" LINEID="1"/><ROW ID="382" TEXTSTR="where posid=:posid" LINEID="2"/><ROW ID="384" TEXTSTR="select sum(wm.amount) as reserved, wbd.posid" LINEID="0"/><ROW ID="384" TEXTSTR=" from wmatturn wm, warehouse w, waybilldet wbd" LINEID="1"/><ROW ID="384" TEXTSTR=" where wbd.matid=:matid" LINEID="2"/><ROW ID="384" TEXTSTR="  and wbd.wid=:wid" LINEID="3"/><ROW ID="384" TEXTSTR="  and wm.posid=wbd.posid" LINEID="4"/><ROW ID="384" TEXTSTR="  and wbd.wid=w.wid" LINEID="5"/><ROW ID="384" TEXTSTR="  and wm.turntype=2" LINEID="6"/><ROW ID="384" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="7"/><ROW ID="384" TEXTSTR=" group by wbd.posid" LINEID="8"/><ROW ID="385" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="385" TEXTSTR="set DELETED=:DELETED" LINEID="1"/><ROW ID="385" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="385" TEXTSTR="" LINEID="3"/><ROW ID="385" TEXTSTR="" LINEID="4"/><ROW ID="391" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="391" TEXTSTR="  wh.name whname, mat.artikul as artikul" LINEID="1"/><ROW ID="391" TEXTSTR=" from WAYBILLDET wbdet, MATERIALS mat, MEASURES msr," LINEID="2"/><ROW ID="391" TEXTSTR="   WAREHOUSE wh" LINEID="3"/><ROW ID="391" TEXTSTR=" where wbdet.WBILLID=:WBILLID" LINEID="4"/><ROW ID="391" TEXTSTR="   and mat.matid=wbdet.matid" LINEID="5"/><ROW ID="391" TEXTSTR="   and msr.mid=mat.mid" LINEID="6"/><ROW ID="391" TEXTSTR="   and wh.wid=wbdet.wid" LINEID="7"/><ROW ID="391" TEXTSTR=" order by wbdet.posid" LINEID="8"/><ROW ID="393" TEXTSTR="select count(*) from matgroup where pid=:pid" LINEID="0"/><ROW ID="393" TEXTSTR=" and pid&lt;&gt;grpid" LINEID="1"/><ROW ID="395" TEXTSTR="select wid" LINEID="0"/><ROW ID="395" TEXTSTR="from materials" LINEID="1"/><ROW ID="395" TEXTSTR="where matid=:matid" LINEID="2"/><ROW ID="397" TEXTSTR="select max(defnum)" LINEID="0"/><ROW ID="397" TEXTSTR="from WaybillList" LINEID="1"/><ROW ID="397" TEXTSTR="where WType=:wtype" LINEID="2"/><ROW ID="398" TEXTSTR="insert into WAYBILLDET (POSID, WBILLID, MATID, WID, AMOUNT, PRICE)" LINEID="0"/><ROW ID="398" TEXTSTR="select" LINEID="1"/><ROW ID="398" TEXTSTR="wbdet2.posid+1, :WBILLID1,wbdet.MATID, wbdet.WID, wbdet.AMOUNT, wbdet.PRICE" LINEID="2"/><ROW ID="398" TEXTSTR="from WAYBILLDET wbdet2, WAYBILLDET wbdet" LINEID="3"/><ROW ID="398" TEXTSTR="where wbdet.posid=:posid1" LINEID="4"/><ROW ID="398" TEXTSTR="      and wbdet2.posid=(select max(wbdet3.posid) from waybilldet wbdet3)" LINEID="5"/><ROW ID="403" TEXTSTR="select * from pricetypes where ptypeid=:ptypeid" LINEID="0"/><ROW ID="404" TEXTSTR="delete from pricetypes where ptypeid=:ptypeid" LINEID="0"/><ROW ID="406" TEXTSTR="delete from matprices where matid=:matid" LINEID="0"/><ROW ID="409" TEXTSTR="delete from matgroupprices where grpid=:grpid" LINEID="0"/><ROW ID="412" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="412" TEXTSTR="set CHECKED=0, todate=null, reason=null" LINEID="1"/><ROW ID="412" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="413" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="413" TEXTSTR="set ToDate=:ToDate" LINEID="1"/><ROW ID="413" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="424" TEXTSTR="delete from kadiscount where kaid=:kaid" LINEID="0"/><ROW ID="426" TEXTSTR="delete from kamatdiscount where kaid=:kaid" LINEID="0"/><ROW ID="427" TEXTSTR="delete from kamatgroupdiscount where kaid=:kaid" LINEID="0"/><ROW ID="428" TEXTSTR="insert into kamatdiscount" LINEID="0"/><ROW ID="428" TEXTSTR=" (kaid, matid, onvalue)" LINEID="1"/><ROW ID="428" TEXTSTR="values" LINEID="2"/><ROW ID="428" TEXTSTR=" (:kaid, :matid, :onvalue)" LINEID="3"/><ROW ID="428" TEXTSTR="" LINEID="4"/><ROW ID="429" TEXTSTR="insert into kamatgroupdiscount" LINEID="0"/><ROW ID="429" TEXTSTR=" (kaid, grpid, onvalue)" LINEID="1"/><ROW ID="429" TEXTSTR="values" LINEID="2"/><ROW ID="429" TEXTSTR=" (:kaid, :grpid, :onvalue)" LINEID="3"/><ROW ID="429" TEXTSTR="" LINEID="4"/><ROW ID="430" TEXTSTR="select * from kadiscount where kaid=:kaid" LINEID="0"/><ROW ID="431" TEXTSTR="select mgd.*, mg.name" LINEID="0"/><ROW ID="431" TEXTSTR=" from kamatgroupdiscount mgd, matgroup mg" LINEID="1"/><ROW ID="431" TEXTSTR="  where mgd.kaid=:kaid" LINEID="2"/><ROW ID="431" TEXTSTR="   and mg.grpid=mgd.grpid" LINEID="3"/><ROW ID="431" TEXTSTR="" LINEID="4"/><ROW ID="432" TEXTSTR="select md.*, m.name, m.artikul" LINEID="0"/><ROW ID="432" TEXTSTR=" from kamatdiscount md, materials m" LINEID="1"/><ROW ID="432" TEXTSTR=" where md.kaid=:kaid" LINEID="2"/><ROW ID="432" TEXTSTR="  and md.matid=m.matid" LINEID="3"/><ROW ID="436" TEXTSTR="select distinct producer from materials" LINEID="0"/><ROW ID="435" TEXTSTR="select * from countries" LINEID="0"/><ROW ID="435" TEXTSTR=" where deleted=0" LINEID="1"/><ROW ID="435" TEXTSTR=" order by name" LINEID="2"/><ROW ID="437" TEXTSTR="select * from countries where cid=:cid" LINEID="0"/><ROW ID="438" TEXTSTR="delete from countries where cid=:cid" LINEID="0"/><ROW ID="439" TEXTSTR="update countries set name=:name, shortname=:shortname" LINEID="0"/><ROW ID="439" TEXTSTR=" where cid=:cid" LINEID="1"/><ROW ID="440" TEXTSTR="insert into countries (cid, name, shortname, deleted)" LINEID="0"/><ROW ID="440" TEXTSTR=" values (:cid, :name, :shortname, 0)" LINEID="1"/><ROW ID="443" TEXTSTR="select * from taxwb where twbid=:twbid" LINEID="0"/><ROW ID="444" TEXTSTR="select max(defnum)" LINEID="0"/><ROW ID="444" TEXTSTR="from taxwb" LINEID="1"/><ROW ID="445" TEXTSTR="select max(twbid) from taxwb" LINEID="0"/><ROW ID="446" TEXTSTR="insert into TaxWB" LINEID="0"/><ROW ID="446" TEXTSTR="(TWBID, KAID, ONDATE, NUM, ADDCHARGES, DISCOUNT, DEFNUM, DELETED, CHECKED," LINEID="1"/><ROW ID="446" TEXTSTR="    SUMMALL, CONDITION, FORM, PERSONID, NDS)" LINEID="2"/><ROW ID="446" TEXTSTR="values" LINEID="3"/><ROW ID="446" TEXTSTR="(:TWBID, :KAID, :ONDATE, :NUM, :ADDCHARGES, :DISCOUNT, :DEFNUM, :DELETED, :CHECKED," LINEID="4"/><ROW ID="446" TEXTSTR="    :SUMMALL, :CONDITION, :FORM, :PERSONID, :NDS)" LINEID="5"/><ROW ID="446" TEXTSTR="" LINEID="6"/><ROW ID="446" TEXTSTR="" LINEID="7"/><ROW ID="447" TEXTSTR="update TaxWB" LINEID="0"/><ROW ID="447" TEXTSTR="set KAID=:KAID, ONDATE=:ONDATE, NUM=:NUM, ADDCHARGES=:ADDCHARGES, DISCOUNT=:DISCOUNT," LINEID="1"/><ROW ID="447" TEXTSTR="    DEFNUM=:DEFNUM, DELETED=:DELETED, CHECKED=:CHECKED, SUMMALL=:SUMMALL," LINEID="2"/><ROW ID="447" TEXTSTR="    CONDITION=:CONDITION, FORM=:FORM, PERSONID=:PERSONID, NDS=:NDS" LINEID="3"/><ROW ID="447" TEXTSTR="where TWBID=:TWBID" LINEID="4"/><ROW ID="448" TEXTSTR="update TaxWB" LINEID="0"/><ROW ID="448" TEXTSTR="set CHECKED=1" LINEID="1"/><ROW ID="448" TEXTSTR="where TWBID=:TWBID" LINEID="2"/><ROW ID="449" TEXTSTR="update TaxWB" LINEID="0"/><ROW ID="449" TEXTSTR="set CHECKED=0" LINEID="1"/><ROW ID="449" TEXTSTR="where TWBID=:TWBID" LINEID="2"/><ROW ID="451" TEXTSTR="delete from TaxWBDet where twbid=:twbid" LINEID="0"/><ROW ID="452" TEXTSTR="insert into TAXWBDET (TWBDETID, TWBID, MATID, AMOUNT, ONDATE, PRICE)" LINEID="0"/><ROW ID="452" TEXTSTR="values (:TWBDETID, :TWBID, :MATID, :AMOUNT, :ONDATE, :PRICE)" LINEID="1"/><ROW ID="453" TEXTSTR="select max(TWBDETID) from TAXWBDET" LINEID="0"/><ROW ID="425" TEXTSTR="insert into kadiscount (kaid, discforall, onvalue, disccustom)" LINEID="0"/><ROW ID="425" TEXTSTR=" values (:kaid, :discforall, :onvalue, :disccustom)" LINEID="1"/><ROW ID="463" TEXTSTR="select min(ptypeid) from pricetypes where deleted=0" LINEID="0"/><ROW ID="464" TEXTSTR="update pricetypes" LINEID="0"/><ROW ID="464" TEXTSTR=" set def=1 where ptypeid=:ptypeid" LINEID="1"/><ROW ID="465" TEXTSTR="update pricetypes set def=0" LINEID="0"/><ROW ID="29" TEXTSTR="select cr.rateid, cr.ondate, cr.onvalue" LINEID="0"/><ROW ID="29" TEXTSTR=" from currencyrate cr" LINEID="1"/><ROW ID="29" TEXTSTR=" where cr.currid=:currid" LINEID="2"/><ROW ID="29" TEXTSTR="  and cr.ondate&lt;=:ondate" LINEID="3"/><ROW ID="29" TEXTSTR=" order by cr.ondate desc" LINEID="4"/><ROW ID="467" TEXTSTR="delete" LINEID="0"/><ROW ID="467" TEXTSTR="from waybillmove" LINEID="1"/><ROW ID="467" TEXTSTR="where wbillid=:wbillid" LINEID="2"/><ROW ID="469" TEXTSTR="select *" LINEID="0"/><ROW ID="469" TEXTSTR="from WayBillMove" LINEID="1"/><ROW ID="469" TEXTSTR="where wbillid=:wbillid" LINEID="2"/><ROW ID="470" TEXTSTR="select matid, grpid, name, artikul" LINEID="0"/><ROW ID="470" TEXTSTR=" from materials" LINEID="1"/><ROW ID="470" TEXTSTR=" where grpid=:grpid" LINEID="2"/><ROW ID="470" TEXTSTR="  and deleted=0" LINEID="3"/><ROW ID="411" TEXTSTR="select wbdet.*" LINEID="0"/><ROW ID="411" TEXTSTR="from WAYBILLDET wbdet" LINEID="1"/><ROW ID="411" TEXTSTR="where wbdet.posid=:posid1" LINEID="2"/><ROW ID="472" TEXTSTR="select bankid from banks where mfo=:mfo" LINEID="0"/><ROW ID="473" TEXTSTR="select * from kagent where name=:name" LINEID="0"/><ROW ID="366" TEXTSTR="select sum(wm.amount) as reserved, w.wid" LINEID="0"/><ROW ID="366" TEXTSTR=" from wmatturn wm, warehouse w, waybilldet wbd" LINEID="1"/><ROW ID="366" TEXTSTR=" where wbd.matid=:matid" LINEID="2"/><ROW ID="366" TEXTSTR="  and w.wid=wbd.wid" LINEID="3"/><ROW ID="366" TEXTSTR="  and wm.posid=wbd.posid" LINEID="4"/><ROW ID="366" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="5"/><ROW ID="366" TEXTSTR="  and wm.turntype=2" LINEID="6"/><ROW ID="366" TEXTSTR="  %m" LINEID="7"/><ROW ID="366" TEXTSTR=" group by w.wid" LINEID="8"/><ROW ID="366" TEXTSTR="" LINEID="9"/><ROW ID="367" TEXTSTR="select sum(wm.amount) as reserved, wbd.posid" LINEID="0"/><ROW ID="367" TEXTSTR=" from wmatturn wm, warehouse w, waybilldet wbd" LINEID="1"/><ROW ID="367" TEXTSTR=" where wbd.matid=:matid" LINEID="2"/><ROW ID="367" TEXTSTR="  and wm.posid=wbd.posid" LINEID="3"/><ROW ID="367" TEXTSTR="  and wbd.wid=w.wid" LINEID="4"/><ROW ID="367" TEXTSTR="  and wm.turntype=2" LINEID="5"/><ROW ID="367" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="6"/><ROW ID="367" TEXTSTR="  %m" LINEID="7"/><ROW ID="367" TEXTSTR=" group by wbd.posid" LINEID="8"/><ROW ID="367" TEXTSTR="" LINEID="9"/><ROW ID="468" TEXTSTR="insert into Waybillmove (WBILLID, sourcewid, destwid, personid)" LINEID="0"/><ROW ID="468" TEXTSTR=" values(:WBILLID, :sourcewid, :destwid, :personid)" LINEID="1"/><ROW ID="468" TEXTSTR="" LINEID="2"/><ROW ID="477" TEXTSTR="select wbd1.posid" LINEID="0"/><ROW ID="477" TEXTSTR=" from waybilldet wbd1" LINEID="1"/><ROW ID="477" TEXTSTR=" where wbd1.posid not in" LINEID="2"/><ROW ID="477" TEXTSTR="  (select wt.sourceid" LINEID="3"/><ROW ID="477" TEXTSTR="    from wmatturn wt, waybilldet wbd" LINEID="4"/><ROW ID="477" TEXTSTR="    where wbd.wbillid=wbd1.wbillid" LINEID="5"/><ROW ID="477" TEXTSTR="      and wt.sourceid=wbd.posid)" LINEID="6"/><ROW ID="477" TEXTSTR="  and wbd1.wbillid=:wbillid" LINEID="7"/><ROW ID="479" TEXTSTR="select sum(wmt.amount) as rsv" LINEID="0"/><ROW ID="479" TEXTSTR="from wmatturn wmt" LINEID="1"/><ROW ID="479" TEXTSTR="where wmt.posid=:posid and wmt.turntype=2 and wmt.ondate&lt;=:ondate" LINEID="2"/><ROW ID="479" TEXTSTR="group by wmt.posid" LINEID="3"/><ROW ID="479" TEXTSTR="having sum(wmt.amount)&gt;0" LINEID="4"/><ROW ID="480" TEXTSTR="select sum(wmt.amount*wmt.turntype) as remain" LINEID="0"/><ROW ID="480" TEXTSTR="from wmatturn wmt" LINEID="1"/><ROW ID="480" TEXTSTR="where wmt.posid=:posid and wmt.turntype&lt;&gt;2 and wmt.ondate&lt;=:ondate" LINEID="2"/><ROW ID="480" TEXTSTR="group by wmt.posid" LINEID="3"/><ROW ID="480" TEXTSTR="having sum(wmt.amount*wmt.turntype)&gt;0" LINEID="4"/><ROW ID="482" TEXTSTR="delete from WAYBILLDET where WBILLID=:WBILLID and WID=:WID" LINEID="0"/><ROW ID="476" TEXTSTR="select wbl.*, &apos;&apos; as fullname, &apos;&apos; as personname," LINEID="0"/><ROW ID="476" TEXTSTR="  &apos;&apos; as shortname, 0 as onvalue, whin.name as whnamein," LINEID="1"/><ROW ID="476" TEXTSTR="  whout.name as whnameout" LINEID="2"/><ROW ID="476" TEXTSTR=" from waybilllist wbl, waybillmove wbm, warehouse whin," LINEID="3"/><ROW ID="476" TEXTSTR="   warehouse whout" LINEID="4"/><ROW ID="476" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="5"/><ROW ID="476" TEXTSTR="  and wbm.destwid=whin.wid" LINEID="6"/><ROW ID="476" TEXTSTR="  and wbm.sourcewid=whout.wid" LINEID="7"/><ROW ID="476" TEXTSTR="  and wbl.wbillid=wbm.wbillid" LINEID="8"/><ROW ID="476" TEXTSTR="" LINEID="9"/><ROW ID="476" TEXTSTR="" LINEID="10"/><ROW ID="484" TEXTSTR="select wbl.*, ka.name as fullname, p.name as personname," LINEID="0"/><ROW ID="484" TEXTSTR="  &apos; &apos; as shortname, 0 as onvalue, whin.name as whnamein," LINEID="1"/><ROW ID="484" TEXTSTR="  whout.name as whnameout" LINEID="2"/><ROW ID="484" TEXTSTR=" from waybilllist wbl, waybillmove wbm, warehouse whin," LINEID="3"/><ROW ID="484" TEXTSTR="   warehouse whout" LINEID="4"/><ROW ID="484" TEXTSTR=" left outer join kagent p on wbl.personid=p.kaid" LINEID="5"/><ROW ID="484" TEXTSTR=" left outer join kagent ka on ka.kaid=wbl.kaid" LINEID="6"/><ROW ID="484" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="7"/><ROW ID="484" TEXTSTR="  and wbm.destwid=whin.wid" LINEID="8"/><ROW ID="484" TEXTSTR="  and wbm.sourcewid=whout.wid" LINEID="9"/><ROW ID="484" TEXTSTR="  and wbl.wbillid=wbm.wbillid" LINEID="10"/><ROW ID="484" TEXTSTR="" LINEID="11"/><ROW ID="487" TEXTSTR="select pl.*" LINEID="0"/><ROW ID="487" TEXTSTR="from pricelist pl" LINEID="1"/><ROW ID="487" TEXTSTR="where pl.plid=:plid" LINEID="2"/><ROW ID="491" TEXTSTR="delete from PLDetData" LINEID="0"/><ROW ID="491" TEXTSTR="where ColId in (select ColId from PLCols where PLID=:PLID)" LINEID="1"/><ROW ID="492" TEXTSTR="select * from PLDetData" LINEID="0"/><ROW ID="492" TEXTSTR="where ColId in (select ColId from PLCols where PLID=:PLID)" LINEID="1"/><ROW ID="493" TEXTSTR="insert into PLDetData(PLDetID,ColID,Data)" LINEID="0"/><ROW ID="493" TEXTSTR="values (:PLDetID,:ColID,:Data)" LINEID="1"/><ROW ID="494" TEXTSTR="%m" LINEID="0"/><ROW ID="495" TEXTSTR="drop table %m" LINEID="0"/><ROW ID="496" TEXTSTR="delete from PLColPriceTypes" LINEID="0"/><ROW ID="496" TEXTSTR="where ColId in (select ColId from PLCols where PLID=:PLID)" LINEID="1"/><ROW ID="497" TEXTSTR="select * from PLColPriceTypes" LINEID="0"/><ROW ID="497" TEXTSTR="where ColId=:ColId" LINEID="1"/><ROW ID="498" TEXTSTR="insert into PLColPriceTypes (PTYPEID, COLID, CURRID)" LINEID="0"/><ROW ID="498" TEXTSTR="values (:PTYPEID, :COLID, :CURRID)" LINEID="1"/><ROW ID="499" TEXTSTR="delete from plcols where plid=:plid" LINEID="0"/><ROW ID="500" TEXTSTR="select * from plcols where plid=:plid" LINEID="0"/><ROW ID="501" TEXTSTR="insert into plcols (COLID, PLID, NAME, COLTYPE, NUM, FNAME, VISIBLE, ALIGN, WIDTH)" LINEID="0"/><ROW ID="501" TEXTSTR="values (:COLID, :PLID, :NAME, :COLTYPE, :NUM, :FNAME, :VISIBLE, :ALIGN, :WIDTH)" LINEID="1"/><ROW ID="501" TEXTSTR="" LINEID="2"/><ROW ID="501" TEXTSTR="" LINEID="3"/><ROW ID="502" TEXTSTR="delete from PriceListDet where plid=:plid" LINEID="0"/><ROW ID="503" TEXTSTR="select pldet.PLDetId, CAST(0 as integer) IsGroup, pldet.matid as id, -1*pldet.grpid as pid, mats.name," LINEID="0"/><ROW ID="503" TEXTSTR="mats.artikul as art, msr.shortname as msrname" LINEID="1"/><ROW ID="503" TEXTSTR="from PriceListDet pldet, materials mats, measures msr" LINEID="2"/><ROW ID="503" TEXTSTR="where pldet.plid=:plid" LINEID="3"/><ROW ID="503" TEXTSTR="      and pldet.matid=mats.matid" LINEID="4"/><ROW ID="503" TEXTSTR="      and msr.mid=mats.mid" LINEID="5"/><ROW ID="503" TEXTSTR="" LINEID="6"/><ROW ID="503" TEXTSTR="" LINEID="7"/><ROW ID="503" TEXTSTR="union all" LINEID="8"/><ROW ID="503" TEXTSTR="select pldet.PLDetId, CAST(1 as integer) as IsGroup, -1*mg.grpid as id, -1*mg.pid as pid," LINEID="9"/><ROW ID="503" TEXTSTR="       CAST(mg.name as varchar(128)) as name, CAST(&apos;&apos; as varchar(128)) as art," LINEID="10"/><ROW ID="503" TEXTSTR="       CAST(&apos;&apos; as varchar(6)) as msrname" LINEID="11"/><ROW ID="503" TEXTSTR="from matgroup mg, PriceListDet pldet" LINEID="12"/><ROW ID="503" TEXTSTR="where pldet.plid=:plid" LINEID="13"/><ROW ID="503" TEXTSTR="      and mg.deleted=0" LINEID="14"/><ROW ID="503" TEXTSTR="      and pldet.grpid=mg.grpid" LINEID="15"/><ROW ID="503" TEXTSTR="      and pldet.matid is Null" LINEID="16"/><ROW ID="504" TEXTSTR="insert into PriceListDet (PLDETID, PLID, MATID, GRPID)" LINEID="0"/><ROW ID="504" TEXTSTR="values (:PLDETID, :PLID, :MATID, :GRPID)" LINEID="1"/><ROW ID="505" TEXTSTR="select mats.*, msr.shortname as msrname" LINEID="0"/><ROW ID="505" TEXTSTR="from Materials mats, measures msr" LINEID="1"/><ROW ID="505" TEXTSTR="where mats.matid=:matid and mats.mid=msr.mid" LINEID="2"/><ROW ID="506" TEXTSTR="select ptypeid from pricetypes where def=1" LINEID="0"/><ROW ID="508" TEXTSTR="update pricetypes set num=:num where ptypeid=:ptypeid" LINEID="0"/><ROW ID="509" TEXTSTR="update pricetypes set num=num+1" LINEID="0"/><ROW ID="509" TEXTSTR=" where num&gt;=:num" LINEID="1"/><ROW ID="510" TEXTSTR="update pricetypes set num=num-1" LINEID="0"/><ROW ID="510" TEXTSTR=" where num&lt;=:num" LINEID="1"/><ROW ID="408" TEXTSTR="select mgp.*, c.shortname, 0 as dis" LINEID="0"/><ROW ID="408" TEXTSTR=" from matgroupprices mgp" LINEID="1"/><ROW ID="408" TEXTSTR=" left outer join currency c on mgp.currid=c.currid" LINEID="2"/><ROW ID="408" TEXTSTR=" where mgp.grpid=:grpid" LINEID="3"/><ROW ID="513" TEXTSTR="select wblist.*, wbmove.sourcewid, whouseout.name whout, wbmove.destwid, whousein.name whin," LINEID="0"/><ROW ID="513" TEXTSTR="kaemp.name personin, kaout.name personout" LINEID="1"/><ROW ID="513" TEXTSTR="from waybillmove wbmove, warehouse whouseout, warehouse whousein, waybilllist wblist" LINEID="2"/><ROW ID="513" TEXTSTR="left outer join kagent kaemp on wblist.personid=kaemp.kaid" LINEID="3"/><ROW ID="513" TEXTSTR="left outer join kagent kaout on wblist.kaid=kaout.kaid" LINEID="4"/><ROW ID="513" TEXTSTR="where wblist.wbillid=:wbillid" LINEID="5"/><ROW ID="513" TEXTSTR="      and wbmove.wbillid=wblist.wbillid" LINEID="6"/><ROW ID="513" TEXTSTR="      and whouseout.wid=wbmove.sourcewid" LINEID="7"/><ROW ID="513" TEXTSTR="      and whousein.wid=wbmove.destwid" LINEID="8"/><ROW ID="514" TEXTSTR="select distinct job from kagent" LINEID="0"/><ROW ID="514" TEXTSTR="  where not job is null" LINEID="1"/><ROW ID="512" TEXTSTR="select * from pricetypes" LINEID="0"/><ROW ID="512" TEXTSTR=" where deleted=0" LINEID="1"/><ROW ID="512" TEXTSTR="  and ptypeid not in" LINEID="2"/><ROW ID="512" TEXTSTR="   (select ptypeid from matprices" LINEID="3"/><ROW ID="512" TEXTSTR="     where matid=:matid and dis=1)" LINEID="4"/><ROW ID="512" TEXTSTR=" order by num" LINEID="5"/><ROW ID="519" TEXTSTR="delete from operlog where opid=:opid" LINEID="0"/><ROW ID="520" TEXTSTR="select mats.*, msr.shortname as msrname" LINEID="0"/><ROW ID="520" TEXTSTR="from Materials mats, measures msr" LINEID="1"/><ROW ID="520" TEXTSTR="where mats.matid=:matid and mats.mid=msr.mid" LINEID="2"/><ROW ID="521" TEXTSTR="select mgrp.grpid, mgrp.name, mgrp.pid" LINEID="0"/><ROW ID="521" TEXTSTR="from matgroup mgrp" LINEID="1"/><ROW ID="521" TEXTSTR="where mgrp.grpid=:grpid" LINEID="2"/><ROW ID="488" TEXTSTR="insert into pricelist" LINEID="0"/><ROW ID="488" TEXTSTR="(PLID, ONDATE, NAME, NOTES, DELETED, TableName, CurrId, UseLogo)" LINEID="1"/><ROW ID="488" TEXTSTR="values" LINEID="2"/><ROW ID="488" TEXTSTR="(:PLID, :ONDATE, :NAME, :NOTES, :DELETED, :TableName, :CurrId, :UseLogo)" LINEID="3"/><ROW ID="490" TEXTSTR="update pricelist" LINEID="0"/><ROW ID="490" TEXTSTR="set ONDATE=:ONDATE, NAME=:NAME, NOTES=:NOTES, DELETED=:DELETED, TableName=:TableName," LINEID="1"/><ROW ID="490" TEXTSTR="CurrId=:CurrId, UseLogo=:UseLogo" LINEID="2"/><ROW ID="490" TEXTSTR="where PLID=:PLID" LINEID="3"/><ROW ID="296" TEXTSTR="select sum(wm.amount*wm.turntype) as remain, w.wid, w.name" LINEID="0"/><ROW ID="296" TEXTSTR=" from wmatturn wm, warehouse w, waybilldet wbd" LINEID="1"/><ROW ID="296" TEXTSTR=" where wbd.matid=:matid" LINEID="2"/><ROW ID="296" TEXTSTR="  and w.wid=wbd.wid" LINEID="3"/><ROW ID="296" TEXTSTR="  and wm.posid=wbd.posid" LINEID="4"/><ROW ID="296" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="5"/><ROW ID="296" TEXTSTR="  and wm.turntype&lt;&gt;2" LINEID="6"/><ROW ID="296" TEXTSTR="  %m" LINEID="7"/><ROW ID="296" TEXTSTR=" group by w.wid, w.name" LINEID="8"/><ROW ID="296" TEXTSTR=" having sum(wm.amount*wm.turntype)&gt;0" LINEID="9"/><ROW ID="522" TEXTSTR="select * from sp_getalltriggersstate" LINEID="0"/><ROW ID="523" TEXTSTR="execute procedure sp_setalltriggersstate(:ainactive)" LINEID="0"/><ROW ID="524" TEXTSTR="execute procedure sp_settriggers(:atable, :ainactive)" LINEID="0"/><ROW ID="525" TEXTSTR="select * from sp_oper_history_get(:tabid, :id)" LINEID="0"/><ROW ID="526" TEXTSTR="select twb.*,  ka.name kaname, ka.fullname kafullname, ka.inn kainn," LINEID="0"/><ROW ID="526" TEXTSTR="       ka.certnum kacertnum, ka.ktype katype, ka.phone kaphone, ka.ndspayer kandspayer," LINEID="1"/><ROW ID="526" TEXTSTR="       ka.ADDRESS kaaddress, ka.city kacity, ka.district kadistrict, ka.country kacountry," LINEID="2"/><ROW ID="526" TEXTSTR="        ka.postindex kapostindex, kaemp.name personname, 1 as imgindex" LINEID="3"/><ROW ID="526" TEXTSTR="from kagent ka, TaxWB twb" LINEID="4"/><ROW ID="526" TEXTSTR="  left join kagent kaemp on twb.personid=kaemp.kaid" LINEID="5"/><ROW ID="526" TEXTSTR="where twb.kaid=ka.kaid" LINEID="6"/><ROW ID="526" TEXTSTR=" and twb.twbid=:twbid" LINEID="7"/><ROW ID="526" TEXTSTR="" LINEID="8"/><ROW ID="526" TEXTSTR="" LINEID="9"/><ROW ID="528" TEXTSTR="select * from profcommon where profid=:profid" LINEID="0"/><ROW ID="529" TEXTSTR="delete from profcommon where profid=:profid" LINEID="0"/><ROW ID="531" TEXTSTR="select count(wmt.posid)" LINEID="0"/><ROW ID="531" TEXTSTR="  from wmatturn wmt, waybilldet wbd" LINEID="1"/><ROW ID="531" TEXTSTR="  where wmt.posid=wbd.posid" LINEID="2"/><ROW ID="531" TEXTSTR="    and wmt.turntype=2" LINEID="3"/><ROW ID="531" TEXTSTR="    and wbd.matid=:matid" LINEID="4"/><ROW ID="13" TEXTSTR="select utv.*, vl.name" LINEID="0"/><ROW ID="13" TEXTSTR=" from usertreeview utv, viewlng vl, languages l" LINEID="1"/><ROW ID="13" TEXTSTR=" where utv.treeid=:treeid" LINEID="2"/><ROW ID="13" TEXTSTR="  and utv.id=vl.id" LINEID="3"/><ROW ID="13" TEXTSTR="  and vl.langid=l.langid" LINEID="4"/><ROW ID="13" TEXTSTR="  and l.shortname=:shortname" LINEID="5"/><ROW ID="13" TEXTSTR=" order by utv.num" LINEID="6"/><ROW ID="517" TEXTSTR="select distinct f.funid, vl.name, f.classname" LINEID="0"/><ROW ID="517" TEXTSTR=" from functions f, usertreeview utv, viewlng vl, languages l" LINEID="1"/><ROW ID="517" TEXTSTR=" where f.logging=1" LINEID="2"/><ROW ID="517" TEXTSTR="  and f.funid=utv.funid" LINEID="3"/><ROW ID="517" TEXTSTR="  and utv.id=vl.id" LINEID="4"/><ROW ID="517" TEXTSTR="  and vl.langid=l.langid" LINEID="5"/><ROW ID="517" TEXTSTR="  and l.shortname=:shortname" LINEID="6"/><ROW ID="517" TEXTSTR=" order by vl.name" LINEID="7"/><ROW ID="516" TEXTSTR="select ol.*, vl.name as fname, f.classname" LINEID="0"/><ROW ID="516" TEXTSTR="  from operlog ol, functions f, viewlng vl, usertreeview utv," LINEID="1"/><ROW ID="516" TEXTSTR="    languages l" LINEID="2"/><ROW ID="516" TEXTSTR="  where ol.funid=f.funid" LINEID="3"/><ROW ID="516" TEXTSTR="   and f.funid=utv.funid" LINEID="4"/><ROW ID="516" TEXTSTR="   and utv.id=vl.id" LINEID="5"/><ROW ID="516" TEXTSTR="   and vl.langid=l.langid" LINEID="6"/><ROW ID="516" TEXTSTR="   and l.shortname=:shortname" LINEID="7"/><ROW ID="516" TEXTSTR="   and ol.ondate between :fromdate and :todate" LINEID="8"/><ROW ID="516" TEXTSTR="  %m" LINEID="9"/><ROW ID="516" TEXTSTR="  order by ol.ondate" LINEID="10"/><ROW ID="518" TEXTSTR="select ol.*, vl.name, f.classname" LINEID="0"/><ROW ID="518" TEXTSTR=" from operlog ol, functions f, viewlng vl, usertreeview utv," LINEID="1"/><ROW ID="518" TEXTSTR="   languages l" LINEID="2"/><ROW ID="518" TEXTSTR=" where ol.opid=:opid" LINEID="3"/><ROW ID="518" TEXTSTR="  and ol.funid=f.funid" LINEID="4"/><ROW ID="518" TEXTSTR="  and f.funid=utv.funid" LINEID="5"/><ROW ID="518" TEXTSTR="  and utv.id=vl.id" LINEID="6"/><ROW ID="518" TEXTSTR="  and vl.langid=l.langid" LINEID="7"/><ROW ID="518" TEXTSTR="  and l.shortname=:shortname" LINEID="8"/><ROW ID="518" TEXTSTR="" LINEID="9"/><ROW ID="532" TEXTSTR="select vl.*" LINEID="0"/><ROW ID="532" TEXTSTR=" from viewlng vl, languages l" LINEID="1"/><ROW ID="532" TEXTSTR=" where vl.langid=l.langid" LINEID="2"/><ROW ID="532" TEXTSTR="  and l.shortname=:shortname" LINEID="3"/><ROW ID="533" TEXTSTR="select matid from materials where name=:name" LINEID="0"/><ROW ID="489" TEXTSTR="select pl.*, cr.shortname as crname" LINEID="0"/><ROW ID="489" TEXTSTR="from PriceList pl, Currency cr" LINEID="1"/><ROW ID="489" TEXTSTR="where pl.deleted=0 and cr.currid=pl.currid" LINEID="2"/><ROW ID="489" TEXTSTR="and (pl.ondate between :fromdate and :todate)" LINEID="3"/><ROW ID="214" TEXTSTR="update viewlng set name=:name" LINEID="0"/><ROW ID="214" TEXTSTR="  where id=:id" LINEID="1"/><ROW ID="214" TEXTSTR="   and langid=" LINEID="2"/><ROW ID="214" TEXTSTR="    (select langid from languages" LINEID="3"/><ROW ID="214" TEXTSTR="      where shortname=:shortname)" LINEID="4"/><ROW ID="214" TEXTSTR="" LINEID="5"/><ROW ID="536" TEXTSTR="execute procedure sp_kadel(:kaid)" LINEID="0"/><ROW ID="537" TEXTSTR="execute procedure sp_matdel(:matid)" LINEID="0"/><ROW ID="538" TEXTSTR="select count(wbillid) from waybilllist" LINEID="0"/><ROW ID="538" TEXTSTR="  where kaid=:kaid" LINEID="1"/><ROW ID="539" TEXTSTR="select count(paydocid) from paydoc" LINEID="0"/><ROW ID="539" TEXTSTR="  where kaid=:kaid" LINEID="1"/><ROW ID="540" TEXTSTR="update kagent" LINEID="0"/><ROW ID="540" TEXTSTR=" set startsaldo=:startsaldo, startsaldodate=:startsaldodate" LINEID="1"/><ROW ID="540" TEXTSTR=" where kaid=:kaid" LINEID="2"/><ROW ID="540" TEXTSTR="" LINEID="3"/><ROW ID="541" TEXTSTR="delete from kagentsaldo" LINEID="0"/><ROW ID="541" TEXTSTR="  where kaid=:kaid and ondate=:ondate" LINEID="1"/><ROW ID="545" TEXTSTR="select gen_id(gen_wbrest, 0) from commonparams" LINEID="0"/><ROW ID="546" TEXTSTR="select gen_id(gen_wbrest, 1) from commonparams" LINEID="0"/><ROW ID="549" TEXTSTR="update waybilllist set summall=:summall" LINEID="0"/><ROW ID="549" TEXTSTR=" where wbillid=:wbillid" LINEID="1"/><ROW ID="550" TEXTSTR="delete from operlog" LINEID="0"/><ROW ID="547" TEXTSTR="insert into wmatturn" LINEID="0"/><ROW ID="547" TEXTSTR=" (posid, wid, matid, sourceid, turntype, ondate, amount)" LINEID="1"/><ROW ID="547" TEXTSTR=" select wbd.posid, wbd.wid, wbd.matid, wbd.posid, 1," LINEID="2"/><ROW ID="547" TEXTSTR="   wbl.ondate, wbd.amount" LINEID="3"/><ROW ID="547" TEXTSTR="  from waybilllist wbl, waybilldet wbd" LINEID="4"/><ROW ID="547" TEXTSTR="  where wbl.wbillid=:wbillid" LINEID="5"/><ROW ID="547" TEXTSTR="    and wbl.wbillid=wbd.wbillid" LINEID="6"/><ROW ID="547" TEXTSTR="" LINEID="7"/><ROW ID="289" TEXTSTR="insert into wmatturn" LINEID="0"/><ROW ID="289" TEXTSTR=" (posid, wid, matid, sourceid, turntype, ondate, amount)" LINEID="1"/><ROW ID="289" TEXTSTR=" select wbd.posid, wbd.wid, wbd.matid, wbd.posid, wbl.wtype," LINEID="2"/><ROW ID="289" TEXTSTR="   wbl.ondate, wbd.amount" LINEID="3"/><ROW ID="289" TEXTSTR="  from waybilllist wbl, waybilldet wbd" LINEID="4"/><ROW ID="289" TEXTSTR="  where wbl.wbillid=:wbillid" LINEID="5"/><ROW ID="289" TEXTSTR="    and wbl.wbillid=wbd.wbillid" LINEID="6"/><ROW ID="289" TEXTSTR="" LINEID="7"/><ROW ID="554" TEXTSTR="select * from sp_mat_remain_get(:matid, :wid, :ondate)" LINEID="0"/><ROW ID="471" TEXTSTR="select * from sp_mat_remain_get_simple(:matid, :ondate);" LINEID="0"/><ROW ID="352" TEXTSTR="insert into WMatTurn(PosID, SOURCEID, TurnType, OnDate, Amount, matid, wid)" LINEID="0"/><ROW ID="352" TEXTSTR="values (:PosID, :SOURCEID, :TurnType, :OnDate, :Amount, :matid, :wid)" LINEID="1"/><ROW ID="290" TEXTSTR="execute procedure sp_wmat_del_by_wb(:wbillid)" LINEID="0"/><ROW ID="355" TEXTSTR="execute procedure sp_wmat_upd_by_wb(:wbillid, :turntype)" LINEID="0"/><ROW ID="557" TEXTSTR="select * from sp_mat_remain_get_wbm(:matid, :wid, :ondate)" LINEID="0"/><ROW ID="558" TEXTSTR="insert into kagent" LINEID="0"/><ROW ID="558" TEXTSTR=" (kaid, Name, FullName, INN, OKPO, CertNum, Address, Phone, EMail, WWW, Fax," LINEID="1"/><ROW ID="558" TEXTSTR="  City, District, Country, PostIndex, deleted, Notes, kpp, ndspayer, birthdate," LINEID="2"/><ROW ID="558" TEXTSTR="  ktype, kakind, job, startsaldo, startsaldodate)" LINEID="3"/><ROW ID="558" TEXTSTR="values" LINEID="4"/><ROW ID="558" TEXTSTR=" (:kaid, :Name, :FullName, :INN, :OKPO, :CertNum, :Address, :Phone, :EMail," LINEID="5"/><ROW ID="558" TEXTSTR="  :WWW, :Fax, :City, :District, :Country, :PostIndex, :deleted, :Notes," LINEID="6"/><ROW ID="558" TEXTSTR="  :kpp, :ndspayer, :birthdate, :ktype, :kakind, :job, :startsaldo, :startsaldodate)" LINEID="7"/><ROW ID="559" TEXTSTR="update KAgent" LINEID="0"/><ROW ID="559" TEXTSTR="set Name=:Name, FullName=:FullName, INN=:INN, OKPO=:OKPO, CertNum=:CertNum," LINEID="1"/><ROW ID="559" TEXTSTR="    Address=:Address, Phone=:Phone, EMail=:EMail, WWW=:WWW, Fax=:Fax," LINEID="2"/><ROW ID="559" TEXTSTR="    City=:City, District=:District, Country=:Country, PostIndex=:PostIndex," LINEID="3"/><ROW ID="559" TEXTSTR="    deleted=:deleted, Notes=:Notes, kpp=:kpp, ndspayer=:ndspayer," LINEID="4"/><ROW ID="559" TEXTSTR="    birthdate=:birthdate, ktype=:ktype, kakind=:kakind, job=:job," LINEID="5"/><ROW ID="559" TEXTSTR="    startsaldo=:startsaldo, startsaldodate=:startsaldodate" LINEID="6"/><ROW ID="559" TEXTSTR="where kaid=:kaid" LINEID="7"/><ROW ID="560" TEXTSTR="insert into kagentsaldo (kaid, ondate, saldo)" LINEID="0"/><ROW ID="560" TEXTSTR=" values (:kaid, :ondate, :saldo)" LINEID="1"/><ROW ID="486" TEXTSTR="select * from SP_PLREF" LINEID="0"/><ROW ID="561" TEXTSTR="execute procedure sp_recalc_remains_mat(:matid, :ondate)" LINEID="0"/><ROW ID="442" TEXTSTR="select twb.*,  ka.name kaname, ka.fullname kafullname, ka.inn kainn, ka.fax, ka.email, ka.www," LINEID="0"/><ROW ID="442" TEXTSTR="       ka.certnum kacertnum, ka.ktype katype, ka.phone kaphone, ka.ndspayer kandspayer," LINEID="1"/><ROW ID="442" TEXTSTR="       ka.ADDRESS kaaddress, ka.city kacity, ka.district kadistrict, ka.country kacountry," LINEID="2"/><ROW ID="442" TEXTSTR="        ka.postindex kapostindex, kaemp.name personname, 1 as imgindex" LINEID="3"/><ROW ID="442" TEXTSTR="from kagent ka, TaxWB twb" LINEID="4"/><ROW ID="442" TEXTSTR="left join kagent kaemp on twb.personid=kaemp.kaid" LINEID="5"/><ROW ID="442" TEXTSTR="where twb.deleted=0" LINEID="6"/><ROW ID="442" TEXTSTR="      and twb.kaid=ka.kaid" LINEID="7"/><ROW ID="442" TEXTSTR="%m" LINEID="8"/><ROW ID="442" TEXTSTR="      and (twb.ondate between :fromdate and :todate)" LINEID="9"/><ROW ID="562" TEXTSTR="select id, pid, funid, gtype" LINEID="0"/><ROW ID="562" TEXTSTR="  from usertreeview" LINEID="1"/><ROW ID="67" TEXTSTR="select utv.id, utv.pid, utv.imageindex, utv.num," LINEID="0"/><ROW ID="67" TEXTSTR="  utv.funid, vl.name, utv.gtype" LINEID="1"/><ROW ID="67" TEXTSTR=" from usertreeview utv, profiles p, viewlng vl, languages l" LINEID="2"/><ROW ID="67" TEXTSTR=" where utv.treeid=p.treeid" LINEID="3"/><ROW ID="67" TEXTSTR="  and p.profid=:profid" LINEID="4"/><ROW ID="67" TEXTSTR="  and vl.id=utv.id" LINEID="5"/><ROW ID="67" TEXTSTR="  and vl.langid=l.langid" LINEID="6"/><ROW ID="67" TEXTSTR="  and l.shortname=:lang" LINEID="7"/><ROW ID="67" TEXTSTR=" order by utv.pid, utv.num" LINEID="8"/><ROW ID="563" TEXTSTR="delete from profdocparams where profid=:profid" LINEID="0"/><ROW ID="565" TEXTSTR="select * from profdocparams where profid=:profid" LINEID="0"/><ROW ID="564" TEXTSTR="insert into profdocparams" LINEID="0"/><ROW ID="564" TEXTSTR="  (profid, doctype, allowzero, defamount, autonum, suffix, prefix, checked)" LINEID="1"/><ROW ID="564" TEXTSTR=" values" LINEID="2"/><ROW ID="564" TEXTSTR="  (:profid, :doctype, :allowzero, :defamount, :autonum, :suffix, :prefix, :checked)" LINEID="3"/><ROW ID="566" TEXTSTR="select ea.*" LINEID="0"/><ROW ID="566" TEXTSTR=" from entaccounts ea" LINEID="1"/><ROW ID="566" TEXTSTR="" LINEID="2"/><ROW ID="236" TEXTSTR="insert into entparams" LINEID="0"/><ROW ID="236" TEXTSTR=" (name, addr, phone, inn, okpo, certnum, ndspayer, kpp, fullname)" LINEID="1"/><ROW ID="236" TEXTSTR="values" LINEID="2"/><ROW ID="236" TEXTSTR=" (:name, :addr, :phone, :inn, :okpo, :certnum, :ndspayer, :kpp, :fullname)" LINEID="3"/><ROW ID="567" TEXTSTR="delete from entaccounts" LINEID="0"/><ROW ID="568" TEXTSTR="insert into entaccounts" LINEID="0"/><ROW ID="568" TEXTSTR=" (accid, bankid, typeid, num)" LINEID="1"/><ROW ID="568" TEXTSTR="values" LINEID="2"/><ROW ID="568" TEXTSTR=" (:accid, :bankid, :typeid, :num)" LINEID="3"/><ROW ID="568" TEXTSTR="" LINEID="4"/><ROW ID="568" TEXTSTR="" LINEID="5"/><ROW ID="315" TEXTSTR="insert into payorder (paydocid, num, ondate, acc, accid, paydest, entaccid)" LINEID="0"/><ROW ID="315" TEXTSTR=" values (:paydocid, :num, :ondate, :acc, :accid, :paydest, :entaccid)" LINEID="1"/><ROW ID="571" TEXTSTR="update entaccounts set bankid=:bankid, num=:num," LINEID="0"/><ROW ID="571" TEXTSTR="  typeid=:typeid where accid=:accid" LINEID="1"/><ROW ID="396" TEXTSTR="select distinct extractdate(ondate)" LINEID="0"/><ROW ID="396" TEXTSTR=" from waybilllist" LINEID="1"/><ROW ID="396" TEXTSTR=" where kaid=:kaid" LINEID="2"/><ROW ID="396" TEXTSTR="  and ondate&gt;=:ondate" LINEID="3"/><ROW ID="396" TEXTSTR="  and deleted=0" LINEID="4"/><ROW ID="396" TEXTSTR="  and checked=1" LINEID="5"/><ROW ID="396" TEXTSTR="" LINEID="6"/><ROW ID="396" TEXTSTR="union" LINEID="7"/><ROW ID="396" TEXTSTR="" LINEID="8"/><ROW ID="396" TEXTSTR="select distinct extractdate(ondate)" LINEID="9"/><ROW ID="396" TEXTSTR=" from paydoc" LINEID="10"/><ROW ID="396" TEXTSTR=" where kaid=:kaid1" LINEID="11"/><ROW ID="396" TEXTSTR="  and ondate&gt;=:ondate1" LINEID="12"/><ROW ID="396" TEXTSTR="  and deleted=0" LINEID="13"/><ROW ID="396" TEXTSTR="  and checked=1" LINEID="14"/><ROW ID="396" TEXTSTR="" LINEID="15"/><ROW ID="396" TEXTSTR="union" LINEID="16"/><ROW ID="396" TEXTSTR="" LINEID="17"/><ROW ID="396" TEXTSTR="select distinct extractdate(ondate)" LINEID="18"/><ROW ID="396" TEXTSTR=" from kagentsaldo" LINEID="19"/><ROW ID="396" TEXTSTR=" where kaid=:kaid2" LINEID="20"/><ROW ID="396" TEXTSTR="  and ondate&gt;=:ondate2" LINEID="21"/><ROW ID="396" TEXTSTR="" LINEID="22"/><ROW ID="396" TEXTSTR="union" LINEID="23"/><ROW ID="396" TEXTSTR="" LINEID="24"/><ROW ID="396" TEXTSTR="select startsaldodate" LINEID="25"/><ROW ID="396" TEXTSTR=" from kagent" LINEID="26"/><ROW ID="396" TEXTSTR=" where kaid=:kaid3" LINEID="27"/><ROW ID="396" TEXTSTR="  and not startsaldodate is null" LINEID="28"/><ROW ID="396" TEXTSTR="order by 1" LINEID="29"/><ROW ID="573" TEXTSTR="select * from chargetype where deleted=0" LINEID="0"/><ROW ID="574" TEXTSTR="select * from chargetype where ctypeid=:ctypeid" LINEID="0"/><ROW ID="575" TEXTSTR="insert into chargetype (ctypeid, name, deleted)" LINEID="0"/><ROW ID="575" TEXTSTR="  values (:ctypeid, :name, :deleted)" LINEID="1"/><ROW ID="575" TEXTSTR="" LINEID="2"/><ROW ID="576" TEXTSTR="update chargetype set name=:name, deleted=:deleted" LINEID="0"/><ROW ID="576" TEXTSTR="  where ctypeid=:ctypeid" LINEID="1"/><ROW ID="577" TEXTSTR="select rdb$index_name from rdb$indices" LINEID="0"/><ROW ID="578" TEXTSTR="select ks.saldo from kagentsaldo ks where ks.kaid=:kaid" LINEID="0"/><ROW ID="578" TEXTSTR=" and ks.ondate=" LINEID="1"/><ROW ID="578" TEXTSTR="  (select max(ondate) from kagentsaldo where kaid=ks.kaid and ondate&lt;=:ondate)" LINEID="2"/><ROW ID="303" TEXTSTR="select pd.*, ka.name" LINEID="0"/><ROW ID="303" TEXTSTR=" from paydoc pd" LINEID="1"/><ROW ID="303" TEXTSTR=" left outer join kagent ka on ka.kaid=pd.kaid" LINEID="2"/><ROW ID="303" TEXTSTR=" where pd.paydocid=:paydocid" LINEID="3"/><ROW ID="303" TEXTSTR="" LINEID="4"/><ROW ID="207" TEXTSTR="select * from matgroup where pid=:pid and grpid&lt;&gt;pid and deleted=0" LINEID="0"/><ROW ID="207" TEXTSTR="  order by name" LINEID="1"/><ROW ID="208" TEXTSTR="select * from matgroup where pid=grpid and deleted=0" LINEID="0"/><ROW ID="208" TEXTSTR=" order by name" LINEID="1"/><ROW ID="584" TEXTSTR="select count(wmt.posid)" LINEID="0"/><ROW ID="584" TEXTSTR="  from wmatturn wmt" LINEID="1"/><ROW ID="584" TEXTSTR="  where wmt.turntype&lt;&gt;2" LINEID="2"/><ROW ID="584" TEXTSTR="    and wmt.matid=:matid" LINEID="3"/><ROW ID="584" TEXTSTR="    %m" LINEID="4"/><ROW ID="584" TEXTSTR="" LINEID="5"/><ROW ID="585" TEXTSTR="insert into COMMISSION (WBILLID,KAID,NUM)" LINEID="0"/><ROW ID="585" TEXTSTR="values(:WBILLID,:KAID,:NUM)" LINEID="1"/><ROW ID="585" TEXTSTR="" LINEID="2"/><ROW ID="586" TEXTSTR="delete from COMMISSION where WBILLID=:WBILLID" LINEID="0"/><ROW ID="589" TEXTSTR="execute procedure sp_update_stat" LINEID="0"/><ROW ID="587" TEXTSTR="select com.*, ka.name" LINEID="0"/><ROW ID="587" TEXTSTR="from COMMISSION com, kagent ka" LINEID="1"/><ROW ID="587" TEXTSTR="where WBILLID=:WBILLID" LINEID="2"/><ROW ID="587" TEXTSTR="and ka.kaid=com.kaid" LINEID="3"/><ROW ID="591" TEXTSTR="select * from sp_matchange_get(:matid)" LINEID="0"/><ROW ID="592" TEXTSTR="delete from matchange" LINEID="0"/><ROW ID="592" TEXTSTR="  where matid=:matid or changeid=:changeid" LINEID="1"/><ROW ID="593" TEXTSTR="insert into matchange (matid, changeid, notes)" LINEID="0"/><ROW ID="593" TEXTSTR=" values (:matid, :changeid, :notes)" LINEID="1"/><ROW ID="583" TEXTSTR="select wblist.*, wh.wid, wh.name as whname" LINEID="0"/><ROW ID="583" TEXTSTR="       from waybilllist wblist, waybillmove wbm, warehouse wh" LINEID="1"/><ROW ID="583" TEXTSTR=" where wblist.deleted=0" LINEID="2"/><ROW ID="583" TEXTSTR="      and wblist.WTYPE=-5" LINEID="3"/><ROW ID="583" TEXTSTR="      and wblist.ondate between :fromdate and :todate" LINEID="4"/><ROW ID="583" TEXTSTR="      and wbm.wbillid=wblist.wbillid" LINEID="5"/><ROW ID="583" TEXTSTR="      and wh.wid=wbm.sourcewid" LINEID="6"/><ROW ID="583" TEXTSTR="      %m" LINEID="7"/><ROW ID="583" TEXTSTR="order by wblist.ondate desc" LINEID="8"/><ROW ID="594" TEXTSTR="select * from sp_matchange_get_wp(:matid, :ondate)" LINEID="0"/><ROW ID="596" TEXTSTR="select * from sp_wmat_get_mc(:matid, :ondate)" LINEID="0"/><ROW ID="58" TEXTSTR="select * from users" LINEID="0"/><ROW ID="60" TEXTSTR="insert into users" LINEID="0"/><ROW ID="60" TEXTSTR=" (userid, name, pass, fullname, sysname)" LINEID="1"/><ROW ID="60" TEXTSTR="values" LINEID="2"/><ROW ID="60" TEXTSTR=" (:userid, :name, :pass, :fullname, :sysname)" LINEID="3"/><ROW ID="60" TEXTSTR="" LINEID="4"/><ROW ID="61" TEXTSTR="update users set name=:name, fullname=:fullname, pass=:pass" LINEID="0"/><ROW ID="61" TEXTSTR=" where userid=:userid" LINEID="1"/><ROW ID="602" TEXTSTR="select * from sp_mat_remain_get_ex(:matid, :wid, :ondate)" LINEID="0"/><ROW ID="603" TEXTSTR="insert into docrel (wbillid, pid) values (:wbillid, :pid)" LINEID="0"/><ROW ID="601" TEXTSTR="select wbl.*, wh.wid, wh.name as whname" LINEID="0"/><ROW ID="601" TEXTSTR="  from waybilllist wbl" LINEID="1"/><ROW ID="601" TEXTSTR="   join waybillmove wbm on wbm.wbillid=wbl.wbillid" LINEID="2"/><ROW ID="601" TEXTSTR="   join warehouse wh on wh.wid=wbm.sourcewid" LINEID="3"/><ROW ID="601" TEXTSTR=" where wbl.deleted=0" LINEID="4"/><ROW ID="601" TEXTSTR="  and wbl.WTYPE=7" LINEID="5"/><ROW ID="601" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="6"/><ROW ID="601" TEXTSTR="  %m" LINEID="7"/><ROW ID="601" TEXTSTR="order by wbl.ondate desc" LINEID="8"/><ROW ID="601" TEXTSTR="" LINEID="9"/><ROW ID="609" TEXTSTR="select wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate," LINEID="0"/><ROW ID="609" TEXTSTR="  wbl.summall" LINEID="1"/><ROW ID="609" TEXTSTR="  from waybilllist wbl" LINEID="2"/><ROW ID="609" TEXTSTR="   join waybillpay wbp on wbl.wbillid=wbp.wbillid" LINEID="3"/><ROW ID="609" TEXTSTR=" where wbp.paydocid=:paydocid" LINEID="4"/><ROW ID="609" TEXTSTR="   and wbl.deleted=0" LINEID="5"/><ROW ID="414" TEXTSTR="select * from waybilllist where todate=:todate" LINEID="0"/><ROW ID="611" TEXTSTR="insert into taxrel (twbid, wbillid)" LINEID="0"/><ROW ID="611" TEXTSTR=" values (:twbid, :wbillid)" LINEID="1"/><ROW ID="612" TEXTSTR="select wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate, wbl.summall" LINEID="0"/><ROW ID="612" TEXTSTR="  from waybilllist wbl, taxrel tr" LINEID="1"/><ROW ID="612" TEXTSTR=" where wbl.deleted=0" LINEID="2"/><ROW ID="612" TEXTSTR="   and tr.wbillid=wbl.wbillid" LINEID="3"/><ROW ID="612" TEXTSTR="   and tr.twbid=:wbillid" LINEID="4"/><ROW ID="612" TEXTSTR="" LINEID="5"/><ROW ID="612" TEXTSTR="" LINEID="6"/><ROW ID="614" TEXTSTR=" select wbl.*, ka.*, p.name as personname" LINEID="0"/><ROW ID="614" TEXTSTR=" from waybilllist wbl" LINEID="1"/><ROW ID="614" TEXTSTR=" left outer join kagent p on wbl.personid=p.kaid" LINEID="2"/><ROW ID="614" TEXTSTR=" left outer join kagent ka on ka.kaid=wbl.kaid" LINEID="3"/><ROW ID="614" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="4"/><ROW ID="530" TEXTSTR="insert into profcommon" LINEID="0"/><ROW ID="530" TEXTSTR="  (profid, checkcurrency, wboutautowh, accoutautowh, rptype)" LINEID="1"/><ROW ID="530" TEXTSTR=" values" LINEID="2"/><ROW ID="530" TEXTSTR="  (:profid, :checkcurrency, :wboutautowh, :accoutautowh, :rptype)" LINEID="3"/><ROW ID="530" TEXTSTR="" LINEID="4"/><ROW ID="619" TEXTSTR="update waybillpay set wbillid=:wbillid" LINEID="0"/><ROW ID="619" TEXTSTR="  where paydocid=:paydocid" LINEID="1"/><ROW ID="79" TEXTSTR="insert into recyclebin (id, tabid, delid, ontime, textstr, userid, funid)" LINEID="0"/><ROW ID="79" TEXTSTR=" values (:id, :tabid, :delid, :ontime, :textstr, :userid, :funid)" LINEID="1"/><ROW ID="86" TEXTSTR="select rb.textstr, rb.delid, vl.name, rb.ontime, f.funid, utv.gtype," LINEID="0"/><ROW ID="86" TEXTSTR="  utv.imageindex, f.tabid, rb.id, f.classname, u.name as username" LINEID="1"/><ROW ID="86" TEXTSTR=" from recyclebin rb, usertreeview utv, users u, functions f, viewlng vl, languages l" LINEID="2"/><ROW ID="86" TEXTSTR=" where rb.funid=f.funid" LINEID="3"/><ROW ID="86" TEXTSTR="  and f.funid=utv.funid" LINEID="4"/><ROW ID="86" TEXTSTR="  and utv.treeid=0" LINEID="5"/><ROW ID="86" TEXTSTR="  and utv.id=vl.id" LINEID="6"/><ROW ID="86" TEXTSTR="  and u.userid=rb.userid" LINEID="7"/><ROW ID="86" TEXTSTR="  and vl.langid=l.langid" LINEID="8"/><ROW ID="86" TEXTSTR="  and l.shortname=:shortname" LINEID="9"/><ROW ID="86" TEXTSTR="  %m" LINEID="10"/><ROW ID="86" TEXTSTR="" LINEID="11"/><ROW ID="244" TEXTSTR="insert into commonparams (nds, chargetype, potype, printtype, deltobin)" LINEID="0"/><ROW ID="244" TEXTSTR="values (:nds, :chargetype, :potype, :printtype, :deltobin)" LINEID="1"/><ROW ID="621" TEXTSTR="update commonparams set nds=:nds," LINEID="0"/><ROW ID="621" TEXTSTR="  potype=:potype," LINEID="1"/><ROW ID="621" TEXTSTR="  chargetype=:chargetype," LINEID="2"/><ROW ID="621" TEXTSTR="  printtype=:printtype," LINEID="3"/><ROW ID="621" TEXTSTR="  deltobin=:deltobin" LINEID="4"/><ROW ID="621" TEXTSTR="" LINEID="5"/><ROW ID="621" TEXTSTR="" LINEID="6"/><ROW ID="622" TEXTSTR="execute procedure sp_delete_data(:tablename, :id);" LINEID="0"/><ROW ID="625" TEXTSTR="delete from returnrel" LINEID="0"/><ROW ID="625" TEXTSTR="where returnrel.posid in (select waybilldet.posid" LINEID="1"/><ROW ID="625" TEXTSTR="                            from waybilldet" LINEID="2"/><ROW ID="625" TEXTSTR="                            where waybilldet.wbillid=:wbillid)" LINEID="3"/><ROW ID="626" TEXTSTR="insert into returnrel(posid,outposid,pposid, dposid)" LINEID="0"/><ROW ID="626" TEXTSTR="values(:posid,:outposid,:pposid,:dposid)" LINEID="1"/><ROW ID="628" TEXTSTR="update returnrel" LINEID="0"/><ROW ID="628" TEXTSTR="set dposid=:dposid" LINEID="1"/><ROW ID="628" TEXTSTR="where posid=:posid" LINEID="2"/><ROW ID="629" TEXTSTR="insert into wmatturn (posid, wid, matid, sourceid, turntype, ondate, amount)" LINEID="0"/><ROW ID="629" TEXTSTR=" select wbd.posid, wbd.wid, wbd.matid, wbd.posid, 1, wbl.ondate, wbd.amount" LINEID="1"/><ROW ID="629" TEXTSTR=" from waybilllist wbl, waybilldet wbd, returnrel rr" LINEID="2"/><ROW ID="629" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="3"/><ROW ID="629" TEXTSTR="       and wbl.wbillid=wbd.wbillid" LINEID="4"/><ROW ID="629" TEXTSTR="       and rr.dposid=wbd.posid" LINEID="5"/><ROW ID="630" TEXTSTR="update returnrel" LINEID="0"/><ROW ID="630" TEXTSTR="set dposid=null" LINEID="1"/><ROW ID="630" TEXTSTR="where posid in (select wbd.posid" LINEID="2"/><ROW ID="630" TEXTSTR="                from waybilldet wbd, returnrel rr" LINEID="3"/><ROW ID="630" TEXTSTR="                where wbd.wbillid=:wbillid" LINEID="4"/><ROW ID="630" TEXTSTR="                and rr.posid=wbd.posid)" LINEID="5"/><ROW ID="631" TEXTSTR="delete from waybilldet" LINEID="0"/><ROW ID="631" TEXTSTR="where posid in (select posid from waybilldet where" LINEID="1"/><ROW ID="631" TEXTSTR="                wbillid=:wbillid" LINEID="2"/><ROW ID="631" TEXTSTR="                and posid not in(select wbd.posid from waybilldet wbd, returnrel rr" LINEID="3"/><ROW ID="631" TEXTSTR="                                 where wbd.wbillid=:wbillid and rr.posid=wbd.posid)" LINEID="4"/><ROW ID="631" TEXTSTR="               )" LINEID="5"/><ROW ID="632" TEXTSTR="select count(rr.outposid)" LINEID="0"/><ROW ID="632" TEXTSTR="from returnrel rr, waybilldet wbd" LINEID="1"/><ROW ID="632" TEXTSTR="where wbd.wbillid=:wbillid" LINEID="2"/><ROW ID="632" TEXTSTR="      and rr.outposid=wbd.posid" LINEID="3"/><ROW ID="634" TEXTSTR="select wblist.*," LINEID="0"/><ROW ID="634" TEXTSTR="       ka.name kaname, ka.fullname kafullname, ka.phone kaphone," LINEID="1"/><ROW ID="634" TEXTSTR="       kaemp.name personname," LINEID="2"/><ROW ID="634" TEXTSTR="       ka.ADDRESS, ka.city, ka.district, ka.country, ka.postindex, ka.fax," LINEID="3"/><ROW ID="634" TEXTSTR="       ka.email, ka.www, ka.ktype katype" LINEID="4"/><ROW ID="634" TEXTSTR="from waybilllist wblist" LINEID="5"/><ROW ID="634" TEXTSTR=" join kagent ka on ka.kaid=wblist.kaid" LINEID="6"/><ROW ID="634" TEXTSTR=" left outer join kagent kaemp on wblist.personid=kaemp.kaid" LINEID="7"/><ROW ID="634" TEXTSTR=" where wblist.deleted=0" LINEID="8"/><ROW ID="634" TEXTSTR="      and wblist.WTYPE=:WTYPE" LINEID="9"/><ROW ID="634" TEXTSTR="      and wblist.ondate between :fromdate and :todate" LINEID="10"/><ROW ID="634" TEXTSTR="      %m" LINEID="11"/><ROW ID="634" TEXTSTR="order by wblist.ondate desc" LINEID="12"/><ROW ID="635" TEXTSTR="select wbl.*, ka.*, p.name as personname" LINEID="0"/><ROW ID="635" TEXTSTR=" from waybilllist wbl" LINEID="1"/><ROW ID="635" TEXTSTR=" left outer join kagent p on wbl.personid=p.kaid" LINEID="2"/><ROW ID="635" TEXTSTR=" left outer join kagent ka on ka.kaid=wbl.kaid" LINEID="3"/><ROW ID="635" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="4"/><ROW ID="640" TEXTSTR="select distinct wblist.kaid, ka.name kaname" LINEID="0"/><ROW ID="640" TEXTSTR="from waybilllist wblist, kagent ka" LINEID="1"/><ROW ID="640" TEXTSTR="where wblist.deleted=0" LINEID="2"/><ROW ID="640" TEXTSTR="      and wblist.wtype=:wtype" LINEID="3"/><ROW ID="640" TEXTSTR="      and wblist.checked=1" LINEID="4"/><ROW ID="640" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="5"/><ROW ID="640" TEXTSTR="      and  wblist.kaid=ka.kaid" LINEID="6"/><ROW ID="640" TEXTSTR="      %m" LINEID="7"/><ROW ID="640" TEXTSTR="order by ka.name" LINEID="8"/><ROW ID="649" TEXTSTR="select -1*mg.grpid as matid, -1*mg.pid as grpid, CAST(mg.name as varchar(128)) as matname" LINEID="0"/><ROW ID="649" TEXTSTR="from matgroup mg" LINEID="1"/><ROW ID="649" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="649" TEXTSTR="" LINEID="3"/><ROW ID="415" TEXTSTR="select wbd.posid, wbl.ondate" LINEID="0"/><ROW ID="415" TEXTSTR="from waybilldet wbd, waybilllist wbl" LINEID="1"/><ROW ID="415" TEXTSTR="where wbd.posid in (%m)" LINEID="2"/><ROW ID="415" TEXTSTR="      and wbl.wbillid=wbd.wbillid" LINEID="3"/><ROW ID="415" TEXTSTR="      and wbl.ondate&gt;:ondate" LINEID="4"/><ROW ID="415" TEXTSTR="" LINEID="5"/><ROW ID="91" TEXTSTR="insert into BANKS" LINEID="0"/><ROW ID="91" TEXTSTR="(BANKID, NAME, MFO, Address, WWW, def, deleted, coracc)" LINEID="1"/><ROW ID="91" TEXTSTR="values" LINEID="2"/><ROW ID="91" TEXTSTR="(:BANKID, :NAME, :MFO, :Address, :WWW, :def, 0, :coracc)" LINEID="3"/><ROW ID="91" TEXTSTR="" LINEID="4"/><ROW ID="92" TEXTSTR="update BANKS" LINEID="0"/><ROW ID="92" TEXTSTR="set name=:name, MFO=:mfo, Address=:Address, WWW=:WWW, def=:def," LINEID="1"/><ROW ID="92" TEXTSTR=" coracc=:coracc" LINEID="2"/><ROW ID="92" TEXTSTR="where BANKID=:BANKID" LINEID="3"/><ROW ID="661" TEXTSTR="select mats.matid, mats.name" LINEID="0"/><ROW ID="661" TEXTSTR="from materials mats" LINEID="1"/><ROW ID="661" TEXTSTR="where mats.deleted=0" LINEID="2"/><ROW ID="661" TEXTSTR="order by 2" LINEID="3"/><ROW ID="662" TEXTSTR="select * from paydoc where paydocid=:paydocid" LINEID="0"/><ROW ID="667" TEXTSTR="update services set name=:name where svcid=:svcid" LINEID="0"/><ROW ID="304" TEXTSTR="select c.currid, c.shortname, c.name, cr.onvalue, cr.ondate, cr.rateid, c.def" LINEID="0"/><ROW ID="304" TEXTSTR=" from currency c, currencyrate cr" LINEID="1"/><ROW ID="304" TEXTSTR=" where c.currid=cr.currid" LINEID="2"/><ROW ID="304" TEXTSTR="  and c.deleted=0" LINEID="3"/><ROW ID="304" TEXTSTR="  and cr.ondate=" LINEID="4"/><ROW ID="304" TEXTSTR="   (select max(ondate) from currencyrate where currid=cr.currid and ondate&lt;=:ondate)" LINEID="5"/><ROW ID="304" TEXTSTR=" order by c.shortname" LINEID="6"/><ROW ID="669" TEXTSTR="select svcid, pid, name from services where isgrp=1 and deleted=0" LINEID="0"/><ROW ID="672" TEXTSTR="update services set pid=:pid where svcid=:svcid" LINEID="0"/><ROW ID="673" TEXTSTR="delete from services where svcid=:svcid" LINEID="0"/><ROW ID="674" TEXTSTR="select count(*) from services where pid=:svcid and pid&lt;&gt;svcid" LINEID="0"/><ROW ID="665" TEXTSTR="select svcid, name" LINEID="0"/><ROW ID="665" TEXTSTR="  from services" LINEID="1"/><ROW ID="665" TEXTSTR="  where isgrp=1 and pid=:pid and pid&lt;&gt;svcid and deleted=0" LINEID="2"/><ROW ID="664" TEXTSTR="select svcid, name" LINEID="0"/><ROW ID="664" TEXTSTR="  from services" LINEID="1"/><ROW ID="664" TEXTSTR="  where isgrp=1 and pid=svcid and deleted=0" LINEID="2"/><ROW ID="670" TEXTSTR="insert into services" LINEID="0"/><ROW ID="670" TEXTSTR=" (svcid, name, artikul, pid, isgrp, istransport, price," LINEID="1"/><ROW ID="670" TEXTSTR="  currid, notes, deleted, isnormed, norm, mid)" LINEID="2"/><ROW ID="670" TEXTSTR=" values" LINEID="3"/><ROW ID="670" TEXTSTR=" (:svcid, :name, :artikul, :pid, :isgrp, :istransport, :price," LINEID="4"/><ROW ID="670" TEXTSTR="  :currid, :notes, 0, :isnormed, :norm, :mid)" LINEID="5"/><ROW ID="670" TEXTSTR="" LINEID="6"/><ROW ID="671" TEXTSTR="update services set name=:name, artikul=:artikul," LINEID="0"/><ROW ID="671" TEXTSTR="  isgrp=:isgrp, istransport=:istransport, currid=:currid," LINEID="1"/><ROW ID="671" TEXTSTR="  price=:price, notes=:notes, pid=:pid, isnormed=:isnormed," LINEID="2"/><ROW ID="671" TEXTSTR="  norm=:norm, mid=:mid" LINEID="3"/><ROW ID="671" TEXTSTR=" where svcid=:svcid" LINEID="4"/><ROW ID="28" TEXTSTR="select cr.rateid, cr.ondate, cr.onvalue" LINEID="0"/><ROW ID="28" TEXTSTR=" from currencyrate cr" LINEID="1"/><ROW ID="28" TEXTSTR=" where cr.currid=:currid" LINEID="2"/><ROW ID="28" TEXTSTR="  and cr.ondate=" LINEID="3"/><ROW ID="28" TEXTSTR="  (select max(ondate) from currencyrate where currid=cr.currid and ondate&lt;=:ondate)" LINEID="4"/><ROW ID="675" TEXTSTR="select cr.rateid, cr.ondate, cr.onvalue, c.shortname" LINEID="0"/><ROW ID="675" TEXTSTR=" from currencyrate cr, currency c" LINEID="1"/><ROW ID="675" TEXTSTR=" where c.currid=:currid" LINEID="2"/><ROW ID="675" TEXTSTR="  and cr.currid=c.currid" LINEID="3"/><ROW ID="675" TEXTSTR="  and cr.ondate=" LINEID="4"/><ROW ID="675" TEXTSTR="  (select max(ondate) from currencyrate" LINEID="5"/><ROW ID="675" TEXTSTR="    where currid=cr.currid and ondate&lt;=:ondate)" LINEID="6"/><ROW ID="668" TEXTSTR="select s.*, m.shortname as msrname" LINEID="0"/><ROW ID="668" TEXTSTR="  from services s, measures m" LINEID="1"/><ROW ID="668" TEXTSTR="  where s.svcid=:svcid" LINEID="2"/><ROW ID="668" TEXTSTR="   and m.mid=s.mid" LINEID="3"/><ROW ID="677" TEXTSTR="delete from waybillsvc where wbillid=:wbillid" LINEID="0"/><ROW ID="678" TEXTSTR="insert into waybillsvc" LINEID="0"/><ROW ID="678" TEXTSTR="  (posid, wbillid, currid, svcid, num, price, norm, amount," LINEID="1"/><ROW ID="678" TEXTSTR="   nds, discount, personid)" LINEID="2"/><ROW ID="678" TEXTSTR=" values" LINEID="3"/><ROW ID="678" TEXTSTR="  (:posid, :wbillid, :currid, :svcid, :num, :price, :norm, :amount," LINEID="4"/><ROW ID="678" TEXTSTR="   :nds, :discount, :personid)" LINEID="5"/><ROW ID="678" TEXTSTR="" LINEID="6"/><ROW ID="682" TEXTSTR="insert into prgparams" LINEID="0"/><ROW ID="682" TEXTSTR="(parname, parvalue)" LINEID="1"/><ROW ID="682" TEXTSTR="values" LINEID="2"/><ROW ID="682" TEXTSTR="(:parname, :parvalue)" LINEID="3"/><ROW ID="681" TEXTSTR="delete from prgparams where parname=:parname" LINEID="0"/><ROW ID="683" TEXTSTR="select * from prgparams" LINEID="0"/><ROW ID="685" TEXTSTR="select * from waybillsvc where posid=:posid1" LINEID="0"/><ROW ID="688" TEXTSTR="update waybilldet" LINEID="0"/><ROW ID="688" TEXTSTR="set price=null, discount=null, nds=null, ondate=null, currid=null, ptypeid=null" LINEID="1"/><ROW ID="688" TEXTSTR="where wbillid=:WBILLID" LINEID="2"/><ROW ID="691" TEXTSTR="select tablename from pricelist where plid=:plid" LINEID="0"/><ROW ID="212" TEXTSTR="insert into matgroup" LINEID="0"/><ROW ID="212" TEXTSTR=" (grpid, pid, name, deleted, nds)" LINEID="1"/><ROW ID="212" TEXTSTR="values" LINEID="2"/><ROW ID="212" TEXTSTR=" (:grpid, :pid, :name, 0, :nds)" LINEID="3"/><ROW ID="213" TEXTSTR="update matgroup set name=:name, pid=:pid, nds=:nds" LINEID="0"/><ROW ID="213" TEXTSTR=" where grpid=:grpid" LINEID="1"/><ROW ID="699" TEXTSTR="select * from sp_get_mat_nds(:matid)" LINEID="0"/><ROW ID="700" TEXTSTR="select * from sp_get_matgrp_nds(:grpid)" LINEID="0"/><ROW ID="702" TEXTSTR="delete from serials" LINEID="0"/><ROW ID="702" TEXTSTR="where posid in (select posid from waybilldet" LINEID="1"/><ROW ID="702" TEXTSTR="                where wbillid=:wbillid)" LINEID="2"/><ROW ID="703" TEXTSTR="insert into serials(sid, posid, serialno)" LINEID="0"/><ROW ID="703" TEXTSTR="values(:sid, :posid, :serialno)" LINEID="1"/><ROW ID="394" TEXTSTR="insert into WaybillList" LINEID="0"/><ROW ID="394" TEXTSTR="(WBILLID, NUM, ONDATE, KAID, CURRID, ATTNUM, ATTDATE, REASON, PERSONID, CHECKED," LINEID="1"/><ROW ID="394" TEXTSTR="DELETED, SUMMALL, WTYPE, NDS, RECEIVED, TODATE, DEFNUM)" LINEID="2"/><ROW ID="394" TEXTSTR="select" LINEID="3"/><ROW ID="394" TEXTSTR=":WBILLID, :num, :ONDATE, wblist.KAID, wblist.CURRID, wblist.ATTNUM," LINEID="4"/><ROW ID="394" TEXTSTR="wblist.ATTDATE, :REASON, wblist.PERSONID, 1, wblist.DELETED," LINEID="5"/><ROW ID="394" TEXTSTR="wblist.SUMMALL, 2, wblist.NDS, wblist.RECEIVED, :TODATE, :DEFNUM" LINEID="6"/><ROW ID="394" TEXTSTR="from WaybillList wblist" LINEID="7"/><ROW ID="394" TEXTSTR=" %m" LINEID="8"/><ROW ID="394" TEXTSTR="" LINEID="9"/><ROW ID="706" TEXTSTR="update waybilllist set checked=:checked where wbillid=:wbillid" LINEID="0"/><ROW ID="713" TEXTSTR="update waybilldet set price=:price, nds=:nds, amount=:amount" LINEID="0"/><ROW ID="713" TEXTSTR="  where posid=:posid" LINEID="1"/><ROW ID="715" TEXTSTR="update wmatturn set amount=:amount where posid=:posid" LINEID="0"/><ROW ID="715" TEXTSTR=" and turntype=1" LINEID="1"/><ROW ID="716" TEXTSTR="select * from sp_pos_remain_get(:posid, :ondate)" LINEID="0"/><ROW ID="718" TEXTSTR="update waybilldet set price=:price, nds=:nds" LINEID="0"/><ROW ID="718" TEXTSTR=" where posid=:posid" LINEID="1"/><ROW ID="400" TEXTSTR="select pt.*, ppt.name as pname" LINEID="0"/><ROW ID="400" TEXTSTR=" from pricetypes pt" LINEID="1"/><ROW ID="400" TEXTSTR="  left outer join pricetypes ppt on pt.pptypeid=ppt.ptypeid" LINEID="2"/><ROW ID="400" TEXTSTR="  where pt.deleted=0" LINEID="3"/><ROW ID="400" TEXTSTR=" order by pt.num" LINEID="4"/><ROW ID="407" TEXTSTR="insert into matprices" LINEID="0"/><ROW ID="407" TEXTSTR=" (ptypeid, matid, onvalue, extratype, currid, dis, withnds, pptypeid)" LINEID="1"/><ROW ID="407" TEXTSTR="values" LINEID="2"/><ROW ID="407" TEXTSTR=" (:ptypeid, :matid, :onvalue, :extratype, :currid, :dis, :withnds, :pptypeid)" LINEID="3"/><ROW ID="407" TEXTSTR="" LINEID="4"/><ROW ID="724" TEXTSTR="insert into WAYBILLDET (POSID, WBILLID, MATID, WID, AMOUNT, PRICE, DISCOUNT, NDS, CurrId, OnDate, PTypeID, NUM, checked)" LINEID="0"/><ROW ID="724" TEXTSTR="values (:POSID, :WBILLID, :MATID, :WID, :AMOUNT, :PRICE, :DISCOUNT, :NDS, :CurrId, :OnDate, :PTypeID, :NUM, :checked)" LINEID="1"/><ROW ID="416" TEXTSTR="select mgp.*, c.shortname, pt.name as pname" LINEID="0"/><ROW ID="416" TEXTSTR=" from matgroupprices mgp" LINEID="1"/><ROW ID="416" TEXTSTR="  join materials m on m.grpid=mgp.grpid" LINEID="2"/><ROW ID="416" TEXTSTR="  left outer join currency c on c.currid=mgp.currid" LINEID="3"/><ROW ID="416" TEXTSTR="  left outer join pricetypes pt on pt.ptypeid=mgp.pptypeid" LINEID="4"/><ROW ID="416" TEXTSTR=" where m.matid=:matid" LINEID="5"/><ROW ID="416" TEXTSTR="" LINEID="6"/><ROW ID="405" TEXTSTR="select mp.*, c.shortname, pt.name as pname" LINEID="0"/><ROW ID="405" TEXTSTR=" from matprices mp" LINEID="1"/><ROW ID="405" TEXTSTR="  left outer join currency c on c.currid=mp.currid" LINEID="2"/><ROW ID="405" TEXTSTR="  left outer join pricetypes pt on pt.ptypeid=mp.pptypeid" LINEID="3"/><ROW ID="405" TEXTSTR=" where mp.matid=:matid" LINEID="4"/><ROW ID="433" TEXTSTR="select * from SP_GET_DISCOUNT(:kaid,:matid)" LINEID="0"/><ROW ID="730" TEXTSTR="execute procedure sp_recalc_ka_saldo(:kaid, :ondate)" LINEID="0"/><ROW ID="734" TEXTSTR="select * from cashdesks where cashid=:cashid" LINEID="0"/><ROW ID="735" TEXTSTR="select * from cashdesks where deleted=0" LINEID="0"/><ROW ID="228" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="228" TEXTSTR="set NUM=:NUM, ONDATE=:ONDATE, KAID=:KAID, CURRID=:CURRID, ATTNUM=:ATTNUM," LINEID="1"/><ROW ID="228" TEXTSTR="    ATTDATE=:ATTDATE, REASON=:REASON, PERSONID=:PERSONID, CHECKED=:CHECKED," LINEID="2"/><ROW ID="228" TEXTSTR="    DELETED=:DELETED, SUMMALL=:SUMMALL, WTYPE=:WTYPE, NDS=:NDS," LINEID="3"/><ROW ID="228" TEXTSTR="    RECEIVED=:RECEIVED, TODATE=:TODATE, DEFNUM=:DEFNUM, NOTES=:NOTES" LINEID="4"/><ROW ID="228" TEXTSTR="where WBILLID=:WBILLID" LINEID="5"/><ROW ID="228" TEXTSTR="" LINEID="6"/><ROW ID="228" TEXTSTR="" LINEID="7"/><ROW ID="228" TEXTSTR="" LINEID="8"/><ROW ID="739" TEXTSTR="select count(wbl.wbillid)" LINEID="0"/><ROW ID="739" TEXTSTR=" from waybilllist wbl" LINEID="1"/><ROW ID="739" TEXTSTR=" where wbl.wtype=-1" LINEID="2"/><ROW ID="739" TEXTSTR="   and wbl.defnum=1" LINEID="3"/><ROW ID="739" TEXTSTR="   and wbl.checked=1" LINEID="4"/><ROW ID="739" TEXTSTR="   and wbl.ondate between :fromdate and :todate" LINEID="5"/><ROW ID="739" TEXTSTR="" LINEID="6"/><ROW ID="740" TEXTSTR="delete from entaccounts where accid=:accid" LINEID="0"/><ROW ID="732" TEXTSTR="insert into cashdesks (cashid, name, deleted, def)" LINEID="0"/><ROW ID="732" TEXTSTR=" values (:cashid, :name, 0, :def)" LINEID="1"/><ROW ID="733" TEXTSTR="update cashdesks set name=:name, def=:def where cashid=:cashid" LINEID="0"/><ROW ID="742" TEXTSTR="update cashdesks set def=0" LINEID="0"/><ROW ID="743" TEXTSTR="select min(cashid) from cashdesks where deleted=0" LINEID="0"/><ROW ID="744" TEXTSTR="update cashdesks set def=1 where cashid=:cashid" LINEID="0"/><ROW ID="746" TEXTSTR="select distinct producer from materials" LINEID="0"/><ROW ID="746" TEXTSTR=" union" LINEID="1"/><ROW ID="746" TEXTSTR="select distinct producer from waybilldetaddprops" LINEID="2"/><ROW ID="751" TEXTSTR="delete from waybilldetaddprops where posid=:posid" LINEID="0"/><ROW ID="745" TEXTSTR="select ms.*, cr.onvalue, c.shortname" LINEID="0"/><ROW ID="745" TEXTSTR="  from moneysaldo ms" LINEID="1"/><ROW ID="745" TEXTSTR="   join currencyrate cr on ms.currid=cr.currid" LINEID="2"/><ROW ID="745" TEXTSTR="   join currency c on c.currid=ms.currid" LINEID="3"/><ROW ID="745" TEXTSTR="  where ms.ondate=" LINEID="4"/><ROW ID="745" TEXTSTR="   (" LINEID="5"/><ROW ID="745" TEXTSTR="    select max(ondate) from moneysaldo" LINEID="6"/><ROW ID="745" TEXTSTR="     where currid=ms.currid" LINEID="7"/><ROW ID="745" TEXTSTR="      and (accid=ms.accid or (accid is null and ms.accid is null))" LINEID="8"/><ROW ID="745" TEXTSTR="      and (cashid=ms.cashid or (cashid is null and ms.cashid is null))" LINEID="9"/><ROW ID="745" TEXTSTR="      and ondate&lt;=:ondate" LINEID="10"/><ROW ID="745" TEXTSTR="   )" LINEID="11"/><ROW ID="745" TEXTSTR="   and cr.ondate=" LINEID="12"/><ROW ID="745" TEXTSTR="   (" LINEID="13"/><ROW ID="745" TEXTSTR="    select max(ondate) from currencyrate" LINEID="14"/><ROW ID="745" TEXTSTR="     where cr.currid=currid and ondate&lt;=ms.ondate" LINEID="15"/><ROW ID="745" TEXTSTR="   )" LINEID="16"/><ROW ID="757" TEXTSTR="execute procedure sp_recalc_money_saldo(:ondate, :accid, :cashid, :currid, :saldotype)" LINEID="0"/><ROW ID="758" TEXTSTR="select ms.*, cr.onvalue, c.shortname" LINEID="0"/><ROW ID="758" TEXTSTR="  from moneysaldo ms" LINEID="1"/><ROW ID="758" TEXTSTR="   join currencyrate cr on ms.currid=cr.currid" LINEID="2"/><ROW ID="758" TEXTSTR="   join currency c on c.currid=ms.currid" LINEID="3"/><ROW ID="758" TEXTSTR="  where ms.ondate=" LINEID="4"/><ROW ID="758" TEXTSTR="   (" LINEID="5"/><ROW ID="758" TEXTSTR="    select max(ondate) from moneysaldo" LINEID="6"/><ROW ID="758" TEXTSTR="     where currid=ms.currid" LINEID="7"/><ROW ID="758" TEXTSTR="      and (accid=ms.accid or (accid is null and ms.accid is null))" LINEID="8"/><ROW ID="758" TEXTSTR="      and (cashid=ms.cashid or (cashid is null and ms.cashid is null))" LINEID="9"/><ROW ID="758" TEXTSTR="      and ondate&lt;=:ondate" LINEID="10"/><ROW ID="758" TEXTSTR="   )" LINEID="11"/><ROW ID="758" TEXTSTR="   and ms.currid=:currid" LINEID="12"/><ROW ID="758" TEXTSTR="   and cr.ondate=" LINEID="13"/><ROW ID="758" TEXTSTR="   (" LINEID="14"/><ROW ID="758" TEXTSTR="    select max(ondate) from currencyrate" LINEID="15"/><ROW ID="758" TEXTSTR="     where cr.currid=currid and ondate&lt;=ms.ondate" LINEID="16"/><ROW ID="758" TEXTSTR="   )" LINEID="17"/><ROW ID="758" TEXTSTR="%m" LINEID="18"/><ROW ID="760" TEXTSTR="insert into waybilldetaddprops" LINEID="0"/><ROW ID="760" TEXTSTR=" (posid, producer, gtd, certnum, certdate, notes, wirereelnum)" LINEID="1"/><ROW ID="760" TEXTSTR="values" LINEID="2"/><ROW ID="760" TEXTSTR=" (:posid, :producer, :gtd, :certnum, :certdate, :notes, :wirereelnum)" LINEID="3"/><ROW ID="760" TEXTSTR="" LINEID="4"/><ROW ID="762" TEXTSTR="select wbl.*, ka.name as kaname" LINEID="0"/><ROW ID="762" TEXTSTR="from waybilllist wbl" LINEID="1"/><ROW ID="762" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="2"/><ROW ID="762" TEXTSTR=" where wbl.deleted=0" LINEID="3"/><ROW ID="762" TEXTSTR="   and wbl.ondate between :fromdate and :todate" LINEID="4"/><ROW ID="762" TEXTSTR="  %m" LINEID="5"/><ROW ID="762" TEXTSTR="order by wbl.ondate desc" LINEID="6"/><ROW ID="351" TEXTSTR="select * from SP_GET_DOC_WMT(:wbillid)" LINEID="0"/><ROW ID="763" TEXTSTR="select distinct 0 as matid, 0 as grpid, producer as matname" LINEID="0"/><ROW ID="763" TEXTSTR="from materials" LINEID="1"/><ROW ID="763" TEXTSTR="where deleted=0" LINEID="2"/><ROW ID="763" TEXTSTR="" LINEID="3"/><ROW ID="764" TEXTSTR="select * from sp_get_mat_extra(:matid, :ptypeid, :ondate, :price)" LINEID="0"/><ROW ID="684" TEXTSTR="select wbd.price, wbd.currid" LINEID="0"/><ROW ID="684" TEXTSTR=" from wmatturn wm, waybilldet wbd" LINEID="1"/><ROW ID="684" TEXTSTR=" where wm.matid=:matid" LINEID="2"/><ROW ID="684" TEXTSTR="   and wm.turntype=1" LINEID="3"/><ROW ID="684" TEXTSTR="   and wm.posid=wbd.posid" LINEID="4"/><ROW ID="684" TEXTSTR="   and wbd.ondate=" LINEID="5"/><ROW ID="684" TEXTSTR="  (select max(wbd1.ondate)" LINEID="6"/><ROW ID="684" TEXTSTR="    from waybilldet wbd1, waybilllist wbl" LINEID="7"/><ROW ID="684" TEXTSTR="    where wbd1.matid=:matid" LINEID="8"/><ROW ID="684" TEXTSTR="     and wbl.wbillid=wbd1.wbillid" LINEID="9"/><ROW ID="684" TEXTSTR="     and wbd1.ondate&lt;=:ondate" LINEID="10"/><ROW ID="684" TEXTSTR="     and wbl.wtype in (1, 5)" LINEID="11"/><ROW ID="684" TEXTSTR="     and wbl.checked=1)" LINEID="12"/><ROW ID="768" TEXTSTR="select distinct wirereelnum from waybilldetaddprops" LINEID="0"/><ROW ID="769" TEXTSTR="select distinct wbd.posid" LINEID="0"/><ROW ID="769" TEXTSTR=" from wmatturn wmt, waybilldet wbd, waybilldet wbd2, waybilllist wbl" LINEID="1"/><ROW ID="769" TEXTSTR=" where wmt.sourceid=wbd.posid" LINEID="2"/><ROW ID="769" TEXTSTR="  and wbd.wbillid=:wbillid" LINEID="3"/><ROW ID="769" TEXTSTR="  and wmt.posid=wbd2.posid" LINEID="4"/><ROW ID="769" TEXTSTR="  and wbd2.wbillid=wbl.wbillid" LINEID="5"/><ROW ID="769" TEXTSTR="  and wbl.checked=0" LINEID="6"/><ROW ID="771" TEXTSTR="insert into wmatturn" LINEID="0"/><ROW ID="771" TEXTSTR=" (posid, wid, matid, sourceid, turntype, ondate, amount)" LINEID="1"/><ROW ID="771" TEXTSTR=" select wbd.posid, wbd.wid, wbd.matid, wbd.posid, :wtype," LINEID="2"/><ROW ID="771" TEXTSTR="   wbl.ondate, wbd.amount" LINEID="3"/><ROW ID="771" TEXTSTR="  from waybilllist wbl, waybilldet wbd" LINEID="4"/><ROW ID="771" TEXTSTR="  where wbl.wbillid=:wbillid" LINEID="5"/><ROW ID="771" TEXTSTR="    and wbl.wbillid=wbd.wbillid" LINEID="6"/><ROW ID="771" TEXTSTR="" LINEID="7"/><ROW ID="753" TEXTSTR="select ms.saldo, c.shortname, c.currid, cr.onvalue" LINEID="0"/><ROW ID="753" TEXTSTR=" from moneysaldo ms, currency c, currencyrate cr" LINEID="1"/><ROW ID="753" TEXTSTR=" where c.currid=ms.currid" LINEID="2"/><ROW ID="753" TEXTSTR="   and cr.currid=c.currid" LINEID="3"/><ROW ID="753" TEXTSTR="   and cr.ondate=" LINEID="4"/><ROW ID="753" TEXTSTR="   (select max(ondate) from currencyrate where ondate&lt;ms.ondate)" LINEID="5"/><ROW ID="753" TEXTSTR="   and ms.ondate=" LINEID="6"/><ROW ID="753" TEXTSTR="   (select max(ondate) from moneysaldo where ondate&lt;:ondate)" LINEID="7"/><ROW ID="772" TEXTSTR="select ms.*, cr.onvalue, c.shortname" LINEID="0"/><ROW ID="772" TEXTSTR="  from moneysaldo ms" LINEID="1"/><ROW ID="772" TEXTSTR="   join currencyrate cr on ms.currid=cr.currid" LINEID="2"/><ROW ID="772" TEXTSTR="   join currency c on c.currid=ms.currid" LINEID="3"/><ROW ID="772" TEXTSTR="  where ms.ondate=" LINEID="4"/><ROW ID="772" TEXTSTR="   (" LINEID="5"/><ROW ID="772" TEXTSTR="    select max(ondate) from moneysaldo" LINEID="6"/><ROW ID="772" TEXTSTR="     where currid=ms.currid" LINEID="7"/><ROW ID="772" TEXTSTR="      and (accid=ms.accid or (accid is null and ms.accid is null))" LINEID="8"/><ROW ID="772" TEXTSTR="      and (cashid=ms.cashid or (cashid is null and ms.cashid is null))" LINEID="9"/><ROW ID="772" TEXTSTR="      and ondate&lt;=:ondate" LINEID="10"/><ROW ID="772" TEXTSTR="   )" LINEID="11"/><ROW ID="772" TEXTSTR="   and cr.ondate=" LINEID="12"/><ROW ID="772" TEXTSTR="   (" LINEID="13"/><ROW ID="772" TEXTSTR="    select max(ondate) from currencyrate" LINEID="14"/><ROW ID="772" TEXTSTR="     where cr.currid=currid and ondate&lt;=ms.ondate" LINEID="15"/><ROW ID="772" TEXTSTR="   )" LINEID="16"/><ROW ID="772" TEXTSTR="   and ms.currid=:currid" LINEID="17"/><ROW ID="772" TEXTSTR="   %m" LINEID="18"/><ROW ID="774" TEXTSTR="update paydoc set checked=:checked where operid=:operid" LINEID="0"/><ROW ID="776" TEXTSTR="select wbd.*, c.shortname, cr.onvalue, wbl.kaid, wbdap.producer," LINEID="0"/><ROW ID="776" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.notes, wbdap.wirereelnum" LINEID="1"/><ROW ID="776" TEXTSTR=" from waybilldet wbd" LINEID="2"/><ROW ID="776" TEXTSTR="   join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="3"/><ROW ID="776" TEXTSTR="   join currency c on wbd.currid=c.currid" LINEID="4"/><ROW ID="776" TEXTSTR="   join currencyrate cr on cr.currid=c.currid" LINEID="5"/><ROW ID="776" TEXTSTR="   left outer join waybilldetaddprops wbdap on wbdap.posid=wbd.posid" LINEID="6"/><ROW ID="776" TEXTSTR=" where wbd.posid=:posid" LINEID="7"/><ROW ID="776" TEXTSTR="  and cr.ondate=" LINEID="8"/><ROW ID="776" TEXTSTR="   (select max(ondate)" LINEID="9"/><ROW ID="776" TEXTSTR="     from currencyrate" LINEID="10"/><ROW ID="776" TEXTSTR="     where currid=cr.currid and ondate&lt;=wbd.ondate)" LINEID="11"/><ROW ID="777" TEXTSTR="delete from waybilldetaddprops where posid=:posid" LINEID="0"/><ROW ID="778" TEXTSTR="select distinct wbd.posid" LINEID="0"/><ROW ID="778" TEXTSTR=" from waybilldet wbd, wmatturn wmt" LINEID="1"/><ROW ID="778" TEXTSTR=" where wbd.wbillid=:wbillid" LINEID="2"/><ROW ID="778" TEXTSTR="  and wmt.posid=wbd.posid" LINEID="3"/><ROW ID="778" TEXTSTR="  and wmt.turntype=2" LINEID="4"/><ROW ID="778" TEXTSTR="" LINEID="5"/><ROW ID="781" TEXTSTR="insert into wmatturn" LINEID="0"/><ROW ID="781" TEXTSTR=" (posid, wid, matid, sourceid, turntype, ondate, amount)" LINEID="1"/><ROW ID="781" TEXTSTR="values" LINEID="2"/><ROW ID="781" TEXTSTR=" (:posid, :wid, :matid, :sourceid, :turntype, :ondate, :amount)" LINEID="3"/><ROW ID="782" TEXTSTR="update wmatturn set turntype=:turntype where posid=:posid and sourceid=posid" LINEID="0"/><ROW ID="780" TEXTSTR="delete from waybilldet wbd where wbd.wbillid=:wbillid and wbd.posid not in" LINEID="0"/><ROW ID="780" TEXTSTR=" (select wbd2.posid from wmatturn wmt, waybilldet wbd2" LINEID="1"/><ROW ID="780" TEXTSTR="   where wmt.posid=wbd2.posid and wmt.turntype&lt;&gt;3 and wbd2.wbillid=:wbillid)" LINEID="2"/><ROW ID="780" TEXTSTR="" LINEID="3"/><ROW ID="773" TEXTSTR="select pds.*, pdd.cashid as destcashid, pdd.accid as destaccid," LINEID="0"/><ROW ID="773" TEXTSTR="  pdd.paydocid as destpaydocid, pdd.currid as destcurrid, pdd.total as desttotal," LINEID="1"/><ROW ID="773" TEXTSTR="  pdc.paydocid as chargepaydocid, pdc.total as totalcharge, pdc.ctypeid as chargeid" LINEID="2"/><ROW ID="773" TEXTSTR=" from paydoc pds" LINEID="3"/><ROW ID="773" TEXTSTR="  join paydoc pdd on pds.operid=pdd.operid" LINEID="4"/><ROW ID="773" TEXTSTR="  left outer join paydoc pdc on (pdc.operid=pds.operid and pdc.doctype=-2)" LINEID="5"/><ROW ID="773" TEXTSTR=" where pds.operid is not null" LINEID="6"/><ROW ID="773" TEXTSTR="  and pds.doctype&lt;0" LINEID="7"/><ROW ID="773" TEXTSTR="  and pds.doctype&lt;&gt;pdd.doctype" LINEID="8"/><ROW ID="773" TEXTSTR="  and pds.doctype&lt;&gt;-2" LINEID="9"/><ROW ID="773" TEXTSTR="  and pdd.doctype&lt;&gt;-2" LINEID="10"/><ROW ID="773" TEXTSTR="  and pds.operid=:operid" LINEID="11"/><ROW ID="773" TEXTSTR="" LINEID="12"/><ROW ID="785" TEXTSTR="select count(distinct operid) from paydoc" LINEID="0"/><ROW ID="789" TEXTSTR="delete from accoutdet where posid in" LINEID="0"/><ROW ID="789" TEXTSTR=" (select posid from waybilldet where wbillid=:wbillid)" LINEID="1"/><ROW ID="788" TEXTSTR="insert into accoutdet" LINEID="0"/><ROW ID="788" TEXTSTR=" select posid, 0, 0" LINEID="1"/><ROW ID="788" TEXTSTR="  from waybilldet where wbillid=:wbillid" LINEID="2"/><ROW ID="791" TEXTSTR="insert into accoutposrel (accposid, posid)" LINEID="0"/><ROW ID="791" TEXTSTR=" values (:accposid, :posid)" LINEID="1"/><ROW ID="790" TEXTSTR="update accdetout set shippedamount=shippedamount+wbd.amount" LINEID="0"/><ROW ID="790" TEXTSTR="  where posid in" LINEID="1"/><ROW ID="790" TEXTSTR="  (select ar accposid" LINEID="2"/><ROW ID="790" TEXTSTR="    from waybilldet wbd, accoutposrel ar" LINEID="3"/><ROW ID="790" TEXTSTR="    where wbd.wbillid=:wbillid and ar.posid=wbd.posid)" LINEID="4"/><ROW ID="792" TEXTSTR="execute procedure sp_wb_upd_accpos(:wbillid)" LINEID="0"/><ROW ID="793" TEXTSTR="update waybilllist set checked=:checked where wbillid=:wbillid" LINEID="0"/><ROW ID="794" TEXTSTR="update wmatturn set amount=amount+:amount where posid=:posid" LINEID="0"/><ROW ID="794" TEXTSTR=" and sourceid=:sourceid" LINEID="1"/><ROW ID="795" TEXTSTR="execute procedure sp_wb_upd_accrsv(:wbillid)" LINEID="0"/><ROW ID="797" TEXTSTR="select wbdet.num, wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="797" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="797" TEXTSTR="  curr.shortname as currname, cr.onvalue," LINEID="2"/><ROW ID="797" TEXTSTR="  cast(0 as integer) as postype," LINEID="3"/><ROW ID="797" TEXTSTR="  cast(0 as double precision) as norm, wbdap.producer," LINEID="4"/><ROW ID="797" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.notes" LINEID="5"/><ROW ID="797" TEXTSTR="from WAYBILLDET wbdet" LINEID="6"/><ROW ID="797" TEXTSTR="  join MATERIALS mat on mat.matid=wbdet.matid" LINEID="7"/><ROW ID="797" TEXTSTR="  join MEASURES msr on msr.mid=mat.mid" LINEID="8"/><ROW ID="797" TEXTSTR="  join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="9"/><ROW ID="797" TEXTSTR="  join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="797" TEXTSTR="  join currencyrate cr on curr.currid=cr.currid" LINEID="11"/><ROW ID="797" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="12"/><ROW ID="797" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="13"/><ROW ID="797" TEXTSTR="  and cr.ondate=" LINEID="14"/><ROW ID="797" TEXTSTR="   (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbdet.ondate)" LINEID="15"/><ROW ID="797" TEXTSTR="" LINEID="16"/><ROW ID="797" TEXTSTR="union all" LINEID="17"/><ROW ID="797" TEXTSTR="" LINEID="18"/><ROW ID="797" TEXTSTR="select wbs.num, -wbs.posid as posid, wbs.wbillid, s.svcid as matid," LINEID="19"/><ROW ID="797" TEXTSTR="  cast(0 as integer) as wid, wbs.amount, wbs.price," LINEID="20"/><ROW ID="797" TEXTSTR="  wbs.discount, wbs.nds, wbs.currid, wbl.ondate," LINEID="21"/><ROW ID="797" TEXTSTR="  cast(0 as integer) as ptypeid, wbs.num, 0, s.name as matname," LINEID="22"/><ROW ID="797" TEXTSTR="  ms.shortname as msrname, cast(&apos;&apos; as varchar(64)) as whname," LINEID="23"/><ROW ID="797" TEXTSTR="  cast(s.artikul as varchar(80)), c.shortname as currname, cr.onvalue, 1 as postype," LINEID="24"/><ROW ID="797" TEXTSTR="  wbs.norm, cast(&apos;&apos; as varchar(255)), cast(&apos;&apos; as varchar(64))," LINEID="25"/><ROW ID="797" TEXTSTR="  cast(&apos;&apos; as varchar(64)), cast(null as date), cast(&apos;&apos; as varchar(255))" LINEID="26"/><ROW ID="797" TEXTSTR="from waybillsvc wbs" LINEID="27"/><ROW ID="797" TEXTSTR="  join services s on s.svcid=wbs.svcid" LINEID="28"/><ROW ID="797" TEXTSTR="  join measures ms on ms.mid=s.mid" LINEID="29"/><ROW ID="797" TEXTSTR="  join waybilllist wbl on wbl.wbillid=wbs.wbillid" LINEID="30"/><ROW ID="797" TEXTSTR="  join currency c on c.currid=wbs.currid" LINEID="31"/><ROW ID="797" TEXTSTR="  join currencyrate cr on c.currid=cr.currid" LINEID="32"/><ROW ID="797" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="33"/><ROW ID="797" TEXTSTR="  and cr.ondate=" LINEID="34"/><ROW ID="797" TEXTSTR="   (select max(ondate) from currencyrate" LINEID="35"/><ROW ID="797" TEXTSTR="     where currid=c.currid and ondate&lt;=wbl.ondate)" LINEID="36"/><ROW ID="797" TEXTSTR="" LINEID="37"/><ROW ID="797" TEXTSTR="order by 1" LINEID="38"/><ROW ID="797" TEXTSTR="" LINEID="39"/><ROW ID="798" TEXTSTR="select wbdet.num, wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="798" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="798" TEXTSTR="  curr.shortname as currname, cr.onvalue," LINEID="2"/><ROW ID="798" TEXTSTR="  cast(0 as integer) as postype," LINEID="3"/><ROW ID="798" TEXTSTR="  cast(0 as double precision) as norm, wbdap.producer," LINEID="4"/><ROW ID="798" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate," LINEID="5"/><ROW ID="798" TEXTSTR="  acd.shippedamount, acd.rsvamount, wbdap.notes" LINEID="6"/><ROW ID="798" TEXTSTR="from WAYBILLDET wbdet" LINEID="7"/><ROW ID="798" TEXTSTR="  join MATERIALS mat on mat.matid=wbdet.matid" LINEID="8"/><ROW ID="798" TEXTSTR="  join MEASURES msr on msr.mid=mat.mid" LINEID="9"/><ROW ID="798" TEXTSTR="  join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="10"/><ROW ID="798" TEXTSTR="  join currency curr on curr.currid=wbdet.currid" LINEID="11"/><ROW ID="798" TEXTSTR="  join currencyrate cr on curr.currid=cr.currid" LINEID="12"/><ROW ID="798" TEXTSTR="  left outer join accoutdet acd on acd.posid=wbdet.posid" LINEID="13"/><ROW ID="798" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="14"/><ROW ID="798" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="15"/><ROW ID="798" TEXTSTR="  and cr.ondate=" LINEID="16"/><ROW ID="798" TEXTSTR="   (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbdet.ondate)" LINEID="17"/><ROW ID="798" TEXTSTR="" LINEID="18"/><ROW ID="798" TEXTSTR="union all" LINEID="19"/><ROW ID="798" TEXTSTR="" LINEID="20"/><ROW ID="798" TEXTSTR="select wbs.num, -wbs.posid as posid, wbs.wbillid, s.svcid as matid," LINEID="21"/><ROW ID="798" TEXTSTR="  cast(0 as integer) as wid, wbs.amount, wbs.price," LINEID="22"/><ROW ID="798" TEXTSTR="  wbs.discount, wbs.nds, wbs.currid, wbl.ondate," LINEID="23"/><ROW ID="798" TEXTSTR="  cast(0 as integer) as ptypeid, wbs.num, 0, s.name as matname," LINEID="24"/><ROW ID="798" TEXTSTR="  ms.shortname as msrname, cast(&apos;&apos; as varchar(64)) as whname," LINEID="25"/><ROW ID="798" TEXTSTR="  cast(s.artikul as varchar(80)), c.shortname as currname, cr.onvalue, 1 as postype," LINEID="26"/><ROW ID="798" TEXTSTR="  wbs.norm, cast(&apos;&apos; as varchar(255)), cast(&apos;&apos; as varchar(64))," LINEID="27"/><ROW ID="798" TEXTSTR="  cast(&apos;&apos; as varchar(64)), cast(null as date)," LINEID="28"/><ROW ID="798" TEXTSTR="  cast(null as double precision), cast(null as double precision)," LINEID="29"/><ROW ID="798" TEXTSTR="  cast(&apos;&apos; as varchar(255))" LINEID="30"/><ROW ID="798" TEXTSTR="from waybillsvc wbs" LINEID="31"/><ROW ID="798" TEXTSTR="  join services s on s.svcid=wbs.svcid" LINEID="32"/><ROW ID="798" TEXTSTR="  join measures ms on ms.mid=s.mid" LINEID="33"/><ROW ID="798" TEXTSTR="  join waybilllist wbl on wbl.wbillid=wbs.wbillid" LINEID="34"/><ROW ID="798" TEXTSTR="  join currency c on c.currid=wbs.currid" LINEID="35"/><ROW ID="798" TEXTSTR="  join currencyrate cr on c.currid=cr.currid" LINEID="36"/><ROW ID="798" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="37"/><ROW ID="798" TEXTSTR="  and cr.ondate=" LINEID="38"/><ROW ID="798" TEXTSTR="   (select max(ondate) from currencyrate" LINEID="39"/><ROW ID="798" TEXTSTR="     where currid=c.currid and ondate&lt;=wbl.ondate)" LINEID="40"/><ROW ID="798" TEXTSTR="" LINEID="41"/><ROW ID="798" TEXTSTR="order by 1" LINEID="42"/><ROW ID="798" TEXTSTR="" LINEID="43"/><ROW ID="802" TEXTSTR="select * from wbtorg12params" LINEID="0"/><ROW ID="803" TEXTSTR="select * from wbtorg12 where wbillid=:wbillid" LINEID="0"/><ROW ID="692" TEXTSTR="select aa.*, b.mfo, b.name, b.coracc" LINEID="0"/><ROW ID="692" TEXTSTR=" from agentaccount aa, banks b" LINEID="1"/><ROW ID="692" TEXTSTR=" where aa.bankid=b.bankid" LINEID="2"/><ROW ID="692" TEXTSTR="  and aa.kaid=:kaid" LINEID="3"/><ROW ID="805" TEXTSTR="delete from wbtorg12 where wbillid=:wbillid" LINEID="0"/><ROW ID="806" TEXTSTR="insert into wbtorg12params" LINEID="0"/><ROW ID="806" TEXTSTR=" (okud, okdp, doccount)" LINEID="1"/><ROW ID="806" TEXTSTR=" values" LINEID="2"/><ROW ID="806" TEXTSTR=" (:okud, :okdp, :doccount)" LINEID="3"/><ROW ID="806" TEXTSTR="" LINEID="4"/><ROW ID="807" TEXTSTR="delete from wbtorg12params" LINEID="0"/><ROW ID="604" TEXTSTR="select wbl.wbillid as pid, wbl2.*" LINEID="0"/><ROW ID="604" TEXTSTR="  from waybilllist wbl" LINEID="1"/><ROW ID="604" TEXTSTR="   join docsrel dr on dr.rdocid=wbl.docid" LINEID="2"/><ROW ID="604" TEXTSTR="   join waybilllist wbl2 on wbl2.docid=dr.docid" LINEID="3"/><ROW ID="604" TEXTSTR=" where wbl.deleted=0" LINEID="4"/><ROW ID="604" TEXTSTR="  and wbl.WTYPE=7" LINEID="5"/><ROW ID="604" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="6"/><ROW ID="604" TEXTSTR="" LINEID="7"/><ROW ID="605" TEXTSTR="select * from sp_get_reldoclist(:docid)" LINEID="0"/><ROW ID="808" TEXTSTR="select * from waybilllist where docid=:docid" LINEID="0"/><ROW ID="809" TEXTSTR="select wbillid from waybilllist where docid=:docid" LINEID="0"/><ROW ID="318" TEXTSTR="select pdoc.*, ka.name, c.shortname, pt.name as typename" LINEID="0"/><ROW ID="318" TEXTSTR="from docsrel dr" LINEID="1"/><ROW ID="318" TEXTSTR=" join paydoc pdoc on pdoc.docid=dr.rdocid" LINEID="2"/><ROW ID="318" TEXTSTR=" join currency c on c.currid=pdoc.currid" LINEID="3"/><ROW ID="318" TEXTSTR=" join paytype pt on pt.ptypeid=pdoc.ptypeid" LINEID="4"/><ROW ID="318" TEXTSTR=" join waybilllist wbl on dr.docid=wbl.docid" LINEID="5"/><ROW ID="318" TEXTSTR=" left outer join kagent ka on ka.kaid=pdoc.mpersonid" LINEID="6"/><ROW ID="318" TEXTSTR="where wbl.wbillid=:wbillid" LINEID="7"/><ROW ID="318" TEXTSTR="  and pdoc.deleted=0" LINEID="8"/><ROW ID="318" TEXTSTR="" LINEID="9"/><ROW ID="323" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="323" TEXTSTR="  values" LINEID="1"/><ROW ID="323" TEXTSTR="  (" LINEID="2"/><ROW ID="323" TEXTSTR="   (select docid from waybilllist where wbillid=:wbillid)," LINEID="3"/><ROW ID="323" TEXTSTR="   (select docid from paydoc where paydocid=:paydocid)" LINEID="4"/><ROW ID="323" TEXTSTR="  )" LINEID="5"/><ROW ID="323" TEXTSTR="" LINEID="6"/><ROW ID="810" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="810" TEXTSTR="  values" LINEID="1"/><ROW ID="810" TEXTSTR="  (" LINEID="2"/><ROW ID="810" TEXTSTR="   (select docid from waybilllist where wbillid=:wbillid)," LINEID="3"/><ROW ID="810" TEXTSTR="   (select docid from waybilllist where wbillid=:accid)" LINEID="4"/><ROW ID="810" TEXTSTR="  )" LINEID="5"/><ROW ID="737" TEXTSTR="delete from docsrel where rdocid=" LINEID="0"/><ROW ID="737" TEXTSTR=" (select docid from paydoc where paydocid=:paydocid)" LINEID="1"/><ROW ID="460" TEXTSTR="select * from sp_contr_upd(:DOCID,:PDOCID,:KAID,:ONDATE,:NUM," LINEID="0"/><ROW ID="460" TEXTSTR=":CHECKED,:DELETED,:FPATH,:SHIPPEDSUMM,:PAIDSUMM,:SHIPPEDAMOUNT," LINEID="1"/><ROW ID="460" TEXTSTR=":NOTES,:CURRID,:PERSONID,:DOCTYPE,:TODATE,:SUMM,:AMOUNT," LINEID="2"/><ROW ID="460" TEXTSTR=":ISMANUALSUMM,:ISMANUALAMOUNT,:ISEXTERNAL)" LINEID="3"/><ROW ID="461" TEXTSTR="update contracts" LINEID="0"/><ROW ID="461" TEXTSTR="set CHECKED=:CHECKED" LINEID="1"/><ROW ID="461" TEXTSTR="where docid=:docid" LINEID="2"/><ROW ID="813" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="813" TEXTSTR="  values" LINEID="1"/><ROW ID="813" TEXTSTR="  (" LINEID="2"/><ROW ID="813" TEXTSTR="   (select docid from waybilllist where wbillid=:wbillid)," LINEID="3"/><ROW ID="813" TEXTSTR="   (select docid from waybilllist where wbillid=:invid)" LINEID="4"/><ROW ID="813" TEXTSTR="  )" LINEID="5"/><ROW ID="816" TEXTSTR="select * from kagent where jobtype is not null" LINEID="0"/><ROW ID="815" TEXTSTR="select *" LINEID="0"/><ROW ID="815" TEXTSTR=" from actives where ondate=" LINEID="1"/><ROW ID="815" TEXTSTR="  (select max(ondate) from actives where ondate&lt;=:ondate)" LINEID="2"/><ROW ID="817" TEXTSTR="select * from sp_recalc_actives(:ondate)" LINEID="0"/><ROW ID="818" TEXTSTR="select * from actives where ondate=:ondate" LINEID="0"/><ROW ID="819" TEXTSTR="select * from sp_get_actives(:fromdate, :todate)" LINEID="0"/><ROW ID="811" TEXTSTR="select * from SP_CONTRDET_UPD(:cdid,:docid,:matid,:amount,:price,:currid,:shippedamount,:nds)" LINEID="0"/><ROW ID="824" TEXTSTR="select distinct wbl.kaid, ka.name as kaname," LINEID="0"/><ROW ID="824" TEXTSTR="       wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate" LINEID="1"/><ROW ID="824" TEXTSTR="from waybilllist wbl" LINEID="2"/><ROW ID="824" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="3"/><ROW ID="824" TEXTSTR=" join waybilldet wbd on wbd.wbillid=wbl.wbillid and wbd.matid=:matid" LINEID="4"/><ROW ID="824" TEXTSTR="where wbl.deleted=0" LINEID="5"/><ROW ID="824" TEXTSTR="      and wbl.wtype in (-1,6)" LINEID="6"/><ROW ID="824" TEXTSTR="      and wbl.checked=1" LINEID="7"/><ROW ID="824" TEXTSTR="      and (wbl.ondate between :fromdate and :todate)" LINEID="8"/><ROW ID="824" TEXTSTR="      %m" LINEID="9"/><ROW ID="824" TEXTSTR="order by wbl.kaid, wbl.ondate" LINEID="10"/><ROW ID="825" TEXTSTR="select distinct wbl.kaid, ka.name as kaname," LINEID="0"/><ROW ID="825" TEXTSTR="       wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate" LINEID="1"/><ROW ID="825" TEXTSTR="from waybilllist wbl" LINEID="2"/><ROW ID="825" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="3"/><ROW ID="825" TEXTSTR=" join waybillsvc wbs on wbs.wbillid=wbl.wbillid and wbs.svcid=:svcid" LINEID="4"/><ROW ID="825" TEXTSTR="where wbl.deleted=0" LINEID="5"/><ROW ID="825" TEXTSTR="      and wbl.wtype in (-1,6)" LINEID="6"/><ROW ID="825" TEXTSTR="      and wbl.checked=1" LINEID="7"/><ROW ID="825" TEXTSTR="      and (wbl.ondate between :fromdate and :todate)" LINEID="8"/><ROW ID="825" TEXTSTR="      %m" LINEID="9"/><ROW ID="825" TEXTSTR="order by wbl.kaid, wbl.ondate" LINEID="10"/><ROW ID="828" TEXTSTR="select distinct wbl.kaid, ka.name as kaname," LINEID="0"/><ROW ID="828" TEXTSTR="       wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate" LINEID="1"/><ROW ID="828" TEXTSTR="from waybilllist wbl" LINEID="2"/><ROW ID="828" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="3"/><ROW ID="828" TEXTSTR=" join waybilldet wbd on wbd.wbillid=wbl.wbillid and wbd.matid=:matid" LINEID="4"/><ROW ID="828" TEXTSTR="where wbl.deleted=0" LINEID="5"/><ROW ID="828" TEXTSTR="      and wbl.wtype in (1,-6)" LINEID="6"/><ROW ID="828" TEXTSTR="      and wbl.checked=1" LINEID="7"/><ROW ID="828" TEXTSTR="      and (wbl.ondate between :fromdate and :todate)" LINEID="8"/><ROW ID="828" TEXTSTR="      %m" LINEID="9"/><ROW ID="828" TEXTSTR="order by wbl.kaid, wbl.ondate" LINEID="10"/><ROW ID="829" TEXTSTR="select distinct wbl.kaid, ka.name as kaname," LINEID="0"/><ROW ID="829" TEXTSTR="       wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate" LINEID="1"/><ROW ID="829" TEXTSTR="from waybilllist wbl" LINEID="2"/><ROW ID="829" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="3"/><ROW ID="829" TEXTSTR=" join waybillsvc wbs on wbs.wbillid=wbl.wbillid and wbs.svcid=:svcid" LINEID="4"/><ROW ID="829" TEXTSTR="where wbl.deleted=0" LINEID="5"/><ROW ID="829" TEXTSTR="      and wbl.wtype in (1,-6)" LINEID="6"/><ROW ID="829" TEXTSTR="      and wbl.checked=1" LINEID="7"/><ROW ID="829" TEXTSTR="      and (wbl.ondate between :fromdate and :todate)" LINEID="8"/><ROW ID="829" TEXTSTR="      %m" LINEID="9"/><ROW ID="829" TEXTSTR="order by wbl.kaid, wbl.ondate" LINEID="10"/><ROW ID="598" TEXTSTR="select ea.*, ea.num as accnum, b.name, b.mfo, b.coracc" LINEID="0"/><ROW ID="598" TEXTSTR=" from entaccounts ea, banks b" LINEID="1"/><ROW ID="598" TEXTSTR=" where b.bankid=ea.bankid" LINEID="2"/><ROW ID="830" TEXTSTR="select wbd.price, wbd.currid" LINEID="0"/><ROW ID="830" TEXTSTR=" from wmatturn wm, waybilldet wbd" LINEID="1"/><ROW ID="830" TEXTSTR=" where wm.matid=:matid" LINEID="2"/><ROW ID="830" TEXTSTR="   and wm.turntype in (1, 3)" LINEID="3"/><ROW ID="830" TEXTSTR="   and wm.posid=wbd.posid" LINEID="4"/><ROW ID="830" TEXTSTR="   and wbd.ondate=" LINEID="5"/><ROW ID="830" TEXTSTR="  (select max(wbd1.ondate)" LINEID="6"/><ROW ID="830" TEXTSTR="    from waybilldet wbd1, waybilllist wbl" LINEID="7"/><ROW ID="830" TEXTSTR="    where wbd1.matid=:matid" LINEID="8"/><ROW ID="830" TEXTSTR="     and wbl.wbillid=wbd1.wbillid" LINEID="9"/><ROW ID="830" TEXTSTR="     and wbd1.ondate&lt;=:ondate" LINEID="10"/><ROW ID="830" TEXTSTR="     and wbl.wtype in (1, 5))" LINEID="11"/><ROW ID="835" TEXTSTR="select * from taxes where taxid=:taxid" LINEID="0"/><ROW ID="836" TEXTSTR="select * from taxes where deleted=0" LINEID="0"/><ROW ID="837" TEXTSTR="delete from mattaxes where matid=:matid" LINEID="0"/><ROW ID="838" TEXTSTR="delete from matgrouptaxes where grpid=:grpid" LINEID="0"/><ROW ID="839" TEXTSTR="insert into mattaxes (matid, taxid, onvalue)" LINEID="0"/><ROW ID="839" TEXTSTR=" values (:matid, :taxid, :onvalue)" LINEID="1"/><ROW ID="840" TEXTSTR="insert into matgrouptaxes (grpid, taxid, onvalue)" LINEID="0"/><ROW ID="840" TEXTSTR=" values (:grpid, :taxid, :onvalue)" LINEID="1"/><ROW ID="841" TEXTSTR="select * from matgrouptaxes where grpid=:grpid" LINEID="0"/><ROW ID="842" TEXTSTR="select * from sp_get_mat_taxes(:matid)" LINEID="0"/><ROW ID="845" TEXTSTR="insert into waybilldettaxes (posid, taxid, onvalue)" LINEID="0"/><ROW ID="845" TEXTSTR=" values (:posid, :taxid, :onvalue)" LINEID="1"/><ROW ID="846" TEXTSTR="select wbdt.*" LINEID="0"/><ROW ID="846" TEXTSTR=" from waybilldet wbd, waybilldettaxes wbdt" LINEID="1"/><ROW ID="846" TEXTSTR=" where wbd.wbillid=:wbillid" LINEID="2"/><ROW ID="846" TEXTSTR="  and wbdt.posid=wbd.posid" LINEID="3"/><ROW ID="847" TEXTSTR="select * from sp_wbd_get_out(:wbillid)" LINEID="0"/><ROW ID="680" TEXTSTR="select * from sp_wbd_get_out_p2(:wbillid)" LINEID="0"/><ROW ID="787" TEXTSTR="select * from sp_wbd_get_acc(:wbillid)" LINEID="0"/><ROW ID="833" TEXTSTR="insert into taxes (taxid, name, onvalue, taxtype, deleted)" LINEID="0"/><ROW ID="833" TEXTSTR="values (:taxid, :name, :onvalue, :taxtype, 0)" LINEID="1"/><ROW ID="834" TEXTSTR="update taxes set name=:name, onvalue=:onvalue, taxtype=:taxtype" LINEID="0"/><ROW ID="834" TEXTSTR="  where taxid=:taxid" LINEID="1"/><ROW ID="850" TEXTSTR="select taxid, name, onvalue, onvalue as taxsum" LINEID="0"/><ROW ID="850" TEXTSTR="  from taxes" LINEID="1"/><ROW ID="850" TEXTSTR="  where deleted=0" LINEID="2"/><ROW ID="388" TEXTSTR="select name, fullname, ptypeid, ktype" LINEID="0"/><ROW ID="388" TEXTSTR="from KAgent" LINEID="1"/><ROW ID="388" TEXTSTR="where KAID=:KAID" LINEID="2"/><ROW ID="324" TEXTSTR="select wbl.wtype, wbl.wbillid" LINEID="0"/><ROW ID="324" TEXTSTR=" from docsrel dr, waybilllist wbl, paydoc pd" LINEID="1"/><ROW ID="324" TEXTSTR=" where dr.rdocid=pd.docid" LINEID="2"/><ROW ID="324" TEXTSTR="   and pd.paydocid=:paydocid" LINEID="3"/><ROW ID="324" TEXTSTR="   and dr.docid=wbl.docid" LINEID="4"/><ROW ID="570" TEXTSTR="select ea.*, ea.num as accnum, b.name, b.mfo, b.coracc" LINEID="0"/><ROW ID="570" TEXTSTR=" from entaccounts ea, banks b" LINEID="1"/><ROW ID="570" TEXTSTR=" where ea.accid=:accid" LINEID="2"/><ROW ID="570" TEXTSTR="  and b.bankid=ea.bankid" LINEID="3"/><ROW ID="853" TEXTSTR="delete from kaaddr where kaid=:kaid" LINEID="0"/><ROW ID="854" TEXTSTR="select * from kaaddr where kaid=:kaid" LINEID="0"/><ROW ID="450" TEXTSTR="select twbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="450" TEXTSTR="  mat.artikul, cast(20 as numeric(15,8)) as nds" LINEID="1"/><ROW ID="450" TEXTSTR="from taxwbdet twbdet, MATERIALS mat, MEASURES msr" LINEID="2"/><ROW ID="450" TEXTSTR="where twbdet.twbid=:twbid" LINEID="3"/><ROW ID="450" TEXTSTR="      and mat.matid=twbdet.matid" LINEID="4"/><ROW ID="450" TEXTSTR="      and msr.mid=mat.mid" LINEID="5"/><ROW ID="450" TEXTSTR="order by twbdetid" LINEID="6"/><ROW ID="633" TEXTSTR="select distinct wbl.wbillid as pwbid, wbl.wbillid as docid," LINEID="0"/><ROW ID="633" TEXTSTR="    CAST(wbl.num as varchar(128)) as name, wbl.ondate, wbl.wtype," LINEID="1"/><ROW ID="633" TEXTSTR="    wbl.checked, wbl.num, CAST(null as numeric(15,8)) as amount," LINEID="2"/><ROW ID="633" TEXTSTR="    CAST(null as integer) as posnum" LINEID="3"/><ROW ID="633" TEXTSTR="from waybilldet wbd, returnrel rr," LINEID="4"/><ROW ID="633" TEXTSTR="     waybilldet wbd2, waybilllist wbl" LINEID="5"/><ROW ID="633" TEXTSTR="where wbd.wbillid=:wbillid" LINEID="6"/><ROW ID="633" TEXTSTR="and rr.outposid=wbd.posid" LINEID="7"/><ROW ID="633" TEXTSTR="and wbd2.posid=rr.posid" LINEID="8"/><ROW ID="633" TEXTSTR="and wbl.wbillid=wbd2.wbillid" LINEID="9"/><ROW ID="633" TEXTSTR="" LINEID="10"/><ROW ID="633" TEXTSTR="union all" LINEID="11"/><ROW ID="633" TEXTSTR="" LINEID="12"/><ROW ID="633" TEXTSTR="select wbd2.wbillid as pwbid, wbd2.posid as docid," LINEID="13"/><ROW ID="633" TEXTSTR="    CAST(mats.name as varchar(128)) as name," LINEID="14"/><ROW ID="633" TEXTSTR="    CAST(null as timestamp) as ondate, CAST(-100 as integer) as wtype," LINEID="15"/><ROW ID="633" TEXTSTR="    CAST(-1 as integer) as checked, CAST(null as varchar(20)) as num," LINEID="16"/><ROW ID="633" TEXTSTR="    CAST(wbd2.amount as numeric(15,8)) as amount, wbd2.num as posnum" LINEID="17"/><ROW ID="633" TEXTSTR="from waybilldet wbd, returnrel rr," LINEID="18"/><ROW ID="633" TEXTSTR="     waybilldet wbd2, waybilllist wbl, materials mats" LINEID="19"/><ROW ID="633" TEXTSTR="where wbd.wbillid=:wbillid" LINEID="20"/><ROW ID="633" TEXTSTR="and rr.outposid=wbd.posid" LINEID="21"/><ROW ID="633" TEXTSTR="and wbd2.posid=rr.posid" LINEID="22"/><ROW ID="633" TEXTSTR="and wbl.wbillid=wbd2.wbillid" LINEID="23"/><ROW ID="633" TEXTSTR="and mats.matid=wbd2.matid" LINEID="24"/><ROW ID="633" TEXTSTR="" LINEID="25"/><ROW ID="633" TEXTSTR="order by 4,9" LINEID="26"/><ROW ID="633" TEXTSTR="" LINEID="27"/><ROW ID="804" TEXTSTR="insert into wbtorg12" LINEID="0"/><ROW ID="804" TEXTSTR=" (wbillid, docnum, docdate, okud, okdp, appx, appx2, placecount," LINEID="1"/><ROW ID="804" TEXTSTR="  att, netto, brutto, shipkaid, shipentid, buhid, dirid, shipid," LINEID="2"/><ROW ID="804" TEXTSTR="  shipkaaddrid, shipkaaccid, kaaddrid, kaaccid)" LINEID="3"/><ROW ID="804" TEXTSTR="values" LINEID="4"/><ROW ID="804" TEXTSTR=" (:wbillid, :docnum, :docdate, :okud, :okdp, :appx, :appx2, :placecount," LINEID="5"/><ROW ID="804" TEXTSTR="  :att, :netto, :brutto, :shipkaid, :shipentid, :buhid, :dirid, :shipid," LINEID="6"/><ROW ID="804" TEXTSTR="  :shipkaaddrid, :shipkaaccid, :kaaddrid, :kaaccid)" LINEID="7"/><ROW ID="804" TEXTSTR="" LINEID="8"/><ROW ID="857" TEXTSTR="select count(kaid) from kagent where ktype=3 and deleted=0" LINEID="0"/><ROW ID="858" TEXTSTR="update kagent set def=:def where kaid=:kaid" LINEID="0"/><ROW ID="852" TEXTSTR="insert into kaaddr" LINEID="0"/><ROW ID="852" TEXTSTR=" (addrid, kaid, addrtype, country, city, district, address, postindex)" LINEID="1"/><ROW ID="852" TEXTSTR=" values" LINEID="2"/><ROW ID="852" TEXTSTR=" (:addrid, :kaid, :addrtype, :country, :city, :district, :address, :postindex)" LINEID="3"/><ROW ID="852" TEXTSTR="" LINEID="4"/><ROW ID="859" TEXTSTR="select * from kagent where def=1 and ktype=3 and deleted=0" LINEID="0"/><ROW ID="860" TEXTSTR="select kaid from kagent where ktype=3 and deleted=0" LINEID="0"/><ROW ID="861" TEXTSTR="update kagent set def=0 where def=1 and ktype=3" LINEID="0"/><ROW ID="337" TEXTSTR="select aa.*, b.name, b.coracc, b.mfo" LINEID="0"/><ROW ID="337" TEXTSTR="  from agentaccount aa, banks b" LINEID="1"/><ROW ID="337" TEXTSTR="  where aa.accid=:accid" LINEID="2"/><ROW ID="337" TEXTSTR="   and b.bankid=aa.bankid" LINEID="3"/><ROW ID="864" TEXTSTR="select c.*, d.doctype" LINEID="0"/><ROW ID="864" TEXTSTR=" from contracts c, docs d" LINEID="1"/><ROW ID="864" TEXTSTR=" where c.docid=:docid" LINEID="2"/><ROW ID="864" TEXTSTR="  and d.docid=c.docid" LINEID="3"/><ROW ID="227" TEXTSTR="insert into WaybillList" LINEID="0"/><ROW ID="227" TEXTSTR="(WBILLID, NUM, ONDATE, KAID, CURRID, ATTNUM, ATTDATE, REASON, PERSONID, CHECKED," LINEID="1"/><ROW ID="227" TEXTSTR=" DELETED, SUMMALL, WTYPE, NDS, RECEIVED, TODATE, DEFNUM, NOTES)" LINEID="2"/><ROW ID="227" TEXTSTR="  values" LINEID="3"/><ROW ID="227" TEXTSTR="(:WBILLID, :NUM, :ONDATE, :KAID, :CURRID, :ATTNUM, :ATTDATE, :REASON, :PERSONID, :CHECKED," LINEID="4"/><ROW ID="227" TEXTSTR=" :DELETED, :SUMMALL, :WTYPE, :NDS, :RECEIVED, :TODATE, :DEFNUM, :NOTES)" LINEID="5"/><ROW ID="227" TEXTSTR="" LINEID="6"/><ROW ID="867" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="867" TEXTSTR="  values" LINEID="1"/><ROW ID="867" TEXTSTR="  (" LINEID="2"/><ROW ID="867" TEXTSTR="   (select docid from waybilllist where wbillid=:wbillid)," LINEID="3"/><ROW ID="867" TEXTSTR="   :docid" LINEID="4"/><ROW ID="867" TEXTSTR="  )" LINEID="5"/><ROW ID="868" TEXTSTR="delete from docsrel" LINEID="0"/><ROW ID="868" TEXTSTR=" where docid=(select docid from waybilllist where wbillid=:wbillid)" LINEID="1"/><ROW ID="868" TEXTSTR="  and rdocid=:docid" LINEID="2"/><ROW ID="869" TEXTSTR="select dr.rdocid" LINEID="0"/><ROW ID="869" TEXTSTR=" from docsrel dr, waybilllist wbl, docs d" LINEID="1"/><ROW ID="869" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="2"/><ROW ID="869" TEXTSTR="  and dr.docid=wbl.docid" LINEID="3"/><ROW ID="869" TEXTSTR="  and dr.rdocid=d.docid" LINEID="4"/><ROW ID="869" TEXTSTR="  and d.doctype=:doctype" LINEID="5"/><ROW ID="812" TEXTSTR="select cd.*, mats.name as matname, mats.artikul, mats.barcode," LINEID="0"/><ROW ID="812" TEXTSTR="c.shortname as currname, msr.shortname as msrname," LINEID="1"/><ROW ID="812" TEXTSTR="cd.cdid as posid, cd.docid as wbillid," LINEID="2"/><ROW ID="812" TEXTSTR="cast(null as integer) as wid," LINEID="3"/><ROW ID="812" TEXTSTR="cast (null as varchar(64)) as whname, cr.onvalue" LINEID="4"/><ROW ID="812" TEXTSTR="from contrdet cd" LINEID="5"/><ROW ID="812" TEXTSTR="join contracts cntr on cntr.docid=cd.docid" LINEID="6"/><ROW ID="812" TEXTSTR="left outer join currency c on c.currid=cd.currid" LINEID="7"/><ROW ID="812" TEXTSTR="left outer join currencyrate cr on cr.currid=c.currid" LINEID="8"/><ROW ID="812" TEXTSTR="                and cr.ondate=(select max(cr2.ondate) from currencyrate cr2" LINEID="9"/><ROW ID="812" TEXTSTR="                               where cr2.currid=c.currid and cr2.ondate&lt;=cntr.ondate)" LINEID="10"/><ROW ID="812" TEXTSTR="join materials mats on mats.matid=cd.matid" LINEID="11"/><ROW ID="812" TEXTSTR="join measures msr on msr.mid=mats.mid" LINEID="12"/><ROW ID="812" TEXTSTR="where cd.docid=:docid" LINEID="13"/><ROW ID="870" TEXTSTR="select c.*, d.doctype" LINEID="0"/><ROW ID="870" TEXTSTR="  from contracts c, docs d" LINEID="1"/><ROW ID="870" TEXTSTR="  where c.kaid=:kaid" LINEID="2"/><ROW ID="870" TEXTSTR="    and c.docid=d.docid" LINEID="3"/><ROW ID="870" TEXTSTR="    and c.checked=1" LINEID="4"/><ROW ID="870" TEXTSTR="    and c.deleted=0" LINEID="5"/><ROW ID="690" TEXTSTR="select * from sp_mat_list(:grp, :getprices, :getarchived)" LINEID="0"/><ROW ID="871" TEXTSTR="select * from sp_get_reldoclist_c(:docid)" LINEID="0"/><ROW ID="872" TEXTSTR="update materials set archived=:archived" LINEID="0"/><ROW ID="872" TEXTSTR="  where matid=:matid" LINEID="1"/><ROW ID="873" TEXTSTR="select mr.remain" LINEID="0"/><ROW ID="873" TEXTSTR="  from matremains mr" LINEID="1"/><ROW ID="873" TEXTSTR="  where mr.matid=:MATID and mr.ondate=" LINEID="2"/><ROW ID="873" TEXTSTR="   (select max(ondate) from matremains where matid=:MATID" LINEID="3"/><ROW ID="873" TEXTSTR="       and ondate&lt;=:ONDATE)" LINEID="4"/><ROW ID="874" TEXTSTR="execute procedure sp_recalc_contrresults(:docid)" LINEID="0"/><ROW ID="875" TEXTSTR="select * from sp_get_relcontrid(:DOCID)" LINEID="0"/><ROW ID="876" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="876" TEXTSTR="  values" LINEID="1"/><ROW ID="876" TEXTSTR="  (" LINEID="2"/><ROW ID="876" TEXTSTR="   :docid," LINEID="3"/><ROW ID="876" TEXTSTR="   (select docid from paydoc where paydocid=:paydocid)" LINEID="4"/><ROW ID="876" TEXTSTR="  )" LINEID="5"/><ROW ID="876" TEXTSTR="" LINEID="6"/><ROW ID="750" TEXTSTR="update waybilldetaddprops set producer=:producer, gtd=:gtd," LINEID="0"/><ROW ID="750" TEXTSTR="  certnum=:certnum, certdate=:certdate" LINEID="1"/><ROW ID="750" TEXTSTR=" where posid=:posid" LINEID="2"/><ROW ID="878" TEXTSTR="insert into warrantydet (wdocid, posid)" LINEID="0"/><ROW ID="878" TEXTSTR="  select :wdocid, wbd.posid" LINEID="1"/><ROW ID="878" TEXTSTR="    from waybilldet wbd, waybilldetaddprops wbdap" LINEID="2"/><ROW ID="878" TEXTSTR="    where wbd.wbillid=:wbillid" LINEID="3"/><ROW ID="878" TEXTSTR="     and wbd.posid=wbdap.posid" LINEID="4"/><ROW ID="878" TEXTSTR="     and wbdap.warrantyperiod is not null" LINEID="5"/><ROW ID="879" TEXTSTR="select * from warrantydocs where wbillid=:wbillid" LINEID="0"/><ROW ID="880" TEXTSTR="insert into warrantydocs (wdocid, wbillid, num)" LINEID="0"/><ROW ID="880" TEXTSTR=" values (:wdocid, :wbillid, :num)" LINEID="1"/><ROW ID="881" TEXTSTR="select wd.wdocid, wd.num, wbl.ondate, ka.name, ka.fullname," LINEID="0"/><ROW ID="881" TEXTSTR="  wbl.entid" LINEID="1"/><ROW ID="881" TEXTSTR=" from warrantydocs wd, waybilllist wbl, kagent ka" LINEID="2"/><ROW ID="881" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="3"/><ROW ID="881" TEXTSTR="   and wbl.wbillid=wd.wbillid" LINEID="4"/><ROW ID="881" TEXTSTR="   and wbl.kaid=ka.kaid" LINEID="5"/><ROW ID="881" TEXTSTR="" LINEID="6"/><ROW ID="161" TEXTSTR="insert into AgentPersons" LINEID="0"/><ROW ID="161" TEXTSTR=" (PersonId, KAID, Name, Post, Phone, Email, Notes, jobtype)" LINEID="1"/><ROW ID="161" TEXTSTR="values" LINEID="2"/><ROW ID="161" TEXTSTR=" (:PersonId, :KAID, :Name, :Post, :Phone, :Email, :Notes, :jobtype)" LINEID="3"/><ROW ID="883" TEXTSTR="select cd.matid, cd.amount-cd.shippedamount as remain," LINEID="0"/><ROW ID="883" TEXTSTR="  cd.amount, cd.shippedamount, cd.price, cd.nds" LINEID="1"/><ROW ID="883" TEXTSTR=" from contrdet cd" LINEID="2"/><ROW ID="883" TEXTSTR=" where cd.docid=:docid" LINEID="3"/><ROW ID="877" TEXTSTR="select dr.docid" LINEID="0"/><ROW ID="877" TEXTSTR=" from docsrel dr, paydoc pd, docs d" LINEID="1"/><ROW ID="877" TEXTSTR=" where pd.paydocid=:paydocid" LINEID="2"/><ROW ID="877" TEXTSTR="  and dr.rdocid=pd.docid" LINEID="3"/><ROW ID="877" TEXTSTR="  and dr.docid=d.docid" LINEID="4"/><ROW ID="877" TEXTSTR="  and d.doctype in (8, -8)" LINEID="5"/><ROW ID="877" TEXTSTR="" LINEID="6"/><ROW ID="884" TEXTSTR="select aa.*, b.mfo, b.name, act.name as typename" LINEID="0"/><ROW ID="884" TEXTSTR=" from agentaccount aa, banks b, accounttype act, kagent ka" LINEID="1"/><ROW ID="884" TEXTSTR=" where aa.bankid=b.bankid" LINEID="2"/><ROW ID="884" TEXTSTR="  and act.typeid=aa.typeid" LINEID="3"/><ROW ID="884" TEXTSTR="  and ka.kaid=aa.kaid" LINEID="4"/><ROW ID="884" TEXTSTR="  and ka.ktype=3" LINEID="5"/><ROW ID="884" TEXTSTR="  and ka.kaid=:kaid" LINEID="6"/><ROW ID="456" TEXTSTR="select cntr.*, ka.name kaname, ka.fullname kafullname," LINEID="0"/><ROW ID="456" TEXTSTR="ka.phone kaphone, ka.ADDRESS, ka.city, ka.district," LINEID="1"/><ROW ID="456" TEXTSTR="ka.country, ka.postindex, ka.fax, ka.email, ka.www," LINEID="2"/><ROW ID="456" TEXTSTR="ka.ktype katype, kaemp.name personname, curr.shortname as currname," LINEID="3"/><ROW ID="456" TEXTSTR="cp.summ as summall,cp.amount, cr.shippedsumm, cr.shippedamount," LINEID="4"/><ROW ID="456" TEXTSTR="cr.paidsumm, d.doctype, cp.todate," LINEID="5"/><ROW ID="456" TEXTSTR="cast(abs(coalesce(cp.amount,0))-abs(coalesce(cr.shippedamount,0))as numeric(15,8)) as rest," LINEID="6"/><ROW ID="456" TEXTSTR="cast(abs(coalesce(cp.summ,0))-abs(coalesce(cr.shippedsumm,0))as numeric(15,8)) as summrest" LINEID="7"/><ROW ID="456" TEXTSTR="" LINEID="8"/><ROW ID="456" TEXTSTR="from contracts cntr" LINEID="9"/><ROW ID="456" TEXTSTR="join contrparams cp on cp.docid=cntr.docid" LINEID="10"/><ROW ID="456" TEXTSTR="left outer join kagent kaemp on cntr.personid=kaemp.kaid" LINEID="11"/><ROW ID="456" TEXTSTR="join currency curr on curr.currid= cntr.currid" LINEID="12"/><ROW ID="456" TEXTSTR="join kagent ka on ka.kaid=cntr.kaid" LINEID="13"/><ROW ID="456" TEXTSTR="join docs d on d.docid=cntr.docid and d.doctype=:doctype" LINEID="14"/><ROW ID="456" TEXTSTR="join contrresults cr on cr.docid=cntr.docid" LINEID="15"/><ROW ID="456" TEXTSTR="where cntr.deleted=0" LINEID="16"/><ROW ID="456" TEXTSTR="and (cntr.ondate between :fromdate and :todate)" LINEID="17"/><ROW ID="456" TEXTSTR=" %m" LINEID="18"/><ROW ID="729" TEXTSTR="select sum(cast(pd.total as double precision)*pd.doctype/abs(pd.doctype)) as total, c.currid, c.shortname," LINEID="0"/><ROW ID="729" TEXTSTR=" c.name" LINEID="1"/><ROW ID="729" TEXTSTR=" from paydoc pd, currency c" LINEID="2"/><ROW ID="729" TEXTSTR=" where pd.checked=1" LINEID="3"/><ROW ID="729" TEXTSTR="  and pd.ondate&lt;=:ondate" LINEID="4"/><ROW ID="729" TEXTSTR="  and c.currid=pd.currid" LINEID="5"/><ROW ID="729" TEXTSTR="  and pd.ptypeid=:ptypeid" LINEID="6"/><ROW ID="729" TEXTSTR=" group by c.currid, c.shortname, c.name" LINEID="7"/><ROW ID="886" TEXTSTR="select wbl.*, ka.name as kaname, ka.inn as kainn, ka.kpp as kakpp," LINEID="0"/><ROW ID="886" TEXTSTR=" ip.*, ent.name as entname, ent.inn as entinn, ent.kpp as entkpp," LINEID="1"/><ROW ID="886" TEXTSTR=" shipka.name as shipkaname, shipka.inn as shipkainn, shipka.kpp as shipkakpp," LINEID="2"/><ROW ID="886" TEXTSTR=" shipent.name as shipentname, shipent.inn as shipentinn, shipent.kpp as shipentkpp" LINEID="3"/><ROW ID="886" TEXTSTR="from waybilllist wbl" LINEID="4"/><ROW ID="886" TEXTSTR=" join invoiceparams ip on ip.wbillid=wbl.wbillid" LINEID="5"/><ROW ID="886" TEXTSTR=" join kagent ent on ent.kaid=wbl.entid" LINEID="6"/><ROW ID="886" TEXTSTR=" join kagent shipent on shipent.kaid=ip.shipentid" LINEID="7"/><ROW ID="886" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="8"/><ROW ID="886" TEXTSTR=" join kagent shipka on shipka.kaid=ip.shipkaid" LINEID="9"/><ROW ID="886" TEXTSTR=" where wbl.deleted=0" LINEID="10"/><ROW ID="886" TEXTSTR="   and wbl.wtype=-9" LINEID="11"/><ROW ID="886" TEXTSTR="   and wbl.ondate between :fromdate and :todate" LINEID="12"/><ROW ID="886" TEXTSTR=" %m" LINEID="13"/><ROW ID="886" TEXTSTR="order by wbl.ondate desc" LINEID="14"/><ROW ID="458" TEXTSTR="select c.*, cp.todate, cp.summ, cp.amount, cp.ismanualsumm," LINEID="0"/><ROW ID="458" TEXTSTR="cp.ismanualamount,  cr.shippedsumm, cr.shippedamount, cr.paidsumm," LINEID="1"/><ROW ID="458" TEXTSTR="curr.shortname as currname, ka.name as kaname, ka.fullname as kafullname," LINEID="2"/><ROW ID="458" TEXTSTR="kap.name as personname, d.doctype as doctype" LINEID="3"/><ROW ID="458" TEXTSTR="from contracts c" LINEID="4"/><ROW ID="458" TEXTSTR="  join currency curr on curr.currid=c.currid" LINEID="5"/><ROW ID="458" TEXTSTR="  left outer join contrparams cp on cp.docid=c.docid" LINEID="6"/><ROW ID="458" TEXTSTR="  left outer join contrresults cr on cr.docid=c.docid" LINEID="7"/><ROW ID="458" TEXTSTR="  left outer join kagent ka on ka.kaid=c.kaid" LINEID="8"/><ROW ID="458" TEXTSTR="  left outer join kagent kap on kap.kaid=c.personid" LINEID="9"/><ROW ID="458" TEXTSTR="  join docs d on d.docid=c.docid" LINEID="10"/><ROW ID="458" TEXTSTR=" where c.docid=:docid" LINEID="11"/><ROW ID="887" TEXTSTR="delete from invoiceparams where wbillid=:wbillid" LINEID="0"/><ROW ID="888" TEXTSTR="insert into invoiceparams" LINEID="0"/><ROW ID="888" TEXTSTR=" (wbillid, shipentid, shipkaid, shipentaddrid, shipkaaddrid," LINEID="1"/><ROW ID="888" TEXTSTR="  entaddrid, kaaddrid)" LINEID="2"/><ROW ID="888" TEXTSTR=" values" LINEID="3"/><ROW ID="888" TEXTSTR=" (:wbillid, :shipentid, :shipkaid, :shipentaddrid, :shipkaaddrid," LINEID="4"/><ROW ID="888" TEXTSTR="  :entaddrid, :kaaddrid)" LINEID="5"/><ROW ID="888" TEXTSTR="" LINEID="6"/><ROW ID="889" TEXTSTR="select * from kaaddr where addrid=:addrid" LINEID="0"/><ROW ID="890" TEXTSTR="update kaaddr" LINEID="0"/><ROW ID="890" TEXTSTR=" set kaid=:kaid, addrtype=:addrtype, country=:country," LINEID="1"/><ROW ID="890" TEXTSTR="     city=:city, district=:district, address=:address," LINEID="2"/><ROW ID="890" TEXTSTR="     postindex=:postindex" LINEID="3"/><ROW ID="890" TEXTSTR=" where addrid=:addrid" LINEID="4"/><ROW ID="890" TEXTSTR="" LINEID="5"/><ROW ID="891" TEXTSTR="select wbl.*, ip.*" LINEID="0"/><ROW ID="891" TEXTSTR=" from waybilllist wbl, invoiceparams ip" LINEID="1"/><ROW ID="891" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="2"/><ROW ID="891" TEXTSTR="  and wbl.wbillid=ip.wbillid" LINEID="3"/><ROW ID="892" TEXTSTR="select * from invoiceparams where wbillid=:wbillid" LINEID="0"/><ROW ID="894" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="894" TEXTSTR="  values" LINEID="1"/><ROW ID="894" TEXTSTR="  (" LINEID="2"/><ROW ID="894" TEXTSTR="   (select docid from waybilllist where wbillid=:invid)," LINEID="3"/><ROW ID="894" TEXTSTR="   (select docid from waybilllist where wbillid=:wbillid)" LINEID="4"/><ROW ID="894" TEXTSTR="  )" LINEID="5"/><ROW ID="893" TEXTSTR="select * from sp_invoice_get_by_wbout(:wbillid, :ondate, :ids, :svc)" LINEID="0"/><ROW ID="321" TEXTSTR="delete from docsrel dr" LINEID="0"/><ROW ID="321" TEXTSTR=" where" LINEID="1"/><ROW ID="321" TEXTSTR="  dr.docid=(select docid from wabilllist where wbillid=:wbillid)" LINEID="2"/><ROW ID="321" TEXTSTR="   and" LINEID="3"/><ROW ID="321" TEXTSTR="  dr.rdocid in (select docid from docs)" LINEID="4"/><ROW ID="761" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="761" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="761" TEXTSTR="  curr.shortname as currname, cr.onvalue, 0 as postype," LINEID="2"/><ROW ID="761" TEXTSTR="  s.serialno as sn, wbdap.producer, mat.serials as bySN," LINEID="3"/><ROW ID="761" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.notes, wbdap.wirereelnum," LINEID="4"/><ROW ID="761" TEXTSTR="  mat.barcode, mat.archived, mat.grpid" LINEID="5"/><ROW ID="761" TEXTSTR="from WAYBILLDET wbdet" LINEID="6"/><ROW ID="761" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="7"/><ROW ID="761" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="8"/><ROW ID="761" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="9"/><ROW ID="761" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="761" TEXTSTR="     join currencyrate cr on curr.currid=cr.currid" LINEID="11"/><ROW ID="761" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="12"/><ROW ID="761" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="13"/><ROW ID="761" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="14"/><ROW ID="761" TEXTSTR="  and cr.ondate=" LINEID="15"/><ROW ID="761" TEXTSTR=" (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbdet.ondate)" LINEID="16"/><ROW ID="761" TEXTSTR="order by wbdet.num" LINEID="17"/><ROW ID="761" TEXTSTR="" LINEID="18"/><ROW ID="898" TEXTSTR="delete from waybilldet where posid=:posid" LINEID="0"/><ROW ID="900" TEXTSTR="delete from waybilldetaddprops where posid=:posid" LINEID="0"/><ROW ID="556" TEXTSTR="select count(wbdet.posid)" LINEID="0"/><ROW ID="556" TEXTSTR="from WMatTurn wmt, waybilldet wbdet" LINEID="1"/><ROW ID="556" TEXTSTR="where" LINEID="2"/><ROW ID="556" TEXTSTR="wbdet.wbillid=:wbillid" LINEID="3"/><ROW ID="556" TEXTSTR="and wmt.posid=wbdet.posid" LINEID="4"/><ROW ID="556" TEXTSTR="and wmt.turntype not in (1,3)" LINEID="5"/><ROW ID="556" TEXTSTR="" LINEID="6"/><ROW ID="770" TEXTSTR="select pr.matid, pr.wid, pr.posid, (pr.remain-pr.rsv) as amount, pr.rsv, wbd.ondate," LINEID="0"/><ROW ID="770" TEXTSTR="       wbd.price, wbd.currid, cr.onvalue, wbd.nds, wbd.discount, curr.shortname as currname," LINEID="1"/><ROW ID="770" TEXTSTR="       wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="2"/><ROW ID="770" TEXTSTR="       s.serialno as sn, wbl.wtype, wbl.wbillid," LINEID="3"/><ROW ID="770" TEXTSTR="       wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.producer, 0 as turntype, wbdap.notes" LINEID="4"/><ROW ID="770" TEXTSTR="from posremains pr" LINEID="5"/><ROW ID="770" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid" LINEID="6"/><ROW ID="770" TEXTSTR="     left outer join serials s on s.posid=pr.posid" LINEID="7"/><ROW ID="770" TEXTSTR="     join waybilldet wbd on wbd.posid=pr.posid" LINEID="8"/><ROW ID="770" TEXTSTR="     join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="9"/><ROW ID="770" TEXTSTR="     join warehouse wh on wh.wid=pr.wid" LINEID="10"/><ROW ID="770" TEXTSTR="     join currency curr on curr.currid=wbd.currid" LINEID="11"/><ROW ID="770" TEXTSTR="     join currencyrate cr on curr.currid=cr.currid" LINEID="12"/><ROW ID="770" TEXTSTR="     join materials mats on mats.matid=pr.matid" LINEID="13"/><ROW ID="770" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="14"/><ROW ID="770" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="15"/><ROW ID="770" TEXTSTR="                 from posremains" LINEID="16"/><ROW ID="770" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="17"/><ROW ID="770" TEXTSTR="      and pr.matid=:matid" LINEID="18"/><ROW ID="770" TEXTSTR="      and pr.wid=:wid" LINEID="19"/><ROW ID="770" TEXTSTR="      and wbl.wtype not in(4,6)" LINEID="20"/><ROW ID="770" TEXTSTR="      and cr.ondate=" LINEID="21"/><ROW ID="770" TEXTSTR="       (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate)" LINEID="22"/><ROW ID="770" TEXTSTR="      and pr.remain&gt;0" LINEID="23"/><ROW ID="770" TEXTSTR="" LINEID="24"/><ROW ID="770" TEXTSTR="union all" LINEID="25"/><ROW ID="770" TEXTSTR="" LINEID="26"/><ROW ID="770" TEXTSTR="select pr.matid, pr.wid, pr.posid, (pr.remain-pr.rsv) as amount, pr.rsv, wbl.ondate," LINEID="27"/><ROW ID="770" TEXTSTR="       wbd.price, wbd.currid, cr.onvalue, wbd.nds, wbd.discount," LINEID="28"/><ROW ID="770" TEXTSTR="       curr.shortname as currname, wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="29"/><ROW ID="770" TEXTSTR="       s.serialno as sn, wbl.wtype, wbl.wbillid," LINEID="30"/><ROW ID="770" TEXTSTR="       wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.producer, 0, wbdap.notes" LINEID="31"/><ROW ID="770" TEXTSTR="from posremains pr" LINEID="32"/><ROW ID="770" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid," LINEID="33"/><ROW ID="770" TEXTSTR="     waybilldet wbd, waybilllist wbl, warehouse wh," LINEID="34"/><ROW ID="770" TEXTSTR="     currency curr, currencyrate cr, materials mats, measures msr," LINEID="35"/><ROW ID="770" TEXTSTR="     extrel er" LINEID="36"/><ROW ID="770" TEXTSTR="     left outer join serials s on s.posid=er.extposid," LINEID="37"/><ROW ID="770" TEXTSTR="     waybilldet wbdext, waybilllist wblext" LINEID="38"/><ROW ID="770" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="39"/><ROW ID="770" TEXTSTR="                 from posremains" LINEID="40"/><ROW ID="770" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="41"/><ROW ID="770" TEXTSTR="      and pr.matid=:matid" LINEID="42"/><ROW ID="770" TEXTSTR="      and wbd.posid=pr.posid" LINEID="43"/><ROW ID="770" TEXTSTR="      and wbl.wbillid=wbd.wbillid" LINEID="44"/><ROW ID="770" TEXTSTR="      and wbl.wtype in (4,6)" LINEID="45"/><ROW ID="770" TEXTSTR="      and wh.wid=pr.wid" LINEID="46"/><ROW ID="770" TEXTSTR="      and curr.currid=wbd.currid" LINEID="47"/><ROW ID="770" TEXTSTR="      and curr.currid=cr.currid" LINEID="48"/><ROW ID="770" TEXTSTR="      and cr.ondate=" LINEID="49"/><ROW ID="770" TEXTSTR="      (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate)" LINEID="50"/><ROW ID="770" TEXTSTR="      and mats.matid=pr.matid" LINEID="51"/><ROW ID="770" TEXTSTR="      and msr.mid=mats.mid" LINEID="52"/><ROW ID="770" TEXTSTR="      and pr.remain&gt;0" LINEID="53"/><ROW ID="770" TEXTSTR="      and er.intposid=pr.posid" LINEID="54"/><ROW ID="770" TEXTSTR="      and wbdext.posid=er.extposid" LINEID="55"/><ROW ID="770" TEXTSTR="      and wblext.wbillid=wbdext.wbillid" LINEID="56"/><ROW ID="770" TEXTSTR="      and pr.wid=:wid" LINEID="57"/><ROW ID="770" TEXTSTR="" LINEID="58"/><ROW ID="770" TEXTSTR="order by 13 %d" LINEID="59"/><ROW ID="770" TEXTSTR="" LINEID="60"/><ROW ID="901" TEXTSTR="insert into wmatturn (posid, matid, wid, amount, ondate, turntype, sourceid)" LINEID="0"/><ROW ID="901" TEXTSTR=" values (:posid, :matid, :wid, :amount, :ondate, :turntype, :sourceid)" LINEID="1"/><ROW ID="902" TEXTSTR="delete from wmatturn where posid=:posid" LINEID="0"/><ROW ID="904" TEXTSTR="insert into wmatturn" LINEID="0"/><ROW ID="904" TEXTSTR=" (posid, wid, matid, sourceid, turntype, ondate, amount)" LINEID="1"/><ROW ID="904" TEXTSTR=" select wbd.posid, wbd.wid, wbd.matid, wbd.posid, 3, wbl.ondate, wbd.amount" LINEID="2"/><ROW ID="904" TEXTSTR="  from waybilllist wbl, waybilldet wbd" LINEID="3"/><ROW ID="904" TEXTSTR="  where wbl.wbillid=:wbillid" LINEID="4"/><ROW ID="904" TEXTSTR="    and wbl.wbillid=wbd.wbillid" LINEID="5"/><ROW ID="904" TEXTSTR="" LINEID="6"/><ROW ID="905" TEXTSTR="select * from waybilllist where docid=:docid" LINEID="0"/><ROW ID="906" TEXTSTR="select wbl.*," LINEID="0"/><ROW ID="906" TEXTSTR=" ka.name kaname, ka.fullname kafullname, ka.phone kaphone," LINEID="1"/><ROW ID="906" TEXTSTR=" ka.ADDRESS, ka.city, ka.district, ka.country, ka.postindex, ka.fax, ka.email, ka.www, ka.ktype katype," LINEID="2"/><ROW ID="906" TEXTSTR=" kaemp.name personname, curr.shortname currname" LINEID="3"/><ROW ID="906" TEXTSTR="from docs d" LINEID="4"/><ROW ID="906" TEXTSTR="join waybilllist wbl on wbl.docid=d.docid" LINEID="5"/><ROW ID="906" TEXTSTR="join kagent ka on ka.kaid=wbl.kaid" LINEID="6"/><ROW ID="906" TEXTSTR="left join kagent kaemp on wbl.personid=kaemp.kaid" LINEID="7"/><ROW ID="906" TEXTSTR="left join currency curr on curr.currid=wbl.currid" LINEID="8"/><ROW ID="906" TEXTSTR="where d.docid=:docid" LINEID="9"/><ROW ID="906" TEXTSTR="order by wbl.ondate desc" LINEID="10"/><ROW ID="865" TEXTSTR="insert into WaybillList" LINEID="0"/><ROW ID="865" TEXTSTR="(WBILLID, NUM, ONDATE, KAID, CURRID, ATTNUM, ATTDATE, REASON, PERSONID, CHECKED," LINEID="1"/><ROW ID="865" TEXTSTR=" DELETED, SUMMALL, WTYPE, NDS, RECEIVED, TODATE, DEFNUM, NOTES, ENTID, SUMMINCURR, ONVALUE)" LINEID="2"/><ROW ID="865" TEXTSTR="  values" LINEID="3"/><ROW ID="865" TEXTSTR="(:WBILLID, :NUM, :ONDATE, :KAID, :CURRID, :ATTNUM, :ATTDATE, :REASON, :PERSONID, :CHECKED," LINEID="4"/><ROW ID="865" TEXTSTR=" :DELETED, :SUMMALL, :WTYPE, :NDS, :RECEIVED, :TODATE, :DEFNUM, :NOTES, :ENTID, :SUMMINCURR, :ONVALUE)" LINEID="5"/><ROW ID="865" TEXTSTR="" LINEID="6"/><ROW ID="866" TEXTSTR="update WaybillList" LINEID="0"/><ROW ID="866" TEXTSTR="set NUM=:NUM, ONDATE=:ONDATE, KAID=:KAID, CURRID=:CURRID, ATTNUM=:ATTNUM," LINEID="1"/><ROW ID="866" TEXTSTR="    ATTDATE=:ATTDATE, REASON=:REASON, PERSONID=:PERSONID, CHECKED=:CHECKED," LINEID="2"/><ROW ID="866" TEXTSTR="    DELETED=:DELETED, SUMMALL=:SUMMALL, WTYPE=:WTYPE, NDS=:NDS," LINEID="3"/><ROW ID="866" TEXTSTR="    RECEIVED=:RECEIVED, TODATE=:TODATE, DEFNUM=:DEFNUM, NOTES=:NOTES," LINEID="4"/><ROW ID="866" TEXTSTR="    entid=:entid, SUMMINCURR=:SUMMINCURR, ONVALUE=:ONVALUE" LINEID="5"/><ROW ID="866" TEXTSTR="where WBILLID=:WBILLID" LINEID="6"/><ROW ID="866" TEXTSTR="" LINEID="7"/><ROW ID="306" TEXTSTR="insert into paydoc" LINEID="0"/><ROW ID="306" TEXTSTR=" (paydocid, kaid, doctype, total, ondate, ptypeid, currid," LINEID="1"/><ROW ID="306" TEXTSTR="  deleted, docnum, checked, withnds, reason, notes, mpersonid," LINEID="2"/><ROW ID="306" TEXTSTR="  ctypeid, cashid, accid, onvalue)" LINEID="3"/><ROW ID="306" TEXTSTR=" values" LINEID="4"/><ROW ID="306" TEXTSTR=" (:paydocid, :kaid, :doctype, :total, :ondate, :ptypeid," LINEID="5"/><ROW ID="306" TEXTSTR="  :currid, 0, :docnum, :checked, :withnds, :reason, :notes," LINEID="6"/><ROW ID="306" TEXTSTR="  :mpersonid, :ctypeid, :cashid, :accid, :onvalue)" LINEID="7"/><ROW ID="307" TEXTSTR="update paydoc set ondate=:ondate, kaid=:kaid, total=:total, currid=:currid," LINEID="0"/><ROW ID="307" TEXTSTR="  ptypeid=:ptypeid, doctype=:doctype, docnum=:docnum, checked=:checked," LINEID="1"/><ROW ID="307" TEXTSTR="  withnds=:withnds, reason=:reason, notes=:notes, mpersonid=:mpersonid," LINEID="2"/><ROW ID="307" TEXTSTR="  ctypeid=:ctypeid, cashid=:cashid, accid=:accid, onvalue=:onvalue" LINEID="3"/><ROW ID="307" TEXTSTR=" where paydocid=:paydocid" LINEID="4"/><ROW ID="299" TEXTSTR="select pd.*, ka.name, pt.name as ptypename, c.shortname, pt.ptypeid, c.currid," LINEID="0"/><ROW ID="299" TEXTSTR=" ka.fullname, ka.address, ka.phone, ka.fax, ka.email, ka.www, ka.city, ka.district," LINEID="1"/><ROW ID="299" TEXTSTR=" ka.postindex, ka.country, ct.name as chargename, cd.name as cashname," LINEID="2"/><ROW ID="299" TEXTSTR=" ea.accnum, b.name as bankname" LINEID="3"/><ROW ID="299" TEXTSTR=" from paydoc pd" LINEID="4"/><ROW ID="299" TEXTSTR="  left outer join kagent ka on pd.kaid=ka.kaid" LINEID="5"/><ROW ID="299" TEXTSTR="  left outer join cashdesks cd on cd.cashid=pd.cashid" LINEID="6"/><ROW ID="299" TEXTSTR="  left outer join agentaccount ea on ea.accid=pd.accid" LINEID="7"/><ROW ID="299" TEXTSTR="  left outer join banks b on b.bankid=ea.bankid" LINEID="8"/><ROW ID="299" TEXTSTR="  join paytype pt on pt.ptypeid=pd.ptypeid" LINEID="9"/><ROW ID="299" TEXTSTR="  join currency c on pd.currid=c.currid" LINEID="10"/><ROW ID="299" TEXTSTR="  join chargetype ct on pd.ctypeid=ct.ctypeid" LINEID="11"/><ROW ID="299" TEXTSTR=" where pd.deleted=0" LINEID="12"/><ROW ID="299" TEXTSTR="  and pd.ondate between :fromdate and :todate" LINEID="13"/><ROW ID="299" TEXTSTR="  and pd.doctype=:doctype" LINEID="14"/><ROW ID="299" TEXTSTR="  %m" LINEID="15"/><ROW ID="328" TEXTSTR="update paydoc set docnum=:docnum, kaid=:kaid, ondate=:ondate, reason=:reason, ptypeid=:ptypeid, total=:total, currid=:currid, checked=:checked," LINEID="0"/><ROW ID="328" TEXTSTR="  mpersonid=:mpersonid, ctypeid=:ctypeid, accid=:accid, cashid=:cashid, onvalue=:onvalue" LINEID="1"/><ROW ID="328" TEXTSTR="where paydocid=:paydocid" LINEID="2"/><ROW ID="392" TEXTSTR="select wbl.wbillid as id, wbl.wtype, wbl.num, wbl.ondate," LINEID="0"/><ROW ID="392" TEXTSTR=" cast(wbl.summall as double precision) as summall, cast(&apos;&apos; as varchar(3)) as shortname," LINEID="1"/><ROW ID="392" TEXTSTR=" cast(1.0 as numeric(15,8)) as onvalue, wbl.summall as saldo" LINEID="2"/><ROW ID="392" TEXTSTR=" from waybilllist wbl" LINEID="3"/><ROW ID="392" TEXTSTR=" where wbl.kaid=:kaid" LINEID="4"/><ROW ID="392" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="5"/><ROW ID="392" TEXTSTR="  and wbl.deleted=0" LINEID="6"/><ROW ID="392" TEXTSTR="  and wbl.checked=1" LINEID="7"/><ROW ID="392" TEXTSTR="  and wbl.wtype in (1, -1, 6, -6)" LINEID="8"/><ROW ID="392" TEXTSTR="  %m" LINEID="9"/><ROW ID="392" TEXTSTR="" LINEID="10"/><ROW ID="392" TEXTSTR="union all" LINEID="11"/><ROW ID="392" TEXTSTR="" LINEID="12"/><ROW ID="392" TEXTSTR="select pd.paydocid, cast(pd.doctype*2 as integer), pd.docnum, pd.ondate," LINEID="13"/><ROW ID="392" TEXTSTR=" cast(pd.total as double precision), c.shortname, cast(pd.onvalue as numeric(15,8)), pd.total as saldo" LINEID="14"/><ROW ID="392" TEXTSTR=" from paydoc pd, currency c" LINEID="15"/><ROW ID="392" TEXTSTR=" where pd.kaid=:kaid1" LINEID="16"/><ROW ID="392" TEXTSTR="  and pd.ondate between :fromdate1 and :todate1" LINEID="17"/><ROW ID="392" TEXTSTR="  and pd.deleted=0" LINEID="18"/><ROW ID="392" TEXTSTR="  and pd.checked=1" LINEID="19"/><ROW ID="392" TEXTSTR="  and pd.doctype in (1, -1)" LINEID="20"/><ROW ID="392" TEXTSTR="  and pd.currid=c.currid" LINEID="21"/><ROW ID="392" TEXTSTR="  %p" LINEID="22"/><ROW ID="392" TEXTSTR="order by 4" LINEID="23"/><ROW ID="392" TEXTSTR="" LINEID="24"/><ROW ID="907" TEXTSTR="execute procedure sp_recalc_ka_saldo(:kaid, :ondate)" LINEID="0"/><ROW ID="276" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="276" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="276" TEXTSTR="  curr.shortname as currname, wbdet.onvalue, 0 as postype," LINEID="2"/><ROW ID="276" TEXTSTR="  s.serialno as sn, mat.producer, mat.serials as bySN, mat.grpid," LINEID="3"/><ROW ID="276" TEXTSTR="  c.name as country" LINEID="4"/><ROW ID="276" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="276" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="276" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="276" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="276" TEXTSTR="     left outer join countries c on mat.cid=c.cid" LINEID="9"/><ROW ID="276" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="276" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="11"/><ROW ID="276" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="276" TEXTSTR="order by wbdet.num" LINEID="13"/><ROW ID="276" TEXTSTR="" LINEID="14"/><ROW ID="310" TEXTSTR="select sum(formatfloat(wbl.wtype*cast(wbl.summall as double precision), -2)) as total" LINEID="0"/><ROW ID="310" TEXTSTR=" from waybilllist wbl" LINEID="1"/><ROW ID="310" TEXTSTR=" where wbl.wtype in (1, -1)" LINEID="2"/><ROW ID="310" TEXTSTR="  and wbl.ondate&lt;=:ondate" LINEID="3"/><ROW ID="310" TEXTSTR="  and wbl.kaid=:kaid" LINEID="4"/><ROW ID="310" TEXTSTR="  and wbl.checked=1" LINEID="5"/><ROW ID="310" TEXTSTR="  and wbl.deleted=0" LINEID="6"/><ROW ID="390" TEXTSTR="select wbl.*, ka.*, p.name as personname, c.shortname," LINEID="0"/><ROW ID="390" TEXTSTR=" cr.onvalue" LINEID="1"/><ROW ID="390" TEXTSTR=" from waybilllist wbl" LINEID="2"/><ROW ID="390" TEXTSTR=" join currency c on c.currid=wbl.currid" LINEID="3"/><ROW ID="390" TEXTSTR=" left outer join kagent p on wbl.personid=p.kaid" LINEID="4"/><ROW ID="390" TEXTSTR=" left outer join kagent ka on ka.kaid=wbl.kaid" LINEID="5"/><ROW ID="390" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="6"/><ROW ID="390" TEXTSTR="" LINEID="7"/><ROW ID="474" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname, wh.name whname," LINEID="0"/><ROW ID="474" TEXTSTR="       mat.artikul as artikul, curr.shortname as currname," LINEID="1"/><ROW ID="474" TEXTSTR="       wbdet.amount as posamount, wbdet.price as posprice" LINEID="2"/><ROW ID="474" TEXTSTR="from WAYBILLDET wbdet, MATERIALS mat, MEASURES msr," LINEID="3"/><ROW ID="474" TEXTSTR="     WAREHOUSE wh, currency curr" LINEID="4"/><ROW ID="474" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="5"/><ROW ID="474" TEXTSTR="      and wbdet.posid not in (select posid" LINEID="6"/><ROW ID="474" TEXTSTR="                              from waybilldet, waybillmove" LINEID="7"/><ROW ID="474" TEXTSTR="                              where waybilldet.wbillid=:WBILLID" LINEID="8"/><ROW ID="474" TEXTSTR="                              and waybilldet.wbillid=waybillmove.wbillid" LINEID="9"/><ROW ID="474" TEXTSTR="                              and waybillmove.destwid=waybilldet.wid)" LINEID="10"/><ROW ID="474" TEXTSTR="      and mat.matid=wbdet.matid" LINEID="11"/><ROW ID="474" TEXTSTR="      and msr.mid=mat.mid" LINEID="12"/><ROW ID="474" TEXTSTR="      and wh.wid=wbdet.wid" LINEID="13"/><ROW ID="474" TEXTSTR="      and curr.currid=wbdet.currid" LINEID="14"/><ROW ID="474" TEXTSTR="order by wbdet.num" LINEID="15"/><ROW ID="474" TEXTSTR="" LINEID="16"/><ROW ID="478" TEXTSTR="select wbdet.*, c.shortname" LINEID="0"/><ROW ID="478" TEXTSTR="from waybilldet wbdet, currency c" LINEID="1"/><ROW ID="478" TEXTSTR="where posid=:posid" LINEID="2"/><ROW ID="478" TEXTSTR="  and wbdet.currid=c.currid" LINEID="3"/><ROW ID="478" TEXTSTR="" LINEID="4"/><ROW ID="511" TEXTSTR="select wbl.*, ka.*, p.name as personname, p.job as personjob, c.shortname as curname," LINEID="0"/><ROW ID="511" TEXTSTR="c.repfracname as curfracname, c.repshortname as curshortname ,c.curtype" LINEID="1"/><ROW ID="511" TEXTSTR=" from waybilllist wbl" LINEID="2"/><ROW ID="511" TEXTSTR=" join currency c on c.currid=wbl.currid" LINEID="3"/><ROW ID="511" TEXTSTR=" left outer join kagent p on wbl.personid=p.kaid" LINEID="4"/><ROW ID="511" TEXTSTR=" left outer join kagent ka on ka.kaid=wbl.kaid" LINEID="5"/><ROW ID="511" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="6"/><ROW ID="511" TEXTSTR="" LINEID="7"/><ROW ID="597" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="597" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="597" TEXTSTR="  curr.shortname as currname, wbdet.price as price2" LINEID="2"/><ROW ID="597" TEXTSTR="from WAYBILLDET wbdet, MATERIALS mat, MEASURES msr," LINEID="3"/><ROW ID="597" TEXTSTR="     WAREHOUSE wh, currency curr" LINEID="4"/><ROW ID="597" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="5"/><ROW ID="597" TEXTSTR="      and wbdet.posid not in (select posid" LINEID="6"/><ROW ID="597" TEXTSTR="                              from waybilldet, waybillmove" LINEID="7"/><ROW ID="597" TEXTSTR="                              where waybilldet.wbillid=:WBILLID" LINEID="8"/><ROW ID="597" TEXTSTR="                              and waybilldet.wbillid=waybillmove.wbillid" LINEID="9"/><ROW ID="597" TEXTSTR="                              and waybillmove.destwid=waybilldet.wid)" LINEID="10"/><ROW ID="597" TEXTSTR="      and mat.matid=wbdet.matid" LINEID="11"/><ROW ID="597" TEXTSTR="      and msr.mid=mat.mid" LINEID="12"/><ROW ID="597" TEXTSTR="      and wh.wid=wbdet.wid" LINEID="13"/><ROW ID="597" TEXTSTR="      and curr.currid=wbdet.currid" LINEID="14"/><ROW ID="597" TEXTSTR="order by wbdet.num" LINEID="15"/><ROW ID="676" TEXTSTR="select -wbs.posid as posid, wbs.wbillid, s.svcid as matid," LINEID="0"/><ROW ID="676" TEXTSTR="  cast(0 as integer) as wid, wbs.amount, wbs.price," LINEID="1"/><ROW ID="676" TEXTSTR="  wbs.discount, wbs.nds, wbs.currid, wbl.ondate," LINEID="2"/><ROW ID="676" TEXTSTR="  cast(0 as integer) as ptypeid, wbs.num, s.name as matname," LINEID="3"/><ROW ID="676" TEXTSTR="  ms.shortname as msrname, cast(&apos;&apos; as varchar(64)) as whname," LINEID="4"/><ROW ID="676" TEXTSTR="  s.artikul, c.shortname as currname, wbl.onvalue, 1 as postype," LINEID="5"/><ROW ID="676" TEXTSTR="  wbs.norm, wbs.personid" LINEID="6"/><ROW ID="676" TEXTSTR="from waybillsvc wbs, services s, measures ms, waybilllist wbl," LINEID="7"/><ROW ID="676" TEXTSTR="  currency c" LINEID="8"/><ROW ID="676" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="9"/><ROW ID="676" TEXTSTR="  and s.svcid=wbs.svcid" LINEID="10"/><ROW ID="676" TEXTSTR="  and ms.mid=s.mid" LINEID="11"/><ROW ID="676" TEXTSTR="  and wbl.wbillid=wbs.wbillid" LINEID="12"/><ROW ID="676" TEXTSTR="  and c.currid=wbs.currid" LINEID="13"/><ROW ID="676" TEXTSTR="" LINEID="14"/><ROW ID="679" TEXTSTR="select wbdet.num, wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="679" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="679" TEXTSTR="  curr.shortname as currname, wbdet.onvalue," LINEID="2"/><ROW ID="679" TEXTSTR="  cast(0 as integer) as postype," LINEID="3"/><ROW ID="679" TEXTSTR="  cast(0 as numeric(15,8)) as norm, wbdap.producer," LINEID="4"/><ROW ID="679" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate" LINEID="5"/><ROW ID="679" TEXTSTR="from WAYBILLDET wbdet" LINEID="6"/><ROW ID="679" TEXTSTR="  join MATERIALS mat on mat.matid=wbdet.matid" LINEID="7"/><ROW ID="679" TEXTSTR="  join MEASURES msr on msr.mid=mat.mid" LINEID="8"/><ROW ID="679" TEXTSTR="  join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="9"/><ROW ID="679" TEXTSTR="  join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="679" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="679" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="679" TEXTSTR="" LINEID="13"/><ROW ID="679" TEXTSTR="union all" LINEID="14"/><ROW ID="679" TEXTSTR="" LINEID="15"/><ROW ID="679" TEXTSTR="select wbs.num, -wbs.posid as posid, wbs.wbillid, s.svcid as matid," LINEID="16"/><ROW ID="679" TEXTSTR="  cast(0 as integer) as wid, wbs.amount, wbs.price," LINEID="17"/><ROW ID="679" TEXTSTR="  wbs.discount, wbs.nds, wbs.currid, wbl.ondate," LINEID="18"/><ROW ID="679" TEXTSTR="  cast(0 as integer) as ptypeid, wbs.num, 0, s.name as matname," LINEID="19"/><ROW ID="679" TEXTSTR="  ms.shortname as msrname, cast(&apos;&apos; as varchar(64)) as whname," LINEID="20"/><ROW ID="679" TEXTSTR="  cast(s.artikul as varchar(80)), c.shortname as currname, wbl.onvalue, 1 as postype," LINEID="21"/><ROW ID="679" TEXTSTR="  cast(wbs.norm as numeric(15,8)), cast(&apos;&apos; as varchar(255)) as producer," LINEID="22"/><ROW ID="679" TEXTSTR="  cast(&apos;&apos; as varchar(64)) as gtd," LINEID="23"/><ROW ID="679" TEXTSTR="  cast(&apos;&apos; as varchar(64)) as certnum, cast(null as timestamp) as certdate" LINEID="24"/><ROW ID="679" TEXTSTR="from waybillsvc wbs" LINEID="25"/><ROW ID="679" TEXTSTR="  join services s on s.svcid=wbs.svcid" LINEID="26"/><ROW ID="679" TEXTSTR="  join measures ms on ms.mid=s.mid" LINEID="27"/><ROW ID="679" TEXTSTR="  join waybilllist wbl on wbl.wbillid=wbs.wbillid" LINEID="28"/><ROW ID="679" TEXTSTR="  join currency c on c.currid=wbs.currid" LINEID="29"/><ROW ID="679" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="30"/><ROW ID="679" TEXTSTR="" LINEID="31"/><ROW ID="679" TEXTSTR="order by 1" LINEID="32"/><ROW ID="679" TEXTSTR="" LINEID="33"/><ROW ID="707" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="707" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="707" TEXTSTR="  curr.shortname as currname, wbdet.onvalue, 0 as postype," LINEID="2"/><ROW ID="707" TEXTSTR="  s.serialno as sn, mat.producer, mat.serials as bySN," LINEID="3"/><ROW ID="707" TEXTSTR="  mg.name as grpname" LINEID="4"/><ROW ID="707" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="707" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="707" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="707" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="707" TEXTSTR="     join matgroup mg on mg.grpid=mat.grpid" LINEID="9"/><ROW ID="707" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="707" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="11"/><ROW ID="707" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="707" TEXTSTR="order by wbdet.num" LINEID="13"/><ROW ID="707" TEXTSTR="" LINEID="14"/><ROW ID="717" TEXTSTR="select wbl.wbillid, wbl.num, wbl.ondate, wbl.wtype, wbd.posid, wbd.price, wbd.amount," LINEID="0"/><ROW ID="717" TEXTSTR="  wbd.nds, wbd.onvalue" LINEID="1"/><ROW ID="717" TEXTSTR=" from wmatturn wmt, waybilldet wbd, waybilllist wbl" LINEID="2"/><ROW ID="717" TEXTSTR=" where wmt.posid=:posid" LINEID="3"/><ROW ID="717" TEXTSTR="  and wmt.turntype in (-1, 2)" LINEID="4"/><ROW ID="717" TEXTSTR="  and wbd.posid=wmt.sourceid" LINEID="5"/><ROW ID="717" TEXTSTR="  and wbl.wbillid=wbd.wbillid" LINEID="6"/><ROW ID="717" TEXTSTR="  and wbl.wtype in (4, -6, -5)" LINEID="7"/><ROW ID="717" TEXTSTR="" LINEID="8"/><ROW ID="717" TEXTSTR="union all" LINEID="9"/><ROW ID="717" TEXTSTR="" LINEID="10"/><ROW ID="717" TEXTSTR="select wbl.wbillid, wbl.num, wbl.ondate, wbl.wtype, wbd.posid, wbd.price, wbd.amount," LINEID="11"/><ROW ID="717" TEXTSTR="  wbd.nds, wbd.onvalue" LINEID="12"/><ROW ID="717" TEXTSTR=" from returnrel rr, waybilldet wbd, waybilllist wbl" LINEID="13"/><ROW ID="717" TEXTSTR=" where rr.pposid=:posid" LINEID="14"/><ROW ID="717" TEXTSTR="  and rr.dposid=wbd.posid" LINEID="15"/><ROW ID="717" TEXTSTR="  and wbd.wbillid=wbl.wbillid" LINEID="16"/><ROW ID="717" TEXTSTR="" LINEID="17"/><ROW ID="717" TEXTSTR=" order by 1" LINEID="18"/><ROW ID="717" TEXTSTR="" LINEID="19"/><ROW ID="752" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="752" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="752" TEXTSTR="  mat.archived, curr.shortname as currname," LINEID="2"/><ROW ID="752" TEXTSTR="  0 as postype, s.serialno as sn, wbdap.producer, mat.grpid," LINEID="3"/><ROW ID="752" TEXTSTR="  mat.serials as bySN, wbdap.gtd, wbdap.certnum, wbdap.certdate" LINEID="4"/><ROW ID="752" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="752" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="752" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="752" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="752" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="9"/><ROW ID="752" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="10"/><ROW ID="752" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="752" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="752" TEXTSTR="order by wbdet.num" LINEID="13"/><ROW ID="752" TEXTSTR="" LINEID="14"/><ROW ID="783" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="783" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="783" TEXTSTR="  curr.shortname as currname, 0 as postype," LINEID="2"/><ROW ID="783" TEXTSTR="  s.serialno as sn, wbdap.producer, mat.serials as bySN," LINEID="3"/><ROW ID="783" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, pr.rsv, pr.remain" LINEID="4"/><ROW ID="783" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="783" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="783" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="783" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="783" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="9"/><ROW ID="783" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="10"/><ROW ID="783" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="783" TEXTSTR="     left outer join posremains pr on (pr.posid=wbdet.posid and pr.ondate=" LINEID="12"/><ROW ID="783" TEXTSTR="       (select max(ondate) from posremains where posid=pr.posid and ondate&lt;=:ondate))" LINEID="13"/><ROW ID="783" TEXTSTR="where wbdet.posid in (%ids)" LINEID="14"/><ROW ID="783" TEXTSTR="" LINEID="15"/><ROW ID="784" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="784" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="784" TEXTSTR="  curr.shortname as currname, 0 as postype," LINEID="2"/><ROW ID="784" TEXTSTR="  s.serialno as sn, mat.producer, mat.serials as bySN, wbdet.price as price2" LINEID="3"/><ROW ID="784" TEXTSTR="from WAYBILLDET wbdet" LINEID="4"/><ROW ID="784" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="5"/><ROW ID="784" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="6"/><ROW ID="784" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="7"/><ROW ID="784" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="8"/><ROW ID="784" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="9"/><ROW ID="784" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="10"/><ROW ID="784" TEXTSTR="order by wbdet.num" LINEID="11"/><ROW ID="784" TEXTSTR="" LINEID="12"/><ROW ID="297" TEXTSTR="select sum(wm.amount*wm.turntype) as remain, wbd.posid, w.wid," LINEID="0"/><ROW ID="297" TEXTSTR="  w.name, wbl.ondate, wbd.price, c.shortname, wbd.onvalue" LINEID="1"/><ROW ID="297" TEXTSTR=" from wmatturn wm, warehouse w, waybilldet wbd," LINEID="2"/><ROW ID="297" TEXTSTR="  waybilllist wbl, currency c" LINEID="3"/><ROW ID="297" TEXTSTR=" where wbd.matid=:matid" LINEID="4"/><ROW ID="297" TEXTSTR="  and wm.posid=wbd.posid" LINEID="5"/><ROW ID="297" TEXTSTR="  and wbd.wbillid=wbl.wbillid" LINEID="6"/><ROW ID="297" TEXTSTR="  and wbd.currid=c.currid" LINEID="7"/><ROW ID="297" TEXTSTR="  and wbd.wid=w.wid" LINEID="8"/><ROW ID="297" TEXTSTR="  and wm.turntype&lt;&gt;2" LINEID="9"/><ROW ID="297" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="10"/><ROW ID="297" TEXTSTR="  %m" LINEID="11"/><ROW ID="297" TEXTSTR=" group by wbd.posid, w.wid, w.name, wbl.ondate, wbd.price," LINEID="12"/><ROW ID="297" TEXTSTR="  c.shortname, wbd.onvalue" LINEID="13"/><ROW ID="297" TEXTSTR=" having sum(wm.amount*wm.turntype)&gt;0" LINEID="14"/><ROW ID="297" TEXTSTR="" LINEID="15"/><ROW ID="383" TEXTSTR="select sum(wm.amount*wm.turntype) as remain, wbd.posid, w.wid," LINEID="0"/><ROW ID="383" TEXTSTR="  w.name, wbd.ondate, wbd.price, wbd.currid, wbd.NDS, wbd.discount, c.shortname, wbd.onvalue" LINEID="1"/><ROW ID="383" TEXTSTR=" from wmatturn wm, warehouse w, waybilldet wbd," LINEID="2"/><ROW ID="383" TEXTSTR="  currency c" LINEID="3"/><ROW ID="383" TEXTSTR=" where wbd.matid=:matid" LINEID="4"/><ROW ID="383" TEXTSTR="  and wbd.wid=:wid" LINEID="5"/><ROW ID="383" TEXTSTR="  and wm.posid=wbd.posid" LINEID="6"/><ROW ID="383" TEXTSTR="  and wbd.currid=c.currid" LINEID="7"/><ROW ID="383" TEXTSTR="  and wbd.wid=w.wid" LINEID="8"/><ROW ID="383" TEXTSTR="  and wm.turntype&lt;&gt;2" LINEID="9"/><ROW ID="383" TEXTSTR="  and wm.ondate&lt;=:ondate" LINEID="10"/><ROW ID="383" TEXTSTR=" group by wbd.posid, w.wid, w.name, wbd.ondate, wbd.price, wbd.currid, wbd.NDS, wbd.discount, c.shortname, wbd.onvalue" LINEID="11"/><ROW ID="383" TEXTSTR=" having sum(wm.amount*wm.turntype)&gt;0" LINEID="12"/><ROW ID="389" TEXTSTR="select wbl.wtype, wbl.wbillid, wbl.ondate, wbd.amount, wbl.num," LINEID="0"/><ROW ID="389" TEXTSTR="  wh.name, wbd.price, c.shortname, wbd.onvalue, wbd.posid, wbd.wid," LINEID="1"/><ROW ID="389" TEXTSTR="  ka.name as kagentname, wbm.sourcewid, wbm.destwid" LINEID="2"/><ROW ID="389" TEXTSTR=" from waybilldet wbd" LINEID="3"/><ROW ID="389" TEXTSTR=" join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="4"/><ROW ID="389" TEXTSTR=" join warehouse wh on wbd.wid=wh.wid" LINEID="5"/><ROW ID="389" TEXTSTR=" join currency c on wbd.currid=c.currid" LINEID="6"/><ROW ID="389" TEXTSTR=" left outer join kagent ka on wbl.kaid=ka.kaid" LINEID="7"/><ROW ID="389" TEXTSTR=" left outer join returnrel rr on rr.posid=wbd.posid" LINEID="8"/><ROW ID="389" TEXTSTR=" left outer join waybillmove wbm on wbm.wbillid=wbl.wbillid" LINEID="9"/><ROW ID="389" TEXTSTR=" where wbl.ondate between :fromdate and :todate" LINEID="10"/><ROW ID="389" TEXTSTR="  and wbl.checked=1" LINEID="11"/><ROW ID="389" TEXTSTR="  and wbl.deleted=0" LINEID="12"/><ROW ID="389" TEXTSTR="  and wbl.wtype in (1, -1, 5, -5, 6, -6, 4)" LINEID="13"/><ROW ID="389" TEXTSTR="  and (rr.posid is not null or ((wbl.wtype=6) and (rr.posid is not null)) or (wbl.wtype&lt;&gt;6))" LINEID="14"/><ROW ID="389" TEXTSTR="  and wbd.matid=:matid" LINEID="15"/><ROW ID="389" TEXTSTR="  %m" LINEID="16"/><ROW ID="389" TEXTSTR=" order by wbl.ondate" LINEID="17"/><ROW ID="389" TEXTSTR="" LINEID="18"/><ROW ID="483" TEXTSTR="select wbd.price, c.shortname, wbd.onvalue" LINEID="0"/><ROW ID="483" TEXTSTR=" from waybilldet wbd, currency c" LINEID="1"/><ROW ID="483" TEXTSTR=" where wbd.posid=:posid" LINEID="2"/><ROW ID="483" TEXTSTR="  and wbd.currid=c.currid" LINEID="3"/><ROW ID="483" TEXTSTR="" LINEID="4"/><ROW ID="305" TEXTSTR="select sum(formatfloat(cast(pd.total as double precision)*pd.doctype*cast(pd.onvalue as double precision), -2))" LINEID="0"/><ROW ID="305" TEXTSTR=" from paydoc pd" LINEID="1"/><ROW ID="305" TEXTSTR=" where pd.kaid=:kaid" LINEID="2"/><ROW ID="305" TEXTSTR="  and pd.checked=1" LINEID="3"/><ROW ID="305" TEXTSTR="  and pd.deleted=0" LINEID="4"/><ROW ID="305" TEXTSTR="  and pd.ondate&lt;=:ondate" LINEID="5"/><ROW ID="305" TEXTSTR="" LINEID="6"/><ROW ID="313" TEXTSTR="select pd.*, ka.name, ka.okpo, ka.kpp, ka.inn" LINEID="0"/><ROW ID="313" TEXTSTR=" from paydoc pd, kagent ka" LINEID="1"/><ROW ID="313" TEXTSTR=" where pd.paydocid=:paydocid" LINEID="2"/><ROW ID="313" TEXTSTR="  and ka.kaid=pd.kaid" LINEID="3"/><ROW ID="313" TEXTSTR="" LINEID="4"/><ROW ID="736" TEXTSTR="select sum(formatfloat(cast(pd.total as double precision)*cast(pd.onvalue as double precision), -2))" LINEID="0"/><ROW ID="736" TEXTSTR=" from paydoc pd, waybillpay wbp" LINEID="1"/><ROW ID="736" TEXTSTR=" where wbp.wbillid=:wbillid" LINEID="2"/><ROW ID="736" TEXTSTR="  and wbp.paydocid=pd.paydocid" LINEID="3"/><ROW ID="736" TEXTSTR="  and pd.checked=1" LINEID="4"/><ROW ID="736" TEXTSTR="" LINEID="5"/><ROW ID="754" TEXTSTR="select pd.*, cd.name as cashname, ka.name as kaname," LINEID="0"/><ROW ID="754" TEXTSTR="  pt.name as ptypename, c.shortname," LINEID="1"/><ROW ID="754" TEXTSTR="  ct.name as chargename" LINEID="2"/><ROW ID="754" TEXTSTR=" from paydoc pd" LINEID="3"/><ROW ID="754" TEXTSTR="  join cashdesks cd on pd.cashid=cd.cashid" LINEID="4"/><ROW ID="754" TEXTSTR="  join paytype pt on pt.ptypeid=pd.ptypeid" LINEID="5"/><ROW ID="754" TEXTSTR="  join currency c on c.currid=pd.currid" LINEID="6"/><ROW ID="754" TEXTSTR="  join chargetype ct on ct.ctypeid=pd.ctypeid" LINEID="7"/><ROW ID="754" TEXTSTR="  left outer join kagent ka on ka.kaid=pd.kaid" LINEID="8"/><ROW ID="754" TEXTSTR=" where pd.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="754" TEXTSTR="   and pd.checked=1" LINEID="10"/><ROW ID="754" TEXTSTR=" %m" LINEID="11"/><ROW ID="755" TEXTSTR="select pd.*, ea.accnum, ka.name as kaname," LINEID="0"/><ROW ID="755" TEXTSTR="  pt.name as ptypename, c.shortname," LINEID="1"/><ROW ID="755" TEXTSTR="  ct.name as chargename, b.name as bankname" LINEID="2"/><ROW ID="755" TEXTSTR=" from paydoc pd" LINEID="3"/><ROW ID="755" TEXTSTR="  join agentaccount ea on pd.accid=ea.accid" LINEID="4"/><ROW ID="755" TEXTSTR="  join banks b on b.bankid=ea.bankid" LINEID="5"/><ROW ID="755" TEXTSTR="  join paytype pt on pt.ptypeid=pd.ptypeid" LINEID="6"/><ROW ID="755" TEXTSTR="  join currency c on c.currid=pd.currid" LINEID="7"/><ROW ID="755" TEXTSTR="  join chargetype ct on ct.ctypeid=pd.ctypeid" LINEID="8"/><ROW ID="755" TEXTSTR="  left outer join kagent ka on ka.kaid=pd.kaid" LINEID="9"/><ROW ID="755" TEXTSTR=" where pd.ondate between :fromdate and :todate" LINEID="10"/><ROW ID="755" TEXTSTR="   and pd.checked=1" LINEID="11"/><ROW ID="755" TEXTSTR=" %m" LINEID="12"/><ROW ID="756" TEXTSTR="select pd.*, ea.accnum, ka.name as kaname," LINEID="0"/><ROW ID="756" TEXTSTR="  pt.name as ptypename, c.shortname," LINEID="1"/><ROW ID="756" TEXTSTR="  ct.name as chargename, b.name as bankname," LINEID="2"/><ROW ID="756" TEXTSTR="  cd.name as cashname" LINEID="3"/><ROW ID="756" TEXTSTR=" from paydoc pd" LINEID="4"/><ROW ID="756" TEXTSTR="  join paytype pt on pt.ptypeid=pd.ptypeid" LINEID="5"/><ROW ID="756" TEXTSTR="  join currency c on c.currid=pd.currid" LINEID="6"/><ROW ID="756" TEXTSTR="  join chargetype ct on ct.ctypeid=pd.ctypeid" LINEID="7"/><ROW ID="756" TEXTSTR="  left outer join agentaccount ea on pd.accid=ea.accid" LINEID="8"/><ROW ID="756" TEXTSTR="  left outer join banks b on b.bankid=ea.bankid" LINEID="9"/><ROW ID="756" TEXTSTR="  left outer join kagent ka on ka.kaid=pd.kaid" LINEID="10"/><ROW ID="756" TEXTSTR="  left outer join cashdesks cd on cd.cashid=pd.cashid" LINEID="11"/><ROW ID="756" TEXTSTR=" where pd.ondate between :fromdate and :todate" LINEID="12"/><ROW ID="756" TEXTSTR="   and pd.checked=1" LINEID="13"/><ROW ID="756" TEXTSTR=" %m" LINEID="14"/><ROW ID="641" TEXTSTR="select wblist.wbillid, wblist.wtype, wblist.num, wblist.ondate, cur.currid," LINEID="0"/><ROW ID="641" TEXTSTR="       cur.shortname as curname, wblist.onvalue, wblist.reason" LINEID="1"/><ROW ID="641" TEXTSTR="from waybilllist wblist" LINEID="2"/><ROW ID="641" TEXTSTR=" left outer join currency cur on cur.currid=wblist.currid" LINEID="3"/><ROW ID="641" TEXTSTR="where wblist.deleted=0" LINEID="4"/><ROW ID="641" TEXTSTR="      and wblist.wtype in (-1,6)" LINEID="5"/><ROW ID="641" TEXTSTR="      and wblist.checked=1" LINEID="6"/><ROW ID="641" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="7"/><ROW ID="641" TEXTSTR="      and wblist.kaid=:kaid" LINEID="8"/><ROW ID="641" TEXTSTR="order by wblist.ondate" LINEID="9"/><ROW ID="644" TEXTSTR="select wmt.ondate, wbl.num, wbl.wtype, ka.name as kaname," LINEID="0"/><ROW ID="644" TEXTSTR=" cast(wmt.amount as double precision)*wmt.turntype amount," LINEID="1"/><ROW ID="644" TEXTSTR=" cast(wbdp.price as double precision)*cast(wbdp.onvalue as double precision) as price," LINEID="2"/><ROW ID="644" TEXTSTR=" cast(wmt.amount as double precision)*wmt.turntype*cast(wbdp.price as double precision)*cast(wbdp.onvalue as double precision) as summ," LINEID="3"/><ROW ID="644" TEXTSTR=" wh.name as whname" LINEID="4"/><ROW ID="644" TEXTSTR="from wmatturn wmt, waybilldet wbd, waybilldet wbdp, waybilllist wbl" LINEID="5"/><ROW ID="644" TEXTSTR="left outer join kagent ka on ka.kaid=wbl.kaid," LINEID="6"/><ROW ID="644" TEXTSTR="currency curr, warehouse wh" LINEID="7"/><ROW ID="644" TEXTSTR="where wmt.ondate between :fromdate and :todate" LINEID="8"/><ROW ID="644" TEXTSTR="      and wmt.matid=:matid" LINEID="9"/><ROW ID="644" TEXTSTR="      and wmt.turntype&lt;&gt;2" LINEID="10"/><ROW ID="644" TEXTSTR="      and wbd.posid=wmt.sourceid" LINEID="11"/><ROW ID="644" TEXTSTR="      and wbdp.posid=wmt.posid" LINEID="12"/><ROW ID="644" TEXTSTR="      and wbl.wbillid=wbd.wbillid" LINEID="13"/><ROW ID="644" TEXTSTR="      and wbl.wtype&lt;&gt;4" LINEID="14"/><ROW ID="644" TEXTSTR="      and curr.currid=wbdp.currid" LINEID="15"/><ROW ID="644" TEXTSTR="      and wh.wid=wmt.wid" LINEID="16"/><ROW ID="644" TEXTSTR="      %m" LINEID="17"/><ROW ID="644" TEXTSTR="" LINEID="18"/><ROW ID="644" TEXTSTR="union all" LINEID="19"/><ROW ID="644" TEXTSTR="" LINEID="20"/><ROW ID="644" TEXTSTR="select wmt.ondate, wbl.num, wbl.wtype, ka.name as kaname," LINEID="21"/><ROW ID="644" TEXTSTR=" cast(wmt.amount as double precision)*wmt.turntype amount," LINEID="22"/><ROW ID="644" TEXTSTR=" cast(wbd.price as double precision)*cast(wbd.onvalue as double precision) as price," LINEID="23"/><ROW ID="644" TEXTSTR=" cast(wmt.amount as double precision)*wmt.turntype*cast(wbd.price as double precision)*cast(wbd.onvalue as double precision) as summ," LINEID="24"/><ROW ID="644" TEXTSTR=" wh.name as whname" LINEID="25"/><ROW ID="644" TEXTSTR="from wmatturn wmt, waybilldet wbd, waybilllist wbl" LINEID="26"/><ROW ID="644" TEXTSTR="left outer join kagent ka on ka.kaid=wbl.kaid," LINEID="27"/><ROW ID="644" TEXTSTR="currency curr, warehouse wh" LINEID="28"/><ROW ID="644" TEXTSTR="where wmt.ondate between :fromdate and :todate" LINEID="29"/><ROW ID="644" TEXTSTR="      and wmt.matid=:matid" LINEID="30"/><ROW ID="644" TEXTSTR="      and wmt.turntype&lt;&gt;2" LINEID="31"/><ROW ID="644" TEXTSTR="      and wbd.posid=wmt.sourceid" LINEID="32"/><ROW ID="644" TEXTSTR="      and wbl.wbillid=wbd.wbillid" LINEID="33"/><ROW ID="644" TEXTSTR="      and wbl.wtype=4" LINEID="34"/><ROW ID="644" TEXTSTR="      and curr.currid=wbd.currid" LINEID="35"/><ROW ID="644" TEXTSTR="      and wh.wid=wmt.wid" LINEID="36"/><ROW ID="644" TEXTSTR="      %m" LINEID="37"/><ROW ID="644" TEXTSTR="" LINEID="38"/><ROW ID="644" TEXTSTR="order by 1" LINEID="39"/><ROW ID="697" TEXTSTR="select sum(formatfloat(cast(wbsvc.price as double precision)*cast(wbl.onvalue as double precision)*cast(wbsvc.amount as double precision), -2)) as svcsumm" LINEID="0"/><ROW ID="697" TEXTSTR="from waybilllist wbl, waybillsvc wbsvc," LINEID="1"/><ROW ID="697" TEXTSTR="     currency curr" LINEID="2"/><ROW ID="697" TEXTSTR="where" LINEID="3"/><ROW ID="697" TEXTSTR="  wbl.checked=1" LINEID="4"/><ROW ID="697" TEXTSTR="  and wbl.wtype=-1" LINEID="5"/><ROW ID="697" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="6"/><ROW ID="697" TEXTSTR="  and wbl.wbillid=wbsvc.wbillid" LINEID="7"/><ROW ID="697" TEXTSTR="  and curr.currid=wbsvc.currid" LINEID="8"/><ROW ID="697" TEXTSTR="" LINEID="9"/><ROW ID="698" TEXTSTR="select formatfloat(sum(cast(pd.total as double precision)*cast(pd.onvalue as double precision)),-2) as payout" LINEID="0"/><ROW ID="698" TEXTSTR="from paydoc pd" LINEID="1"/><ROW ID="698" TEXTSTR=" join currency curr on curr.currid=pd.currid" LINEID="2"/><ROW ID="698" TEXTSTR=" join chargetype ct on ct.ctypeid=pd.ctypeid" LINEID="3"/><ROW ID="698" TEXTSTR="where pd.deleted=0" LINEID="4"/><ROW ID="698" TEXTSTR="      and pd.doctype=-2" LINEID="5"/><ROW ID="698" TEXTSTR="      and pd.checked=1" LINEID="6"/><ROW ID="698" TEXTSTR="      and pd.ondate between :fromdate and :todate" LINEID="7"/><ROW ID="698" TEXTSTR="" LINEID="8"/><ROW ID="741" TEXTSTR="select ct.ctypeid, ct.name as ctname," LINEID="0"/><ROW ID="741" TEXTSTR="   sum(formatfloat(cast(pd.total as double precision)*cast(pd.onvalue as double precision), -2)) as totaldef" LINEID="1"/><ROW ID="741" TEXTSTR=" from paydoc pd" LINEID="2"/><ROW ID="741" TEXTSTR="  join currency curr on curr.currid=pd.currid" LINEID="3"/><ROW ID="741" TEXTSTR="  join chargetype ct on ct.ctypeid=pd.ctypeid" LINEID="4"/><ROW ID="741" TEXTSTR=" where pd.deleted=0" LINEID="5"/><ROW ID="741" TEXTSTR="  and pd.doctype=-2" LINEID="6"/><ROW ID="741" TEXTSTR="  and pd.checked=1" LINEID="7"/><ROW ID="741" TEXTSTR="  and pd.ondate between :fromdate and :todate" LINEID="8"/><ROW ID="741" TEXTSTR="group by ct.ctypeid, ct.name" LINEID="9"/><ROW ID="727" TEXTSTR="select pd.*, ka.name as kaname, c.shortname" LINEID="0"/><ROW ID="727" TEXTSTR=" from paydoc pd, kagent ka, currency c" LINEID="1"/><ROW ID="727" TEXTSTR=" where pd.ondate between :fromdate and :todate" LINEID="2"/><ROW ID="727" TEXTSTR="  and pd.checked=1" LINEID="3"/><ROW ID="727" TEXTSTR="  and pd.doctype=:doctype" LINEID="4"/><ROW ID="727" TEXTSTR="  and pd.kaid=ka.kaid" LINEID="5"/><ROW ID="727" TEXTSTR="  and pd.currid=c.currid" LINEID="6"/><ROW ID="727" TEXTSTR="order by pd.ondate" LINEID="7"/><ROW ID="728" TEXTSTR="select pd.*, ka.name as kaname, c.shortname" LINEID="0"/><ROW ID="728" TEXTSTR=" from paydoc pd" LINEID="1"/><ROW ID="728" TEXTSTR="  join currency c on c.currid=pd.currid" LINEID="2"/><ROW ID="728" TEXTSTR="  left outer join kagent ka on ka.kaid=pd.kaid" LINEID="3"/><ROW ID="728" TEXTSTR=" where pd.ondate between :fromdate and :todate" LINEID="4"/><ROW ID="728" TEXTSTR="  and pd.checked=1" LINEID="5"/><ROW ID="728" TEXTSTR="  and pd.doctype=-2" LINEID="6"/><ROW ID="728" TEXTSTR="order by pd.ondate" LINEID="7"/><ROW ID="636" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="636" TEXTSTR="  wh.name whname, mat.artikul as artikul, c.name as country," LINEID="1"/><ROW ID="636" TEXTSTR="  curr.shortname as currname, wbdet.onvalue, wbdet.price as price2," LINEID="2"/><ROW ID="636" TEXTSTR="  wbdap.producer, wbdap.gtd" LINEID="3"/><ROW ID="636" TEXTSTR="from WAYBILLDET wbdet" LINEID="4"/><ROW ID="636" TEXTSTR="  join returnrel rr on rr.posid=wbdet.posid" LINEID="5"/><ROW ID="636" TEXTSTR="  join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="636" TEXTSTR="  join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="636" TEXTSTR="  join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="636" TEXTSTR="  join currency curr on curr.currid=wbdet.currid" LINEID="9"/><ROW ID="636" TEXTSTR="  left outer join countries c on c.cid=mat.cid" LINEID="10"/><ROW ID="636" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="636" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="636" TEXTSTR="order by wbdet.num" LINEID="13"/><ROW ID="636" TEXTSTR="" LINEID="14"/><ROW ID="637" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="637" TEXTSTR="  wh.name whname, mat.artikul as artikul, c.name as country," LINEID="1"/><ROW ID="637" TEXTSTR="  curr.shortname as currname, wbdet.onvalue, wbdet.price as price2," LINEID="2"/><ROW ID="637" TEXTSTR="  wbdap.producer" LINEID="3"/><ROW ID="637" TEXTSTR="from WAYBILLDET wbdet" LINEID="4"/><ROW ID="637" TEXTSTR="  join MATERIALS mat on mat.matid=wbdet.matid" LINEID="5"/><ROW ID="637" TEXTSTR="  join MEASURES msr on msr.mid=mat.mid" LINEID="6"/><ROW ID="637" TEXTSTR="  join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="7"/><ROW ID="637" TEXTSTR="  join currency curr on curr.currid=wbdet.currid" LINEID="8"/><ROW ID="637" TEXTSTR="  left outer join countries c on c.cid=mat.cid" LINEID="9"/><ROW ID="637" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="10"/><ROW ID="637" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="11"/><ROW ID="637" TEXTSTR="order by wbdet.num" LINEID="12"/><ROW ID="908" TEXTSTR="select * from sp_money_turnover(:fromdate, :todate," LINEID="0"/><ROW ID="908" TEXTSTR="  :turntype, :inid, :currid, :inkaid)" LINEID="1"/><ROW ID="909" TEXTSTR="insert into accoutsvcrel (accposid, posid)" LINEID="0"/><ROW ID="909" TEXTSTR=" values (:accposid, :posid)" LINEID="1"/><ROW ID="799" TEXTSTR="select wbs.num, -wbs.posid as posid, wbs.wbillid, s.svcid as matid," LINEID="0"/><ROW ID="799" TEXTSTR="  cast(0 as integer) as wid, wbs.amount, wbs.price," LINEID="1"/><ROW ID="799" TEXTSTR="  wbs.discount, wbs.nds, wbs.currid, wbl.ondate," LINEID="2"/><ROW ID="799" TEXTSTR="  cast(0 as integer) as ptypeid, wbs.num, 0, s.name as matname," LINEID="3"/><ROW ID="799" TEXTSTR="  ms.shortname as msrname, cast(&apos;&apos; as varchar(64)) as whname," LINEID="4"/><ROW ID="799" TEXTSTR="  cast(s.artikul as varchar(80)), c.shortname as currname, wbl.onvalue," LINEID="5"/><ROW ID="799" TEXTSTR="  1 as postype, wbs.norm, cast(&apos;&apos; as varchar(255)) as producer," LINEID="6"/><ROW ID="799" TEXTSTR="  cast(&apos;&apos; as varchar(64)) as gtd, cast(&apos;&apos; as varchar(64)) as certnum," LINEID="7"/><ROW ID="799" TEXTSTR="  cast(null as date) as certdate, acs.amount as shippedamount" LINEID="8"/><ROW ID="799" TEXTSTR="from waybillsvc wbs" LINEID="9"/><ROW ID="799" TEXTSTR="  join services s on s.svcid=wbs.svcid" LINEID="10"/><ROW ID="799" TEXTSTR="  join measures ms on ms.mid=s.mid" LINEID="11"/><ROW ID="799" TEXTSTR="  join waybilllist wbl on wbl.wbillid=wbs.wbillid" LINEID="12"/><ROW ID="799" TEXTSTR="  left outer join accoutsvc acs on acs.posid=wbs.posid" LINEID="13"/><ROW ID="799" TEXTSTR="  join currency c on c.currid=wbs.currid" LINEID="14"/><ROW ID="799" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="15"/><ROW ID="799" TEXTSTR="  and wbs.posid in (%ids)" LINEID="16"/><ROW ID="799" TEXTSTR="" LINEID="17"/><ROW ID="910" TEXTSTR="insert into accoutsvc" LINEID="0"/><ROW ID="910" TEXTSTR=" select posid, 0" LINEID="1"/><ROW ID="910" TEXTSTR="  from waybillsvc where wbillid=:wbillid" LINEID="2"/><ROW ID="911" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="911" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="911" TEXTSTR="  curr.shortname as currname, wbdet.onvalue, 0 as postype," LINEID="2"/><ROW ID="911" TEXTSTR="  s.serialno as sn, mat.producer, mat.serials as bySN, mat.grpid," LINEID="3"/><ROW ID="911" TEXTSTR="  c.name as country" LINEID="4"/><ROW ID="911" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="911" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="911" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="911" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="911" TEXTSTR="     left outer join countries c on mat.cid=c.cid" LINEID="9"/><ROW ID="911" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="911" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="11"/><ROW ID="911" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="911" TEXTSTR="order by mat.name" LINEID="13"/><ROW ID="911" TEXTSTR="" LINEID="14"/><ROW ID="749" TEXTSTR="select * from sp_wbd_get_in(:wbillid)" LINEID="0"/><ROW ID="851" TEXTSTR="select * from sp_wmat_get_by_whlist(:matid,:ondate,:wh)" LINEID="0"/><ROW ID="851" TEXTSTR=" %m" LINEID="1"/><ROW ID="766" TEXTSTR="insert into paydoc" LINEID="0"/><ROW ID="766" TEXTSTR=" (paydocid, kaid, doctype, total, ondate, ptypeid, currid," LINEID="1"/><ROW ID="766" TEXTSTR="  deleted, docnum, checked, withnds, reason, notes, mpersonid," LINEID="2"/><ROW ID="766" TEXTSTR="  ctypeid, cashid, accid, operid, onvalue)" LINEID="3"/><ROW ID="766" TEXTSTR=" values" LINEID="4"/><ROW ID="766" TEXTSTR=" (:paydocid, :kaid, :doctype, :total, :ondate, :ptypeid," LINEID="5"/><ROW ID="766" TEXTSTR="  :currid, 0, :docnum, :checked, :withnds, :reason, :notes," LINEID="6"/><ROW ID="766" TEXTSTR="  :mpersonid, :ctypeid, :cashid, :accid, :operid, :onvalue)" LINEID="7"/><ROW ID="767" TEXTSTR="update paydoc set ondate=:ondate, kaid=:kaid, total=:total, currid=:currid," LINEID="0"/><ROW ID="767" TEXTSTR="  ptypeid=:ptypeid, doctype=:doctype, docnum=:docnum, checked=:checked," LINEID="1"/><ROW ID="767" TEXTSTR="  withnds=:withnds, reason=:reason, notes=:notes, mpersonid=:mpersonid," LINEID="2"/><ROW ID="767" TEXTSTR="  ctypeid=:ctypeid, cashid=:cashid, accid=:accid, operid=:operid," LINEID="3"/><ROW ID="767" TEXTSTR="  onvalue=:onvalue" LINEID="4"/><ROW ID="767" TEXTSTR=" where paydocid=:paydocid" LINEID="5"/><ROW ID="914" TEXTSTR="delete from docsrel" LINEID="0"/><ROW ID="914" TEXTSTR=" where docid=(select docid from waybilllist where wbillid=:wbillid)" LINEID="1"/><ROW ID="914" TEXTSTR="  and rdocid=(select docid from waybilllist where wbillid=:accid)" LINEID="2"/><ROW ID="915" TEXTSTR="update waybilllist set todate=:todate where wbillid=:wbillid" LINEID="0"/><ROW ID="916" TEXTSTR="select * from pricetypes where def=1" LINEID="0"/><ROW ID="-3" TEXTSTR="select pds.*, cds.name as cashnamesrc, eas.accnum as accnumsrc," LINEID="0"/><ROW ID="-3" TEXTSTR="  cdd.name as cashnamedest, ead.accnum as accnumdest, pdd.total as totaldest," LINEID="1"/><ROW ID="-3" TEXTSTR="  c.shortname, cd.shortname as shortnamedest, pdc.total as totalcharge," LINEID="2"/><ROW ID="-3" TEXTSTR="  ct.name as chargename" LINEID="3"/><ROW ID="-3" TEXTSTR=" from paydoc pds" LINEID="4"/><ROW ID="-3" TEXTSTR="  join paydoc pdd on pds.operid=pdd.operid" LINEID="5"/><ROW ID="-3" TEXTSTR="  join currency c on c.currid=pds.currid" LINEID="6"/><ROW ID="-3" TEXTSTR="  join currency cd on pdd.currid=cd.currid" LINEID="7"/><ROW ID="-3" TEXTSTR="  left outer join paydoc pdc on (pdc.operid=pds.operid and pdc.doctype=-2)" LINEID="8"/><ROW ID="-3" TEXTSTR="  left outer join chargetype ct on ct.ctypeid=pdc.ctypeid" LINEID="9"/><ROW ID="-3" TEXTSTR="  left outer join cashdesks cds on cds.cashid=pds.cashid" LINEID="10"/><ROW ID="-3" TEXTSTR="  left outer join agentaccount eas on eas.accid=pds.accid" LINEID="11"/><ROW ID="-3" TEXTSTR="  left outer join cashdesks cdd on cdd.cashid=pdd.cashid" LINEID="12"/><ROW ID="-3" TEXTSTR="  left outer join agentaccount ead on ead.accid=pdd.accid" LINEID="13"/><ROW ID="-3" TEXTSTR=" where pds.operid is not null" LINEID="14"/><ROW ID="-3" TEXTSTR="  and pds.doctype&lt;0" LINEID="15"/><ROW ID="-3" TEXTSTR="  and pds.doctype&lt;&gt;-2" LINEID="16"/><ROW ID="-3" TEXTSTR="  and pdd.doctype&lt;&gt;-2" LINEID="17"/><ROW ID="-3" TEXTSTR="  and pds.doctype&lt;&gt;pdd.doctype" LINEID="18"/><ROW ID="-3" TEXTSTR="  and pds.ondate between :fromdate and :todate" LINEID="19"/><ROW ID="-3" TEXTSTR="  %m" LINEID="20"/><ROW ID="-3" TEXTSTR="   left outer join" LINEID="21"/><ROW ID="-3" TEXTSTR="" LINEID="22"/><ROW ID="421" TEXTSTR="select * from sp_get_mat_extra(:matid, :ptypeid, :ondate, :price, :currid, :onvalue)" LINEID="0"/><ROW ID="917" TEXTSTR="select count(*) from warehouse" LINEID="0"/><ROW ID="921" TEXTSTR="select * from dc_accum where cardid=:cardid" LINEID="0"/><ROW ID="401" TEXTSTR="insert into pricetypes (ptypeid, name, onvalue, def, deleted, num, pptypeid, extratype)" LINEID="0"/><ROW ID="401" TEXTSTR=" values (:ptypeid, :name, :onvalue, :def, 0, :num, :pptypeid, :extratype)" LINEID="1"/><ROW ID="402" TEXTSTR="update pricetypes" LINEID="0"/><ROW ID="402" TEXTSTR=" set name=:name, onvalue=:onvalue, def=:def, num=:num, pptypeid=:pptypeid," LINEID="1"/><ROW ID="402" TEXTSTR="   extratype=:extratype" LINEID="2"/><ROW ID="402" TEXTSTR=" where ptypeid=:ptypeid" LINEID="3"/><ROW ID="924" TEXTSTR="insert into dc_accum" LINEID="0"/><ROW ID="924" TEXTSTR=" (cardid, treshold, onvalue)" LINEID="1"/><ROW ID="924" TEXTSTR="values" LINEID="2"/><ROW ID="924" TEXTSTR=" (:cardid, :treshold, :onvalue)" LINEID="3"/><ROW ID="925" TEXTSTR="delete from dc_accum where cardid=:cardid" LINEID="0"/><ROW ID="926" TEXTSTR="select * from dc_stat where cardid=:cardid" LINEID="0"/><ROW ID="927" TEXTSTR="insert into dc_stat" LINEID="0"/><ROW ID="927" TEXTSTR=" (cardid, poscount, total)" LINEID="1"/><ROW ID="927" TEXTSTR=" values" LINEID="2"/><ROW ID="927" TEXTSTR=" (:cardid, :poscount, :total)" LINEID="3"/><ROW ID="929" TEXTSTR="select ka.name, dc.*, dcs.poscount, dcs.total" LINEID="0"/><ROW ID="929" TEXTSTR=" from disccards dc, kagent ka, dc_stat dcs" LINEID="1"/><ROW ID="929" TEXTSTR=" where dc.cardid=:cardid" LINEID="2"/><ROW ID="929" TEXTSTR="  and dc.kaid=ka.kaid" LINEID="3"/><ROW ID="929" TEXTSTR="  and dcs.cardid=dc.cardid" LINEID="4"/><ROW ID="748" TEXTSTR="insert into waybilldetaddprops" LINEID="0"/><ROW ID="748" TEXTSTR=" (posid, producer, gtd, certnum, certdate," LINEID="1"/><ROW ID="748" TEXTSTR="  warrantyperiod, warrantyperiodtype, cardid)" LINEID="2"/><ROW ID="748" TEXTSTR="values" LINEID="3"/><ROW ID="748" TEXTSTR=" (:posid, :producer, :gtd, :certnum, :certdate," LINEID="4"/><ROW ID="748" TEXTSTR="  :warrantyperiod, :warrantyperiodtype, :cardid)" LINEID="5"/><ROW ID="280" TEXTSTR="insert into WAYBILLDET (POSID, WBILLID, MATID, WID, AMOUNT, PRICE, DISCOUNT, NDS," LINEID="0"/><ROW ID="280" TEXTSTR="  CurrId, OnDate, PTypeID, NUM, onvalue, total)" LINEID="1"/><ROW ID="280" TEXTSTR="values (:POSID, :WBILLID, :MATID, :WID, :AMOUNT, :PRICE, :DISCOUNT, :NDS," LINEID="2"/><ROW ID="280" TEXTSTR="  :CurrId, :OnDate, :PTypeID, :NUM, :onvalue, :total)" LINEID="3"/><ROW ID="930" TEXTSTR="execute procedure sp_dc_recalc_bywb(:wbillid)" LINEID="0"/><ROW ID="712" TEXTSTR="select wbd.*, c.shortname, wbl.kaid, wbdap.producer," LINEID="0"/><ROW ID="712" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, s.serialno" LINEID="1"/><ROW ID="712" TEXTSTR=" from waybilldet wbd" LINEID="2"/><ROW ID="712" TEXTSTR="   join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="3"/><ROW ID="712" TEXTSTR="   join currency c on wbd.currid=c.currid" LINEID="4"/><ROW ID="712" TEXTSTR="   left outer join waybilldetaddprops wbdap on wbdap.posid=wbd.posid" LINEID="5"/><ROW ID="712" TEXTSTR="   left outer join serials s on s.posid=wbd.posid" LINEID="6"/><ROW ID="712" TEXTSTR=" where wbd.posid=:posid" LINEID="7"/><ROW ID="712" TEXTSTR="" LINEID="8"/><ROW ID="932" TEXTSTR="select * from disccardgrp where pid=:pid and pid&lt;&gt;grpid" LINEID="0"/><ROW ID="933" TEXTSTR="select * from disccardgrp where pid=grpid" LINEID="0"/><ROW ID="934" TEXTSTR="select * from disccardgrp where grpid=:grpid" LINEID="0"/><ROW ID="935" TEXTSTR="insert into disccardgrp" LINEID="0"/><ROW ID="935" TEXTSTR=" (grpid, name, pid, onvalue, expiredate, disctype," LINEID="1"/><ROW ID="935" TEXTSTR="  autonum, prefix, currnum, suffix, notes)" LINEID="2"/><ROW ID="935" TEXTSTR="values" LINEID="3"/><ROW ID="935" TEXTSTR=" (:grpid, :name, :pid, :onvalue, :expiredate, :disctype," LINEID="4"/><ROW ID="935" TEXTSTR="  :autonum, :prefix, :currnum, :suffix, :notes)" LINEID="5"/><ROW ID="935" TEXTSTR="" LINEID="6"/><ROW ID="936" TEXTSTR="update disccardgrp" LINEID="0"/><ROW ID="936" TEXTSTR="set" LINEID="1"/><ROW ID="936" TEXTSTR=" name=:name," LINEID="2"/><ROW ID="936" TEXTSTR=" pid=:pid," LINEID="3"/><ROW ID="936" TEXTSTR=" disctype=:disctype," LINEID="4"/><ROW ID="936" TEXTSTR=" onvalue=:onvalue," LINEID="5"/><ROW ID="936" TEXTSTR=" expiredate=:expiredate," LINEID="6"/><ROW ID="936" TEXTSTR=" autonum=:autonum," LINEID="7"/><ROW ID="936" TEXTSTR=" prefix=:prefix," LINEID="8"/><ROW ID="936" TEXTSTR=" suffix=:suffix," LINEID="9"/><ROW ID="936" TEXTSTR=" currnum=:currnum," LINEID="10"/><ROW ID="936" TEXTSTR=" notes=:notes" LINEID="11"/><ROW ID="936" TEXTSTR="where" LINEID="12"/><ROW ID="936" TEXTSTR=" grpid=:grpid" LINEID="13"/><ROW ID="936" TEXTSTR="" LINEID="14"/><ROW ID="937" TEXTSTR="delete from dcg_accum where grpid=:grpid" LINEID="0"/><ROW ID="938" TEXTSTR="insert into dcg_accum" LINEID="0"/><ROW ID="938" TEXTSTR=" (grpid, treshold, onvalue)" LINEID="1"/><ROW ID="938" TEXTSTR="values" LINEID="2"/><ROW ID="938" TEXTSTR=" (:grpid, :treshold, :onvalue)" LINEID="3"/><ROW ID="939" TEXTSTR="select grpid, pid, name from disccardgrp" LINEID="0"/><ROW ID="940" TEXTSTR="select count(*) from disccardgrp where pid=:grpid and grpid&lt;&gt;pid" LINEID="0"/><ROW ID="941" TEXTSTR="delete from disccardgrp where grpid=:grpid" LINEID="0"/><ROW ID="919" TEXTSTR="select dc.*, dcg.name as grpname, ka.name, ka.phone," LINEID="0"/><ROW ID="919" TEXTSTR="  ka.birthdate, ka.address, ka.city, ka.district," LINEID="1"/><ROW ID="919" TEXTSTR="  ka.country, ka.postindex, ka.email, dcs.total, dcs.poscount" LINEID="2"/><ROW ID="919" TEXTSTR=" from disccards dc" LINEID="3"/><ROW ID="919" TEXTSTR="  join kagent ka on ka.kaid=dc.kaid" LINEID="4"/><ROW ID="919" TEXTSTR="  join disccardgrp dcg on dcg.grpid=dc.grpid" LINEID="5"/><ROW ID="919" TEXTSTR="  join dc_stat dcs on dcs.cardid=dc.cardid" LINEID="6"/><ROW ID="919" TEXTSTR=" where dc.deleted=0" LINEID="7"/><ROW ID="919" TEXTSTR="  and (dc.grpid=:pid or 0=:pid)" LINEID="8"/><ROW ID="919" TEXTSTR="" LINEID="9"/><ROW ID="919" TEXTSTR="" LINEID="10"/><ROW ID="942" TEXTSTR="select * from dcg_accum where grpid=:grpid" LINEID="0"/><ROW ID="943" TEXTSTR="update disccardgrp set name=:name where grpid=:grpid" LINEID="0"/><ROW ID="944" TEXTSTR="update disccardgrp set pid=:pid where grpid=:grpid" LINEID="0"/><ROW ID="945" TEXTSTR="update disccards set grpid=:grpid where cardid=:cardid" LINEID="0"/><ROW ID="920" TEXTSTR="select dc.*, dcs.poscount, dcs.total" LINEID="0"/><ROW ID="920" TEXTSTR="  from disccards dc, dc_stat dcs" LINEID="1"/><ROW ID="920" TEXTSTR="  where dc.cardid=:cardid" LINEID="2"/><ROW ID="920" TEXTSTR="   and dcs.cardid=dc.cardid" LINEID="3"/><ROW ID="786" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="786" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="786" TEXTSTR="  curr.shortname as currname, 0 as postype," LINEID="2"/><ROW ID="786" TEXTSTR="  s.serialno as sn, wbdap.producer, mat.serials as bySN," LINEID="3"/><ROW ID="786" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, acd.shippedamount," LINEID="4"/><ROW ID="786" TEXTSTR="  acd.rsvamount, wbdap.cardid, ka.name as holder, dc.num as cardnum" LINEID="5"/><ROW ID="786" TEXTSTR="from WAYBILLDET wbdet" LINEID="6"/><ROW ID="786" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="7"/><ROW ID="786" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="8"/><ROW ID="786" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="9"/><ROW ID="786" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="10"/><ROW ID="786" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="11"/><ROW ID="786" TEXTSTR="     left outer join accoutdet acd on acd.posid=wbdet.posid" LINEID="12"/><ROW ID="786" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="13"/><ROW ID="786" TEXTSTR="     left outer join disccards dc on dc.cardid=wbdap.cardid" LINEID="14"/><ROW ID="786" TEXTSTR="     left outer join kagent ka on ka.kaid=dc.kaid" LINEID="15"/><ROW ID="786" TEXTSTR="where wbdet.posid in (%ids)" LINEID="16"/><ROW ID="786" TEXTSTR="" LINEID="17"/><ROW ID="615" TEXTSTR="select wmt.matid, wmt.wid, wmt.posid, wmt.amount, wmt.ondate," LINEID="0"/><ROW ID="615" TEXTSTR="       curr.currid, wbd.onvalue, wbd.nds, wbd.discount, curr.shortname as currname," LINEID="1"/><ROW ID="615" TEXTSTR="       wbl.num as docnum, wbl.wbillid, wbl.wtype, wh.name as whname, wbd.price, wmt.sourceid, s.serialno as sn," LINEID="2"/><ROW ID="615" TEXTSTR="       wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.producer, wbdap.cardid" LINEID="3"/><ROW ID="615" TEXTSTR="from wmatturn wmt" LINEID="4"/><ROW ID="615" TEXTSTR=" join waybilldet wbd on wbd.posid=wmt.sourceid" LINEID="5"/><ROW ID="615" TEXTSTR=" join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="6"/><ROW ID="615" TEXTSTR=" join materials mats on mats.matid=wmt.matid" LINEID="7"/><ROW ID="615" TEXTSTR=" join currency curr on curr.currid=wbd.currid" LINEID="8"/><ROW ID="615" TEXTSTR=" join warehouse wh on wh.wid=wmt.wid" LINEID="9"/><ROW ID="615" TEXTSTR=" left outer join serials s on s.posid=wmt.sourceid" LINEID="10"/><ROW ID="615" TEXTSTR=" left outer join waybilldetaddprops wbdap on wbdap.posid=wmt.sourceid" LINEID="11"/><ROW ID="615" TEXTSTR="where wmt.sourceid in (select wbd.posid" LINEID="12"/><ROW ID="615" TEXTSTR="                       from waybilllist wbl, waybilldet wbd" LINEID="13"/><ROW ID="615" TEXTSTR="                       where wbl.kaid=:kaid and wbl.wtype in (-1,-6)" LINEID="14"/><ROW ID="615" TEXTSTR="                       and wbl.checked=1 and wbd.wbillid=wbl.wbillid)" LINEID="15"/><ROW ID="615" TEXTSTR="      and wmt.matid=:matid" LINEID="16"/><ROW ID="615" TEXTSTR="order by 5" LINEID="17"/><ROW ID="931" TEXTSTR="select distinct wbd.posid, wbd.total, wbd.price, wbd.onvalue," LINEID="0"/><ROW ID="931" TEXTSTR="  wbd.currid, c.shortname, wbl.num, wbl.ondate, ka.name, wbd.amount," LINEID="1"/><ROW ID="931" TEXTSTR="  m.name as matname, m.artikul, m.barcode, ms.shortname as msrname," LINEID="2"/><ROW ID="931" TEXTSTR="  wbl.wtype, wbl.wbillid, wbd.discount, wbd.posid as pid" LINEID="3"/><ROW ID="931" TEXTSTR=" from waybilldet wbd, waybilldetaddprops wbdap, kagent ka," LINEID="4"/><ROW ID="931" TEXTSTR="  materials m, measures ms, waybilllist wbl, currency c" LINEID="5"/><ROW ID="931" TEXTSTR=" where wbd.posid=wbdap.posid" LINEID="6"/><ROW ID="931" TEXTSTR="  and wbdap.cardid=:cardid" LINEID="7"/><ROW ID="931" TEXTSTR="  and m.matid=wbd.matid" LINEID="8"/><ROW ID="931" TEXTSTR="  and c.currid=wbd.currid" LINEID="9"/><ROW ID="931" TEXTSTR="  and ka.kaid=wbl.kaid" LINEID="10"/><ROW ID="931" TEXTSTR="  and wbl.wbillid=wbd.wbillid" LINEID="11"/><ROW ID="931" TEXTSTR="  and wbl.checked=1" LINEID="12"/><ROW ID="931" TEXTSTR="  and wbl.wtype=-1" LINEID="13"/><ROW ID="931" TEXTSTR="  and ms.mid=m.mid" LINEID="14"/><ROW ID="931" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="15"/><ROW ID="931" TEXTSTR="" LINEID="16"/><ROW ID="931" TEXTSTR="union all" LINEID="17"/><ROW ID="931" TEXTSTR="" LINEID="18"/><ROW ID="931" TEXTSTR="select distinct wbd.posid, wbd.total, wbd.price, wbd.onvalue," LINEID="19"/><ROW ID="931" TEXTSTR="  wbd.currid, c.shortname, wbl.num, wbl.ondate, ka.name, wbd.amount," LINEID="20"/><ROW ID="931" TEXTSTR="  m.name as matname, m.artikul, m.barcode, ms.shortname as msrname," LINEID="21"/><ROW ID="931" TEXTSTR="  wbl.wtype, wbl.wbillid, wbd.discount, rr.outposid as pid" LINEID="22"/><ROW ID="931" TEXTSTR=" from waybilldet wbd, waybilldetaddprops wbdap, kagent ka," LINEID="23"/><ROW ID="931" TEXTSTR="  materials m, measures ms, waybilllist wbl, currency c, returnrel rr" LINEID="24"/><ROW ID="931" TEXTSTR=" where wbd.posid=wbdap.posid" LINEID="25"/><ROW ID="931" TEXTSTR="  and wbdap.cardid=:cardid" LINEID="26"/><ROW ID="931" TEXTSTR="  and m.matid=wbd.matid" LINEID="27"/><ROW ID="931" TEXTSTR="  and c.currid=wbd.currid" LINEID="28"/><ROW ID="931" TEXTSTR="  and ka.kaid=wbl.kaid" LINEID="29"/><ROW ID="931" TEXTSTR="  and wbl.wbillid=wbd.wbillid" LINEID="30"/><ROW ID="931" TEXTSTR="  and wbl.checked=1" LINEID="31"/><ROW ID="931" TEXTSTR="  and wbl.wtype=6" LINEID="32"/><ROW ID="931" TEXTSTR="  and ms.mid=m.mid" LINEID="33"/><ROW ID="931" TEXTSTR="  and rr.posid=wbd.posid" LINEID="34"/><ROW ID="931" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="35"/><ROW ID="946" TEXTSTR="select cardid from disccards" LINEID="0"/><ROW ID="946" TEXTSTR=" where kaid=:kaid" LINEID="1"/><ROW ID="946" TEXTSTR="  and (expiredate&gt;:ondate or expiredate is null)" LINEID="2"/><ROW ID="627" TEXTSTR="select wbd.posid, wbd.wbillid, wbd.matid, wbd.wid, wbd.amount," LINEID="0"/><ROW ID="627" TEXTSTR="       pwbd.price, pwbd.discount, pwbd.nds, pwbd.currid, pwbd.ondate, pwbd.ptypeid," LINEID="1"/><ROW ID="627" TEXTSTR="       wbd.num, pwbd.onvalue" LINEID="2"/><ROW ID="627" TEXTSTR="from waybilldet wbd, returnrel rr, waybilldet pwbd" LINEID="3"/><ROW ID="627" TEXTSTR="where wbd.wbillid=:wbillid" LINEID="4"/><ROW ID="627" TEXTSTR="      and rr.posid=wbd.posid" LINEID="5"/><ROW ID="627" TEXTSTR="      and pwbd.posid=rr.pposid" LINEID="6"/><ROW ID="948" TEXTSTR="select pd.*, pd.paydocid as destpaydocid" LINEID="0"/><ROW ID="948" TEXTSTR=" from paydoc pd" LINEID="1"/><ROW ID="948" TEXTSTR=" where pd.operid=:operid" LINEID="2"/><ROW ID="948" TEXTSTR="" LINEID="3"/><ROW ID="950" TEXTSTR="insert into useraccesswh (userid, wid)" LINEID="0"/><ROW ID="950" TEXTSTR=" values (:userid, :wid)" LINEID="1"/><ROW ID="951" TEXTSTR="delete from useraccesswh where userid=:userid" LINEID="0"/><ROW ID="949" TEXTSTR="select wh.wid, wh.wid as pid, wh.name, uaw.userid as allow" LINEID="0"/><ROW ID="949" TEXTSTR=" from warehouse wh" LINEID="1"/><ROW ID="949" TEXTSTR=" left outer join useraccesswh uaw on" LINEID="2"/><ROW ID="949" TEXTSTR="   (uaw.wid=wh.wid and (uaw.userid=:userid or uaw.userid is null))" LINEID="3"/><ROW ID="949" TEXTSTR="order by wh.name" LINEID="4"/><ROW ID="952" TEXTSTR="insert into useraccesswh" LINEID="0"/><ROW ID="952" TEXTSTR=" (userid, wid)" LINEID="1"/><ROW ID="952" TEXTSTR="values" LINEID="2"/><ROW ID="952" TEXTSTR=" (:userid, :wid)" LINEID="3"/><ROW ID="952" TEXTSTR="" LINEID="4"/><ROW ID="552" TEXTSTR="select * from sp_wmat_get_by_wh(:matid, :wid, :kaid, :ondate, :wh)" LINEID="0"/><ROW ID="553" TEXTSTR="select * from sp_pos_get(:matid, :wid, :kaid, :ondate, :getempty, :wh)" LINEID="0"/><ROW ID="725" TEXTSTR="select * from sp_mat_move(:matid, :fromdate, :todate, :wid," LINEID="0"/><ROW ID="725" TEXTSTR="  :kaid, :wtype, :wh)" LINEID="1"/><ROW ID="466" TEXTSTR="select wblist.*, wbmove.sourcewid, whouseout.name whout," LINEID="0"/><ROW ID="466" TEXTSTR="  wbmove.destwid, whousein.name whin, kaemp.name personin," LINEID="1"/><ROW ID="466" TEXTSTR="  kaout.name personout, kamiddl.name middleperson" LINEID="2"/><ROW ID="466" TEXTSTR="from warehouse whouseout" LINEID="3"/><ROW ID="466" TEXTSTR=" join waybillmove wbmove on whouseout.wid=wbmove.sourcewid" LINEID="4"/><ROW ID="466" TEXTSTR=" join warehouse whousein on whousein.wid=wbmove.destwid" LINEID="5"/><ROW ID="466" TEXTSTR=" join waybilllist wblist on wbmove.wbillid=wblist.wbillid" LINEID="6"/><ROW ID="466" TEXTSTR=" left outer join kagent kaemp on wblist.personid=kaemp.kaid" LINEID="7"/><ROW ID="466" TEXTSTR=" left outer join kagent kaout on wblist.kaid=kaout.kaid" LINEID="8"/><ROW ID="466" TEXTSTR=" left outer join kagent kamiddl on wbmove.personid=kamiddl.kaid" LINEID="9"/><ROW ID="466" TEXTSTR="where wblist.deleted=0" LINEID="10"/><ROW ID="466" TEXTSTR=" and wblist.wtype=:wtype" LINEID="11"/><ROW ID="466" TEXTSTR=" and (wblist.ondate between :fromdate and :todate)" LINEID="12"/><ROW ID="466" TEXTSTR=" %m" LINEID="13"/><ROW ID="466" TEXTSTR="order by wblist.ondate desc" LINEID="14"/><ROW ID="882" TEXTSTR="select matid, posid, remain, rsv, price, currid, nds," LINEID="0"/><ROW ID="882" TEXTSTR="  onvalue, matname, msrname, 0 as srcid" LINEID="1"/><ROW ID="882" TEXTSTR=" from sp_wmat_get_pos(:ondate, :wid, :wh)" LINEID="2"/><ROW ID="708" TEXTSTR="select sum(formatfloat(cast(wmt.amount as double precision)*cast(wbd.price as double precision)*cast(wbd.onvalue as double precision), -2))" LINEID="0"/><ROW ID="708" TEXTSTR="  from wmatturn wmt, waybilldet wbd, waybilllist wbl" LINEID="1"/><ROW ID="708" TEXTSTR="  where wmt.sourceid=wbd.posid" LINEID="2"/><ROW ID="708" TEXTSTR="   and wbd.wbillid=wbl.wbillid" LINEID="3"/><ROW ID="708" TEXTSTR="   and wbl.defnum&lt;&gt;0" LINEID="4"/><ROW ID="708" TEXTSTR="   and wmt.turntype=-1" LINEID="5"/><ROW ID="708" TEXTSTR="   and wbl.wtype=-5" LINEID="6"/><ROW ID="708" TEXTSTR="   and wmt.ondate between :fromdate and :todate" LINEID="7"/><ROW ID="708" TEXTSTR="   %m" LINEID="8"/><ROW ID="710" TEXTSTR="select sum(formatfloat(cast(wmt.amount as double precision)*cast(wbd.price as double precision)*cast(wbd.onvalue as double precision), -2)) as total," LINEID="0"/><ROW ID="710" TEXTSTR="       sum(formatfloat(cast(wmt.amount as double precision)*cast(wbd2.price as double precision)*cast(wbd2.onvalue as double precision), -2)) as totalin" LINEID="1"/><ROW ID="710" TEXTSTR="  from wmatturn wmt, waybilldet wbd, returnrel rr," LINEID="2"/><ROW ID="710" TEXTSTR="    waybilldet wbd2" LINEID="3"/><ROW ID="710" TEXTSTR="  where wmt.sourceid=rr.dposid" LINEID="4"/><ROW ID="710" TEXTSTR="   and rr.outposid=wbd.posid" LINEID="5"/><ROW ID="710" TEXTSTR="   and wmt.turntype=1" LINEID="6"/><ROW ID="710" TEXTSTR="   and wmt.ondate between :fromdate and :todate" LINEID="7"/><ROW ID="710" TEXTSTR="   and wbd2.posid=rr.pposid" LINEID="8"/><ROW ID="710" TEXTSTR="   %m" LINEID="9"/><ROW ID="710" TEXTSTR="" LINEID="10"/><ROW ID="710" TEXTSTR="" LINEID="11"/><ROW ID="696" TEXTSTR="select sum(formatfloat(cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision), -2)) as summin," LINEID="0"/><ROW ID="696" TEXTSTR="  sum(formatfloat(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision), -2)) as summout" LINEID="1"/><ROW ID="696" TEXTSTR="from wmatturn wmt, waybilldet wbd," LINEID="2"/><ROW ID="696" TEXTSTR="     currency curr, waybilldet wbds, waybilllist wbls," LINEID="3"/><ROW ID="696" TEXTSTR="     currency currs" LINEID="4"/><ROW ID="696" TEXTSTR="where wmt.turntype=-1" LINEID="5"/><ROW ID="696" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="6"/><ROW ID="696" TEXTSTR="      and wbd.posid=wmt.posid" LINEID="7"/><ROW ID="696" TEXTSTR="      and curr.currid=wbd.currid" LINEID="8"/><ROW ID="696" TEXTSTR="      and wbds.posid=wmt.sourceid" LINEID="9"/><ROW ID="696" TEXTSTR="      and currs.currid=wbds.currid" LINEID="10"/><ROW ID="696" TEXTSTR="      and wbls.wbillid=wbds.wbillid" LINEID="11"/><ROW ID="696" TEXTSTR="      and wbls.wtype=-1" LINEID="12"/><ROW ID="696" TEXTSTR="      %m" LINEID="13"/><ROW ID="454" TEXTSTR="select wbdet.posid twbdetid, wbdet.wbillid twbid, wbdet.matid, wbdet.amount," LINEID="0"/><ROW ID="454" TEXTSTR="       wblist.ondate, cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision) price, mat.name matname," LINEID="1"/><ROW ID="454" TEXTSTR="       msr.shortname msrname, mat.artikul, wbdet.nds" LINEID="2"/><ROW ID="454" TEXTSTR="from WAYBILLDET wbdet, MATERIALS mat, MEASURES msr, waybilllist wblist," LINEID="3"/><ROW ID="454" TEXTSTR="     CURRENCY curr" LINEID="4"/><ROW ID="454" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="5"/><ROW ID="454" TEXTSTR="      and wblist.wbillid=wbdet.wbillid" LINEID="6"/><ROW ID="454" TEXTSTR="      and mat.matid=wbdet.matid" LINEID="7"/><ROW ID="454" TEXTSTR="      and msr.mid=mat.mid" LINEID="8"/><ROW ID="454" TEXTSTR="      and curr.currid=wblist.currid" LINEID="9"/><ROW ID="454" TEXTSTR="order by posid" LINEID="10"/><ROW ID="454" TEXTSTR="" LINEID="11"/><ROW ID="953" TEXTSTR="select ms.*" LINEID="0"/><ROW ID="953" TEXTSTR="  from moneysaldo ms" LINEID="1"/><ROW ID="953" TEXTSTR="  where ms.ondate=" LINEID="2"/><ROW ID="953" TEXTSTR="   (" LINEID="3"/><ROW ID="953" TEXTSTR="    select max(ondate) from moneysaldo" LINEID="4"/><ROW ID="953" TEXTSTR="     where currid=ms.currid" LINEID="5"/><ROW ID="953" TEXTSTR="      and (accid=ms.accid or (accid is null and ms.accid is null))" LINEID="6"/><ROW ID="953" TEXTSTR="      and (cashid=ms.cashid or (cashid is null and ms.cashid is null))" LINEID="7"/><ROW ID="953" TEXTSTR="      and ondate&lt;=:ondate" LINEID="8"/><ROW ID="953" TEXTSTR="   )" LINEID="9"/><ROW ID="953" TEXTSTR="" LINEID="10"/><ROW ID="953" TEXTSTR="" LINEID="11"/><ROW ID="955" TEXTSTR="update waybilllist set summall=:summall,summincurr=:summincurr" LINEID="0"/><ROW ID="955" TEXTSTR=" where wbillid=:wbillid" LINEID="1"/><ROW ID="714" TEXTSTR="update waybilllist" LINEID="0"/><ROW ID="714" TEXTSTR=" set summall=summall+:summpos, summincurr=summincurr+:summposcurr" LINEID="1"/><ROW ID="714" TEXTSTR=" where wbillid=:wbillid" LINEID="2"/><ROW ID="775" TEXTSTR="select * from sp_pos_get(:matid, :wid, :kaid, :ondate, :getempty, :wh)" LINEID="0"/><ROW ID="164" TEXTSTR="insert into kagent" LINEID="0"/><ROW ID="164" TEXTSTR=" (kaid, Name, FullName, INN, OKPO, CertNum, Address, Phone, EMail, WWW, Fax," LINEID="1"/><ROW ID="164" TEXTSTR="  City, District, Country, PostIndex, deleted, Notes, kpp, ndspayer, birthdate," LINEID="2"/><ROW ID="164" TEXTSTR="  ktype, kakind, job, ptypeid, jobtype, def, userid)" LINEID="3"/><ROW ID="164" TEXTSTR="values" LINEID="4"/><ROW ID="164" TEXTSTR=" (:kaid, :Name, :FullName, :INN, :OKPO, :CertNum, :Address, :Phone, :EMail," LINEID="5"/><ROW ID="164" TEXTSTR="  :WWW, :Fax, :City, :District, :Country, :PostIndex, :deleted, :Notes," LINEID="6"/><ROW ID="164" TEXTSTR="  :kpp, :ndspayer, :birthdate, :ktype, :kakind, :job, :ptypeid, :jobtype, 0, :userid)" LINEID="7"/><ROW ID="165" TEXTSTR="update KAgent" LINEID="0"/><ROW ID="165" TEXTSTR="set Name=:Name, FullName=:FullName, INN=:INN, OKPO=:OKPO, CertNum=:CertNum," LINEID="1"/><ROW ID="165" TEXTSTR="    Address=:Address, Phone=:Phone, EMail=:EMail, WWW=:WWW, Fax=:Fax," LINEID="2"/><ROW ID="165" TEXTSTR="    City=:City, District=:District, Country=:Country, PostIndex=:PostIndex," LINEID="3"/><ROW ID="165" TEXTSTR="    deleted=:deleted, Notes=:Notes, kpp=:kpp, ndspayer=:ndspayer," LINEID="4"/><ROW ID="165" TEXTSTR="    birthdate=:birthdate, ktype=:ktype, kakind=:kakind, job=:job," LINEID="5"/><ROW ID="165" TEXTSTR="    ptypeid=:ptypeid, jobtype=:jobtype, userid=:userid" LINEID="6"/><ROW ID="165" TEXTSTR="where kaid=:kaid" LINEID="7"/><ROW ID="956" TEXTSTR="update kagent set userid=null" LINEID="0"/><ROW ID="956" TEXTSTR="  where userid=:userid and ktype=2" LINEID="1"/><ROW ID="638" TEXTSTR="select r.*, 1 as docimg, rl.name" LINEID="0"/><ROW ID="638" TEXTSTR="from reports r, replng rl, languages l" LINEID="1"/><ROW ID="638" TEXTSTR="where r.grpid=:grpid" LINEID="2"/><ROW ID="638" TEXTSTR="  and rl.repid=r.repid" LINEID="3"/><ROW ID="638" TEXTSTR="  and rl.langid=l.langid" LINEID="4"/><ROW ID="638" TEXTSTR="  and l.shortname=:lang" LINEID="5"/><ROW ID="638" TEXTSTR=" order by r.num" LINEID="6"/><ROW ID="957" TEXTSTR="select * from taxwb where twbid=:docid" LINEID="0"/><ROW ID="959" TEXTSTR="select * from sp_ordered_get(:matid, :wid, :kaid, :ondate," LINEID="0"/><ROW ID="959" TEXTSTR="  :getempty, :wh)" LINEID="1"/><ROW ID="961" TEXTSTR="insert into waybilldet" LINEID="0"/><ROW ID="961" TEXTSTR=" (posid, wbillid, matid, wid, amount, price, discount, nds, currid, ondate," LINEID="1"/><ROW ID="961" TEXTSTR="  ptypeid, num, checked, onvalue, total)" LINEID="2"/><ROW ID="961" TEXTSTR="select :posid, wbillid, matid, wid, amount, price, discount, nds, currid, ondate," LINEID="3"/><ROW ID="961" TEXTSTR="  ptypeid, num, checked, onvalue, total" LINEID="4"/><ROW ID="961" TEXTSTR=" from waybilldet where posid=:oldposid" LINEID="5"/><ROW ID="961" TEXTSTR="" LINEID="6"/><ROW ID="960" TEXTSTR="update waybilldet set wbillid=:wbillid, matid=:matid," LINEID="0"/><ROW ID="960" TEXTSTR="  wid=:wid, amount=:amount, price=:price, discount=:discount," LINEID="1"/><ROW ID="960" TEXTSTR="  nds=:nds, currid=:currid, ondate=:ondate, ptypeid=:ptypeid, num=:num," LINEID="2"/><ROW ID="960" TEXTSTR="  total=:total, onvalue=:onvalue" LINEID="3"/><ROW ID="960" TEXTSTR=" where posid=:posid" LINEID="4"/><ROW ID="962" TEXTSTR="update waybilllist set checked=:checked where wbillid=:wbillid" LINEID="0"/><ROW ID="963" TEXTSTR="execute procedure sp_wmatturn_upd(:wbillid, :turntype)" LINEID="0"/><ROW ID="964" TEXTSTR="select dr.rdocid, wbl2.wbillid" LINEID="0"/><ROW ID="964" TEXTSTR=" from docsrel dr, waybilllist wbl, docs d, waybilllist wbl2" LINEID="1"/><ROW ID="964" TEXTSTR=" where wbl.wbillid=:wbillid" LINEID="2"/><ROW ID="964" TEXTSTR="  and dr.docid=wbl.docid" LINEID="3"/><ROW ID="964" TEXTSTR="  and dr.rdocid=d.docid" LINEID="4"/><ROW ID="964" TEXTSTR="  and d.doctype=:doctype" LINEID="5"/><ROW ID="964" TEXTSTR="  and wbl2.docid=d.docid" LINEID="6"/><ROW ID="964" TEXTSTR="" LINEID="7"/><ROW ID="965" TEXTSTR="insert into posrel (posid, cposid)" LINEID="0"/><ROW ID="965" TEXTSTR=" values (:posid, :cposid)" LINEID="1"/><ROW ID="966" TEXTSTR="execute procedure sp_order_upd_rsv(:wbillid)" LINEID="0"/><ROW ID="967" TEXTSTR="insert into docsrel (docid, rdocid)" LINEID="0"/><ROW ID="967" TEXTSTR="  values" LINEID="1"/><ROW ID="967" TEXTSTR="  (" LINEID="2"/><ROW ID="967" TEXTSTR="   (select docid from taxwb where twbid=:twbid)," LINEID="3"/><ROW ID="967" TEXTSTR="   (select docid from waybilllist where wbillid=:wbillid)" LINEID="4"/><ROW ID="967" TEXTSTR="  )" LINEID="5"/><ROW ID="968" TEXTSTR="select sum(amount)" LINEID="0"/><ROW ID="968" TEXTSTR=" from wmatturn" LINEID="1"/><ROW ID="968" TEXTSTR=" where turntype=2 and sourceid=:posid" LINEID="2"/><ROW ID="969" TEXTSTR="delete from wmatturn where sourceid=:posid and turntype=2" LINEID="0"/><ROW ID="970" TEXTSTR="update wmatturn set amount=0 where sourceid=:posid" LINEID="0"/><ROW ID="970" TEXTSTR=" and turntype=2" LINEID="1"/><ROW ID="150" TEXTSTR="select ka.*, ks.saldo" LINEID="0"/><ROW ID="150" TEXTSTR=" from kagent ka" LINEID="1"/><ROW ID="150" TEXTSTR=" left outer join kagentsaldo ks on" LINEID="2"/><ROW ID="150" TEXTSTR="  (ks.kaid=ka.kaid" LINEID="3"/><ROW ID="150" TEXTSTR="  and (ks.saldo is null" LINEID="4"/><ROW ID="150" TEXTSTR="  or ks.ondate=" LINEID="5"/><ROW ID="150" TEXTSTR="   (select max(ondate) from kagentsaldo where kaid=ka.kaid" LINEID="6"/><ROW ID="150" TEXTSTR="     and ondate&lt;=:ondate)))" LINEID="7"/><ROW ID="150" TEXTSTR=" where ka.deleted=0" LINEID="8"/><ROW ID="150" TEXTSTR="  and (coalesce(ka.archived, 0)=0 or :showarchived = 1)" LINEID="9"/><ROW ID="150" TEXTSTR="  %m" LINEID="10"/><ROW ID="150" TEXTSTR="" LINEID="11"/><ROW ID="971" TEXTSTR="update kagent set archived=:archived where kaid=:kaid" LINEID="0"/><ROW ID="300" TEXTSTR="select name, kaid" LINEID="0"/><ROW ID="300" TEXTSTR=" from kagent" LINEID="1"/><ROW ID="300" TEXTSTR=" where deleted=0 and coalesce(archived, 0)=0" LINEID="2"/><ROW ID="300" TEXTSTR=" order by name" LINEID="3"/><ROW ID="973" TEXTSTR="select wbd.*, wbdap.notes" LINEID="0"/><ROW ID="973" TEXTSTR="  from waybilldet wbd" LINEID="1"/><ROW ID="973" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbd.posid" LINEID="2"/><ROW ID="973" TEXTSTR=" where wbd.posid=:posid" LINEID="3"/><ROW ID="973" TEXTSTR="" LINEID="4"/><ROW ID="978" TEXTSTR="delete from wmatturn where posid=:posid and sourceid=posid" LINEID="0"/><ROW ID="689" TEXTSTR="select pr.matid, pr.wid, pr.posid," LINEID="0"/><ROW ID="689" TEXTSTR="  (case" LINEID="1"/><ROW ID="689" TEXTSTR="    when pr.remain &gt; 0 then pr.remain-pr.rsv" LINEID="2"/><ROW ID="689" TEXTSTR="    when pr.ordered &gt; 0 then pr.ordered-pr.rsv" LINEID="3"/><ROW ID="689" TEXTSTR="   end) as amount," LINEID="4"/><ROW ID="689" TEXTSTR="   pr.rsv, wbd.ondate, wbd.price, wbd.currid, cr.onvalue," LINEID="5"/><ROW ID="689" TEXTSTR="   wbd.nds, wbd.discount, curr.shortname as currname," LINEID="6"/><ROW ID="689" TEXTSTR="   wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="7"/><ROW ID="689" TEXTSTR="   s.serialno as sn, wbl.wtype, wbl.wbillid, wbdap.gtd," LINEID="8"/><ROW ID="689" TEXTSTR="   wbdap.certnum, wbdap.certdate, wbdap.producer," LINEID="9"/><ROW ID="689" TEXTSTR="  (case" LINEID="10"/><ROW ID="689" TEXTSTR="    when pr.remain &gt; 0 then 0" LINEID="11"/><ROW ID="689" TEXTSTR="    when pr.ordered &gt; 0 then 1" LINEID="12"/><ROW ID="689" TEXTSTR="   end) as postype" LINEID="13"/><ROW ID="689" TEXTSTR="from posremains pr" LINEID="14"/><ROW ID="689" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid" LINEID="15"/><ROW ID="689" TEXTSTR="     left outer join serials s on s.posid=pr.posid" LINEID="16"/><ROW ID="689" TEXTSTR="     join waybilldet wbd on wbd.posid=pr.posid" LINEID="17"/><ROW ID="689" TEXTSTR="     join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="18"/><ROW ID="689" TEXTSTR="     join warehouse wh on wh.wid=pr.wid" LINEID="19"/><ROW ID="689" TEXTSTR="     left outer join currency curr on curr.currid=wbd.currid" LINEID="20"/><ROW ID="689" TEXTSTR="     left outer join currencyrate cr on" LINEID="21"/><ROW ID="689" TEXTSTR="       (curr.currid=cr.currid and cr.ondate=" LINEID="22"/><ROW ID="689" TEXTSTR="        (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate)" LINEID="23"/><ROW ID="689" TEXTSTR="       )" LINEID="24"/><ROW ID="689" TEXTSTR="     join materials mats on mats.matid=pr.matid" LINEID="25"/><ROW ID="689" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="26"/><ROW ID="689" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="27"/><ROW ID="689" TEXTSTR="                 from posremains" LINEID="28"/><ROW ID="689" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="29"/><ROW ID="689" TEXTSTR="      and pr.matid=:matid" LINEID="30"/><ROW ID="689" TEXTSTR="      and pr.wid=:wid" LINEID="31"/><ROW ID="689" TEXTSTR="      and wbl.wtype not in(4,6)" LINEID="32"/><ROW ID="689" TEXTSTR="      and (pr.remain&gt;0 or pr.ordered&gt;0)" LINEID="33"/><ROW ID="689" TEXTSTR="union all" LINEID="34"/><ROW ID="689" TEXTSTR="" LINEID="35"/><ROW ID="689" TEXTSTR="select pr.matid, pr.wid, pr.posid, (pr.remain-pr.rsv) as amount, pr.rsv, wbl.ondate," LINEID="36"/><ROW ID="689" TEXTSTR="       wbd.price, wbd.currid, cr.onvalue, wbd.nds, wbd.discount," LINEID="37"/><ROW ID="689" TEXTSTR="       curr.shortname as currname, wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="38"/><ROW ID="689" TEXTSTR="       s.serialno as sn, wbl.wtype, wbl.wbillid, wbdap.gtd, wbdap.certnum," LINEID="39"/><ROW ID="689" TEXTSTR="       wbdap.certdate, wbdap.producer, cast(0 as integer)" LINEID="40"/><ROW ID="689" TEXTSTR="from posremains pr" LINEID="41"/><ROW ID="689" TEXTSTR="     join waybilldet wbd on wbd.posid=pr.posid" LINEID="42"/><ROW ID="689" TEXTSTR="     join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="43"/><ROW ID="689" TEXTSTR="     join warehouse wh on wh.wid=pr.wid" LINEID="44"/><ROW ID="689" TEXTSTR="     join currency curr on curr.currid=wbd.currid" LINEID="45"/><ROW ID="689" TEXTSTR="     join currencyrate cr on (curr.currid=cr.currid and cr.ondate=" LINEID="46"/><ROW ID="689" TEXTSTR="      (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate))" LINEID="47"/><ROW ID="689" TEXTSTR="     join materials mats on mats.matid=pr.matid" LINEID="48"/><ROW ID="689" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="49"/><ROW ID="689" TEXTSTR="     join extrel er on er.intposid=pr.posid" LINEID="50"/><ROW ID="689" TEXTSTR="     join waybilldet wbdext on wbdext.posid=er.extposid" LINEID="51"/><ROW ID="689" TEXTSTR="     join waybilllist wblext on wblext.wbillid=wbdext.wbillid" LINEID="52"/><ROW ID="689" TEXTSTR="     left outer join serials s on s.posid=er.extposid" LINEID="53"/><ROW ID="689" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid" LINEID="54"/><ROW ID="689" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="55"/><ROW ID="689" TEXTSTR="                 from posremains" LINEID="56"/><ROW ID="689" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="57"/><ROW ID="689" TEXTSTR="      and pr.matid=:matid" LINEID="58"/><ROW ID="689" TEXTSTR="      and wbl.wtype in (4,6)" LINEID="59"/><ROW ID="689" TEXTSTR="      and pr.remain&gt;0" LINEID="60"/><ROW ID="689" TEXTSTR="      and pr.wid=:wid" LINEID="61"/><ROW ID="689" TEXTSTR="" LINEID="62"/><ROW ID="689" TEXTSTR="order by 13 %d" LINEID="63"/><ROW ID="979" TEXTSTR="select * from sp_ordered_list(:matid, :ondate)" LINEID="0"/><ROW ID="972" TEXTSTR="select wbd.*, wbdap.notes, m.name as matname, m.artikul," LINEID="0"/><ROW ID="972" TEXTSTR="  m.barcode, ms.shortname as msrname, pr.rsv" LINEID="1"/><ROW ID="972" TEXTSTR=" from waybilldet wbd" LINEID="2"/><ROW ID="972" TEXTSTR="  join materials m on m.matid=wbd.matid" LINEID="3"/><ROW ID="972" TEXTSTR="  join measures ms on ms.mid=m.mid" LINEID="4"/><ROW ID="972" TEXTSTR="  join posremains pr on pr.posid=wbd.posid" LINEID="5"/><ROW ID="972" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbd.posid=wbdap.posid" LINEID="6"/><ROW ID="972" TEXTSTR=" where wbd.wbillid=-16" LINEID="7"/><ROW ID="972" TEXTSTR="  and pr.ondate=(" LINEID="8"/><ROW ID="972" TEXTSTR="    select max(ondate) from posremains" LINEID="9"/><ROW ID="972" TEXTSTR="      where posid=pr.posid and ondate&lt;=:ondate)" LINEID="10"/><ROW ID="475" TEXTSTR="select wbl.wtype, wbl.wbillid, wbl.ondate, wt.amount, wbl.num," LINEID="0"/><ROW ID="475" TEXTSTR="  wh.name, wbd.price, c.shortname, wbd.onvalue, wbd.posid," LINEID="1"/><ROW ID="475" TEXTSTR="  ka.name as kagentname, wbdin.price as pricein, wbd.posid as pid" LINEID="2"/><ROW ID="475" TEXTSTR=" from wmatturn wt" LINEID="3"/><ROW ID="475" TEXTSTR=" join waybilldet wbdin on wbdin.posid=wt.posid" LINEID="4"/><ROW ID="475" TEXTSTR=" join waybilldet wbd on wt.sourceid=wbd.posid" LINEID="5"/><ROW ID="475" TEXTSTR=" join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="6"/><ROW ID="475" TEXTSTR=" join warehouse wh on wh.wid=wbd.wid" LINEID="7"/><ROW ID="475" TEXTSTR=" left outer join currency c on wbd.currid=c.currid" LINEID="8"/><ROW ID="475" TEXTSTR=" left outer join kagent ka on ka.kaid=wbl.kaid" LINEID="9"/><ROW ID="475" TEXTSTR=" where wbl.ondate between :fromdate and :todate" LINEID="10"/><ROW ID="475" TEXTSTR="  and wt.turntype=2" LINEID="11"/><ROW ID="475" TEXTSTR="  and wt.matid=:matid" LINEID="12"/><ROW ID="475" TEXTSTR="  and wt.amount&gt;0" LINEID="13"/><ROW ID="475" TEXTSTR="  %m" LINEID="14"/><ROW ID="475" TEXTSTR="" LINEID="15"/><ROW ID="980" TEXTSTR="update waybilldet set wbillid=:wbillid, currid=:currid where posid=:posid" LINEID="0"/><ROW ID="981" TEXTSTR="select distinct wbd.posid" LINEID="0"/><ROW ID="981" TEXTSTR=" from waybilldet wbd, wmatturn wmt" LINEID="1"/><ROW ID="981" TEXTSTR=" where wbd.wbillid=:wbillid" LINEID="2"/><ROW ID="981" TEXTSTR="  and wmt.posid=wbd.posid" LINEID="3"/><ROW ID="981" TEXTSTR="  and wmt.turntype=2" LINEID="4"/><ROW ID="977" TEXTSTR="insert into waybilldetaddprops (posid, notes, certnum)" LINEID="0"/><ROW ID="977" TEXTSTR=" values (:posid, :notes, :certnum)" LINEID="1"/><ROW ID="974" TEXTSTR="insert into waybilldet (posid, wbillid, matid, wid, amount, num, nds, ondate)" LINEID="0"/><ROW ID="974" TEXTSTR=" values (:posid, :wbillid, :matid, :wid, :amount, :num, :nds, :ondate)" LINEID="1"/><ROW ID="975" TEXTSTR="update waybilldet set matid=:matid, wid=:wid, amount=:amount," LINEID="0"/><ROW ID="975" TEXTSTR="  wbillid=:wbillid, num=:num, nds=:nds, ondate=:ondate" LINEID="1"/><ROW ID="975" TEXTSTR=" where posid=:posid" LINEID="2"/><ROW ID="982" TEXTSTR="select * from sp_ordered_list(:fromdate, :todate, :matid, :kaid, :wtype, :checked)" LINEID="0"/><ROW ID="796" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="796" TEXTSTR="  wh.name whname, mat.artikul as artikul," LINEID="1"/><ROW ID="796" TEXTSTR="  curr.shortname as currname, 0 as postype," LINEID="2"/><ROW ID="796" TEXTSTR="  s.serialno as sn, wbdap.producer, mat.serials as bySN," LINEID="3"/><ROW ID="796" TEXTSTR="  wbdap.gtd, wbdap.certnum, wbdap.certdate, acd.shippedamount," LINEID="4"/><ROW ID="796" TEXTSTR="  acd.rsvamount, wbdet.posid as realposid, ar.accposid," LINEID="5"/><ROW ID="796" TEXTSTR="  dc.cardid, dc.num as cardnum, ka.name as holder" LINEID="6"/><ROW ID="796" TEXTSTR="from WAYBILLDET wbdet" LINEID="7"/><ROW ID="796" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="8"/><ROW ID="796" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="9"/><ROW ID="796" TEXTSTR="     join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="10"/><ROW ID="796" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="11"/><ROW ID="796" TEXTSTR="     join accoutposrel ar on ar.posid=wbdet.posid" LINEID="12"/><ROW ID="796" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="13"/><ROW ID="796" TEXTSTR="     left outer join accoutdet acd on acd.posid=wbdet.posid" LINEID="14"/><ROW ID="796" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="15"/><ROW ID="796" TEXTSTR="     left outer join disccards dc on dc.cardid=wbdap.cardid" LINEID="16"/><ROW ID="796" TEXTSTR="     left outer join kagent ka on ka.kaid=dc.kaid" LINEID="17"/><ROW ID="796" TEXTSTR="where wbdet.wbillid=:wbillid" LINEID="18"/><ROW ID="796" TEXTSTR="" LINEID="19"/><ROW ID="796" TEXTSTR="" LINEID="20"/><ROW ID="984" TEXTSTR="select turntype" LINEID="0"/><ROW ID="984" TEXTSTR=" from wmatturn" LINEID="1"/><ROW ID="984" TEXTSTR=" where posid=:posid and sourceid=posid" LINEID="2"/><ROW ID="985" TEXTSTR="select * from sp_get_pos_status(:wbillid)" LINEID="0"/><ROW ID="986" TEXTSTR="select count(posid) from waybilldet where wbillid=:wbillid" LINEID="0"/><ROW ID="987" TEXTSTR="select count(wbillid) from waybilllist where wtype=:wtype" LINEID="0"/><ROW ID="606" TEXTSTR="select pr.matid, pr.wid, pr.posid, (pr.remain-pr.rsv) as amount, pr.rsv, wbd.ondate," LINEID="0"/><ROW ID="606" TEXTSTR="       wbd.price, wbd.currid, cr.onvalue, wbd.nds, wbd.discount," LINEID="1"/><ROW ID="606" TEXTSTR="       curr.shortname as currname,  wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="2"/><ROW ID="606" TEXTSTR="       s.serialno as sn, wbl.wtype, wbl.wbillid, 0 as postype," LINEID="3"/><ROW ID="606" TEXTSTR="       wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.producer" LINEID="4"/><ROW ID="606" TEXTSTR="" LINEID="5"/><ROW ID="606" TEXTSTR="from posremains pr" LINEID="6"/><ROW ID="606" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid" LINEID="7"/><ROW ID="606" TEXTSTR="     left outer join serials s on s.posid=pr.posid," LINEID="8"/><ROW ID="606" TEXTSTR="     waybilldet wbd, waybilllist wbl, warehouse wh," LINEID="9"/><ROW ID="606" TEXTSTR="     currency curr, currencyrate cr, materials mats, measures msr" LINEID="10"/><ROW ID="606" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="11"/><ROW ID="606" TEXTSTR="                 from posremains" LINEID="12"/><ROW ID="606" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="13"/><ROW ID="606" TEXTSTR="      and pr.matid=:matid" LINEID="14"/><ROW ID="606" TEXTSTR="      and wbl.kaid=:kaid" LINEID="15"/><ROW ID="606" TEXTSTR="      and wbd.posid=pr.posid" LINEID="16"/><ROW ID="606" TEXTSTR="      and wbl.wbillid=wbd.wbillid" LINEID="17"/><ROW ID="606" TEXTSTR="      and wbl.wtype&lt;&gt;4" LINEID="18"/><ROW ID="606" TEXTSTR="      and wh.wid=pr.wid" LINEID="19"/><ROW ID="606" TEXTSTR="      and curr.currid=wbd.currid" LINEID="20"/><ROW ID="606" TEXTSTR="      and curr.currid=cr.currid" LINEID="21"/><ROW ID="606" TEXTSTR="      and cr.ondate=" LINEID="22"/><ROW ID="606" TEXTSTR="      (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate)" LINEID="23"/><ROW ID="606" TEXTSTR="      and mats.matid=pr.matid" LINEID="24"/><ROW ID="606" TEXTSTR="      and msr.mid=mats.mid" LINEID="25"/><ROW ID="606" TEXTSTR="      and pr.remain&gt;0" LINEID="26"/><ROW ID="606" TEXTSTR="      and pr.wid=:wid" LINEID="27"/><ROW ID="606" TEXTSTR="" LINEID="28"/><ROW ID="606" TEXTSTR="union all" LINEID="29"/><ROW ID="606" TEXTSTR="" LINEID="30"/><ROW ID="606" TEXTSTR="select pr.matid, pr.wid, pr.posid, (pr.remain-pr.rsv) as amount, pr.rsv, wbl.ondate," LINEID="31"/><ROW ID="606" TEXTSTR="       wbd.price, wbd.currid, cr.onvalue, wbd.nds, wbd.discount, curr.shortname as currname," LINEID="32"/><ROW ID="606" TEXTSTR="       wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="33"/><ROW ID="606" TEXTSTR="       s.serialno as sn, wbl.wtype, wbl.wbillid, 0," LINEID="34"/><ROW ID="606" TEXTSTR="       wbdap.gtd, wbdap.certnum, wbdap.certdate, wbdap.producer" LINEID="35"/><ROW ID="606" TEXTSTR="from posremains pr" LINEID="36"/><ROW ID="606" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid," LINEID="37"/><ROW ID="606" TEXTSTR="     waybilldet wbd, waybilllist wbl, warehouse wh," LINEID="38"/><ROW ID="606" TEXTSTR="     currency curr, currencyrate cr, materials mats, measures msr," LINEID="39"/><ROW ID="606" TEXTSTR="     extrel er" LINEID="40"/><ROW ID="606" TEXTSTR="     left outer join serials s on s.posid=er.extposid," LINEID="41"/><ROW ID="606" TEXTSTR="     waybilldet wbdext, waybilllist wblext" LINEID="42"/><ROW ID="606" TEXTSTR="" LINEID="43"/><ROW ID="606" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="44"/><ROW ID="606" TEXTSTR="                 from posremains" LINEID="45"/><ROW ID="606" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="46"/><ROW ID="606" TEXTSTR="      and pr.matid=:matid" LINEID="47"/><ROW ID="606" TEXTSTR="      and wbd.posid=pr.posid" LINEID="48"/><ROW ID="606" TEXTSTR="      and wbl.wbillid=wbd.wbillid" LINEID="49"/><ROW ID="606" TEXTSTR="      and wbl.wtype in (4,6)" LINEID="50"/><ROW ID="606" TEXTSTR="      and wh.wid=pr.wid" LINEID="51"/><ROW ID="606" TEXTSTR="      and curr.currid=wbd.currid" LINEID="52"/><ROW ID="606" TEXTSTR="      and curr.currid=cr.currid" LINEID="53"/><ROW ID="606" TEXTSTR="      and cr.ondate=" LINEID="54"/><ROW ID="606" TEXTSTR="      (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate)" LINEID="55"/><ROW ID="606" TEXTSTR="      and mats.matid=pr.matid" LINEID="56"/><ROW ID="606" TEXTSTR="      and msr.mid=mats.mid" LINEID="57"/><ROW ID="606" TEXTSTR="      and pr.remain&gt;0" LINEID="58"/><ROW ID="606" TEXTSTR="      and er.intposid=pr.posid" LINEID="59"/><ROW ID="606" TEXTSTR="      and wbdext.posid=er.extposid" LINEID="60"/><ROW ID="606" TEXTSTR="      and wblext.wbillid=wbdext.wbillid" LINEID="61"/><ROW ID="606" TEXTSTR="      and wblext.kaid=:KAID" LINEID="62"/><ROW ID="606" TEXTSTR="      and pr.wid=:wid" LINEID="63"/><ROW ID="606" TEXTSTR=" order by 13 %d" LINEID="64"/><ROW ID="988" TEXTSTR="select wbl.*, ka.name as kaname" LINEID="0"/><ROW ID="988" TEXTSTR=" from waybilllist wbl, kagent ka" LINEID="1"/><ROW ID="988" TEXTSTR=" where wbl.kaid=ka.kaid" LINEID="2"/><ROW ID="988" TEXTSTR="  and wbl.wbillid=:wbillid" LINEID="3"/><ROW ID="976" TEXTSTR="insert into waybilllist (wbillid, num, ondate, wtype, deleted, checked, defnum)" LINEID="0"/><ROW ID="976" TEXTSTR=" values (:wbillid, :num, :ondate, :wtype, :deleted, :checked, :defnum)" LINEID="1"/><ROW ID="990" TEXTSTR="insert into waybilldet (posid, wbillid, matid, wid, amount, num, nds, ondate, currid, onvalue, price, discount)" LINEID="0"/><ROW ID="990" TEXTSTR=" values (:posid, :wbillid, :matid, :wid, :amount, :num, :nds, :ondate, :currid, :onvalue, :price, :discount)" LINEID="1"/><ROW ID="989" TEXTSTR="insert into waybilllist (wbillid, num, ondate, wtype, deleted, checked, defnum, currid, kaid, onvalue)" LINEID="0"/><ROW ID="989" TEXTSTR=" values (:wbillid, :num, :ondate, :wtype, :deleted, :checked, :defnum, :currid, :kaid, :onvalue)" LINEID="1"/><ROW ID="765" TEXTSTR="select pds.*, cds.name as cashnamesrc, eas.accnum as accnumsrc," LINEID="0"/><ROW ID="765" TEXTSTR="  cdd.name as cashnamedest, ead.accnum as accnumdest, pdd.total as totaldest," LINEID="1"/><ROW ID="765" TEXTSTR="  c.shortname, cd.shortname as shortnamedest, cast(pdc.total as double precision) as totalcharge," LINEID="2"/><ROW ID="765" TEXTSTR="  ct.name as chargename, bs.name as banksrc, bd.name as bankdest" LINEID="3"/><ROW ID="765" TEXTSTR=" from paydoc pds" LINEID="4"/><ROW ID="765" TEXTSTR="  join paydoc pdd on pds.operid=pdd.operid" LINEID="5"/><ROW ID="765" TEXTSTR="  join currency c on c.currid=pds.currid" LINEID="6"/><ROW ID="765" TEXTSTR="  join currency cd on pdd.currid=cd.currid" LINEID="7"/><ROW ID="765" TEXTSTR="  left outer join paydoc pdc on (pdc.operid=pds.operid and pdc.doctype=-2)" LINEID="8"/><ROW ID="765" TEXTSTR="  left outer join chargetype ct on ct.ctypeid=pdc.ctypeid" LINEID="9"/><ROW ID="765" TEXTSTR="  left outer join cashdesks cds on cds.cashid=pds.cashid" LINEID="10"/><ROW ID="765" TEXTSTR="  left outer join agentaccount eas on eas.accid=pds.accid" LINEID="11"/><ROW ID="765" TEXTSTR="  left outer join banks bs on eas.bankid=bs.bankid" LINEID="12"/><ROW ID="765" TEXTSTR="  left outer join cashdesks cdd on cdd.cashid=pdd.cashid" LINEID="13"/><ROW ID="765" TEXTSTR="  left outer join agentaccount ead on ead.accid=pdd.accid" LINEID="14"/><ROW ID="765" TEXTSTR="  left outer join banks bd on ead.bankid=bd.bankid" LINEID="15"/><ROW ID="765" TEXTSTR=" where pds.operid is not null" LINEID="16"/><ROW ID="765" TEXTSTR="  and pds.doctype&lt;0" LINEID="17"/><ROW ID="765" TEXTSTR="  and pds.doctype&lt;&gt;-2" LINEID="18"/><ROW ID="765" TEXTSTR="  and pdd.doctype&lt;&gt;-2" LINEID="19"/><ROW ID="765" TEXTSTR="  and pds.doctype&lt;&gt;pdd.doctype" LINEID="20"/><ROW ID="765" TEXTSTR="  and pds.ondate between :fromdate and :todate" LINEID="21"/><ROW ID="765" TEXTSTR="  %m" LINEID="22"/><ROW ID="765" TEXTSTR="" LINEID="23"/><ROW ID="765" TEXTSTR="union all" LINEID="24"/><ROW ID="765" TEXTSTR="" LINEID="25"/><ROW ID="765" TEXTSTR="select pds.*, cds.name as cashnamesrc, eas.accnum as accnumsrc," LINEID="26"/><ROW ID="765" TEXTSTR="  cds.name as cashnamedest, eas.accnum as accnumdest, pds.total as totaldest," LINEID="27"/><ROW ID="765" TEXTSTR="  c.shortname, c.shortname as shortnamedest, cast(0 as double precision)," LINEID="28"/><ROW ID="765" TEXTSTR="  cast(&apos;&apos; as varchar(128)), bs.name as banksrc, bs.name as bankdest" LINEID="29"/><ROW ID="765" TEXTSTR=" from paydoc pds" LINEID="30"/><ROW ID="765" TEXTSTR="  join currency c on c.currid=pds.currid" LINEID="31"/><ROW ID="765" TEXTSTR="  left outer join cashdesks cds on cds.cashid=pds.cashid" LINEID="32"/><ROW ID="765" TEXTSTR="  left outer join agentaccount eas on eas.accid=pds.accid" LINEID="33"/><ROW ID="765" TEXTSTR="  left outer join banks bs on eas.bankid=bs.bankid" LINEID="34"/><ROW ID="765" TEXTSTR=" where pds.operid is not null" LINEID="35"/><ROW ID="765" TEXTSTR="  and pds.doctype=6" LINEID="36"/><ROW ID="765" TEXTSTR="  and pds.ondate between :fromdate and :todate" LINEID="37"/><ROW ID="765" TEXTSTR="" LINEID="38"/><ROW ID="765" TEXTSTR="" LINEID="39"/><ROW ID="765" TEXTSTR="" LINEID="40"/><ROW ID="947" TEXTSTR="select * from sp_get_last_price(:matid, :kaid, :ondate)" LINEID="0"/><ROW ID="322" TEXTSTR="insert into payorder (paydocid, num, ondate, acc, accid, paydest, pkindid, paytype, paytime, code, res, q," LINEID="0"/><ROW ID="322" TEXTSTR="  dest, entaccid, add1, add2, add3, add4, add5, add6, add7)" LINEID="1"/><ROW ID="322" TEXTSTR=" values (:paydocid, :num, :ondate, :acc, :accid, :paydest, :pkindid, :paytype, :paytime, :code, :res, :q, :dest, :entaccid," LINEID="2"/><ROW ID="322" TEXTSTR="  :add1, :add2, :add3, :add4, :add5, :add6, :add7)" LINEID="3"/><ROW ID="312" TEXTSTR="select aa.*, b.mfo, b.name, act.name as typename, b.coracc" LINEID="0"/><ROW ID="312" TEXTSTR=" from agentaccount aa, banks b, accounttype act" LINEID="1"/><ROW ID="312" TEXTSTR=" where aa.bankid=b.bankid" LINEID="2"/><ROW ID="312" TEXTSTR="  and act.typeid=aa.typeid" LINEID="3"/><ROW ID="312" TEXTSTR="  and aa.kaid=:kaid" LINEID="4"/><ROW ID="897" TEXTSTR="select wbl.*, ka.name kaname, ka.fullname kafullname, ka.phone kaphone," LINEID="0"/><ROW ID="897" TEXTSTR=" ka.ADDRESS, ka.city, ka.district, ka.country, ka.postindex, ka.fax, ka.email," LINEID="1"/><ROW ID="897" TEXTSTR=" ka.www, ka.ktype katype, kaemp.name personname, curr.shortname currname" LINEID="2"/><ROW ID="897" TEXTSTR="from docs d" LINEID="3"/><ROW ID="897" TEXTSTR=" join waybilllist wbl on wbl.docid=d.docid and wbl.ondate between :fromdate and :todate" LINEID="4"/><ROW ID="897" TEXTSTR="                        and wbl.deleted=0" LINEID="5"/><ROW ID="897" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="6"/><ROW ID="897" TEXTSTR="left join kagent kaemp on wbl.personid=kaemp.kaid" LINEID="7"/><ROW ID="897" TEXTSTR="left join currency curr on curr.currid=wbl.currid" LINEID="8"/><ROW ID="897" TEXTSTR="where d.doctype=:doctype" LINEID="9"/><ROW ID="897" TEXTSTR="    %m" LINEID="10"/><ROW ID="897" TEXTSTR="order by wbl.ondate desc" LINEID="11"/><ROW ID="992" TEXTSTR="delete from entexparams where kaid=:kaid" LINEID="0"/><ROW ID="993" TEXTSTR="insert into entexparams (kaid, autonum, preffix, suffix, gen, wtype)" LINEID="0"/><ROW ID="993" TEXTSTR=" values (:kaid, :autonum, :preffix, :suffix, :gen, :wtype)" LINEID="1"/><ROW ID="994" TEXTSTR="select * from entexparams where kaid=:kaid" LINEID="0"/><ROW ID="996" TEXTSTR="select * from entities" LINEID="0"/><ROW ID="998" TEXTSTR="select a.*, e.tablename from attrs a, entities e" LINEID="0"/><ROW ID="998" TEXTSTR=" where e.id=a.id" LINEID="1"/><ROW ID="997" TEXTSTR="select er.*, e.tablename as name, ep.tablename as pname," LINEID="0"/><ROW ID="997" TEXTSTR="  e.keyfield, ep.keyfield as pkeyfield" LINEID="1"/><ROW ID="997" TEXTSTR=" from entrel er, entities e, entities ep" LINEID="2"/><ROW ID="997" TEXTSTR=" where e.id=er.id and er.pid=ep.id" LINEID="3"/><ROW ID="899" TEXTSTR="update waybilldet set wbillid=:wbillid, matid=:matid," LINEID="0"/><ROW ID="899" TEXTSTR="  wid=:wid, amount=:amount, price=:price, discount=:discount," LINEID="1"/><ROW ID="899" TEXTSTR="  nds=:nds, currid=:currid, ondate=:ondate, ptypeid=:ptypeid, num=:num," LINEID="2"/><ROW ID="899" TEXTSTR="  onvalue=:onvalue" LINEID="3"/><ROW ID="899" TEXTSTR=" where posid=:posid" LINEID="4"/><ROW ID="999" TEXTSTR="update wmatturn set turntype=:turntype where posid=:posid" LINEID="0"/><ROW ID="999" TEXTSTR=" and posid=sourceid" LINEID="1"/><ROW ID="21" TEXTSTR="insert into measures" LINEID="0"/><ROW ID="21" TEXTSTR=" (mid, name, shortname, def, deleted, code)" LINEID="1"/><ROW ID="21" TEXTSTR="   values" LINEID="2"/><ROW ID="21" TEXTSTR=" (:mid, :name, :shortname, :def, 0, :code)" LINEID="3"/><ROW ID="22" TEXTSTR="update measures" LINEID="0"/><ROW ID="22" TEXTSTR=" set name=:name, shortname=:shortname, def=:def, code=:code" LINEID="1"/><ROW ID="22" TEXTSTR=" where mid=:mid" LINEID="2"/><ROW ID="17" TEXTSTR="select * from measures where def=1" LINEID="0"/><ROW ID="613" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="613" TEXTSTR="  wh.name whname, mat.artikul as artikul, c.name as country," LINEID="1"/><ROW ID="613" TEXTSTR="  curr.shortname as currname, wbdet.price as price2, 0 as postype," LINEID="2"/><ROW ID="613" TEXTSTR="  0 as norm, wbdap.gtd, wbdap.producer, wbdap.certnum, wbdap.certdate," LINEID="3"/><ROW ID="613" TEXTSTR="  msr.code as msrcode" LINEID="4"/><ROW ID="613" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="613" TEXTSTR="  join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="613" TEXTSTR="  join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="613" TEXTSTR="  join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="613" TEXTSTR="  join currency curr on curr.currid=wbdet.currid" LINEID="9"/><ROW ID="613" TEXTSTR="  left outer join countries c on c.cid=mat.cid" LINEID="10"/><ROW ID="613" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="613" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="12"/><ROW ID="613" TEXTSTR="order by wbdet.num" LINEID="13"/><ROW ID="613" TEXTSTR="" LINEID="14"/><ROW ID="922" TEXTSTR="insert into disccards" LINEID="0"/><ROW ID="922" TEXTSTR=" (cardid, num, disctype, kaid, expiredate, grpid, onvalue," LINEID="1"/><ROW ID="922" TEXTSTR="  notes, deleted, startsaldo)" LINEID="2"/><ROW ID="922" TEXTSTR=" values" LINEID="3"/><ROW ID="922" TEXTSTR=" (:cardid, :num, :disctype, :kaid, :expiredate, :grpid, :onvalue," LINEID="4"/><ROW ID="922" TEXTSTR="  :notes, 0, :startsaldo)" LINEID="5"/><ROW ID="923" TEXTSTR="update disccards" LINEID="0"/><ROW ID="923" TEXTSTR=" set num=:num, kaid=:kaid, grpid=:grpid, disctype=:disctype," LINEID="1"/><ROW ID="923" TEXTSTR="     onvalue=:onvalue, expiredate=:expiredate, notes=:notes," LINEID="2"/><ROW ID="923" TEXTSTR="     startsaldo=:startsaldo" LINEID="3"/><ROW ID="923" TEXTSTR=" where cardid=:cardid" LINEID="4"/><ROW ID="1000" TEXTSTR="execute procedure sp_dc_recalc(:cardid)" LINEID="0"/><ROW ID="666" TEXTSTR="select s.*, c.shortname, sg.name as grpname," LINEID="0"/><ROW ID="666" TEXTSTR="  m.shortname as msrname" LINEID="1"/><ROW ID="666" TEXTSTR="  from services s, currency c, services sg, measures m" LINEID="2"/><ROW ID="666" TEXTSTR="  where c.currid=s.currid" LINEID="3"/><ROW ID="666" TEXTSTR="   and s.isgrp=0" LINEID="4"/><ROW ID="666" TEXTSTR="   and sg.svcid=s.pid" LINEID="5"/><ROW ID="666" TEXTSTR="   and m.mid=s.mid" LINEID="6"/><ROW ID="666" TEXTSTR="   and s.deleted=0" LINEID="7"/><ROW ID="666" TEXTSTR="   %m" LINEID="8"/><ROW ID="1002" TEXTSTR="update waybilldet set wbillid=:wbillid, matid=:matid," LINEID="0"/><ROW ID="1002" TEXTSTR="  wid=:wid, amount=:amount, price=:price, discount=:discount," LINEID="1"/><ROW ID="1002" TEXTSTR="  nds=:nds, currid=:currid, ondate=:ondate, ptypeid=:ptypeid, num=:num," LINEID="2"/><ROW ID="1002" TEXTSTR="  total=:total, onvalue=:onvalue, baseprice=:baseprice" LINEID="3"/><ROW ID="1002" TEXTSTR=" where posid=:posid" LINEID="4"/><ROW ID="1003" TEXTSTR="insert into WAYBILLDET (POSID, WBILLID, MATID, WID, AMOUNT, PRICE, DISCOUNT, NDS," LINEID="0"/><ROW ID="1003" TEXTSTR="  CurrId, OnDate, PTypeID, NUM, onvalue, total, baseprice)" LINEID="1"/><ROW ID="1003" TEXTSTR="values (:POSID, :WBILLID, :MATID, :WID, :AMOUNT, :PRICE, :DISCOUNT, :NDS," LINEID="2"/><ROW ID="1003" TEXTSTR="  :CurrId, :OnDate, :PTypeID, :NUM, :onvalue, :total, :baseprice)" LINEID="3"/><ROW ID="1004" TEXTSTR="insert into waybillsvc" LINEID="0"/><ROW ID="1004" TEXTSTR="  (posid, wbillid, currid, svcid, num, price, norm, amount," LINEID="1"/><ROW ID="1004" TEXTSTR="   nds, discount, personid, svctoprice)" LINEID="2"/><ROW ID="1004" TEXTSTR=" values" LINEID="3"/><ROW ID="1004" TEXTSTR="  (:posid, :wbillid, :currid, :svcid, :num, :price, :norm, :amount," LINEID="4"/><ROW ID="1004" TEXTSTR="   :nds, :discount, :personid, :svctoprice)" LINEID="5"/><ROW ID="1004" TEXTSTR="" LINEID="6"/><ROW ID="687" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="687" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="687" TEXTSTR="  cur.shortname as currname, 0 as postype," LINEID="2"/><ROW ID="687" TEXTSTR="  wbdap.gtd, wbdap.producer, wbdap.certnum, wbdap.certdate, mat.grpid," LINEID="3"/><ROW ID="687" TEXTSTR="  s.serialno as sn" LINEID="4"/><ROW ID="687" TEXTSTR="from waybilldet wbdet" LINEID="5"/><ROW ID="687" TEXTSTR="  join materials mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="687" TEXTSTR="  join measures msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="687" TEXTSTR="  join warehouse wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="687" TEXTSTR="  left outer join serials s on wbdet.posid=s.posid" LINEID="9"/><ROW ID="687" TEXTSTR="  left outer join currency cur on cur.currid=wbdet.currid" LINEID="10"/><ROW ID="687" TEXTSTR="  left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="687" TEXTSTR="where wbdet.wbillid=:wbillid" LINEID="12"/><ROW ID="687" TEXTSTR="order by wbdet.num" LINEID="13"/><ROW ID="660" TEXTSTR="select CAST(1 as integer) as matimg, wmt.matid, mats.name as matname, wmt.amount, mr.shortname as msrname," LINEID="0"/><ROW ID="660" TEXTSTR="        wmt.wid as widout, wh.name as whnameout," LINEID="1"/><ROW ID="660" TEXTSTR="" LINEID="2"/><ROW ID="660" TEXTSTR="wbl.wbillid as wbidout, wbl.num as docnumout, wbl.ondate as ondateout, wbl.wtype as wtypeout," LINEID="3"/><ROW ID="660" TEXTSTR="wbd.price as priceout, curr.currid as currid, curr.shortname as currnameout, wbd.onvalue as rateout," LINEID="4"/><ROW ID="660" TEXTSTR="wbd.nds as ndsout, wbd.discount as discountout," LINEID="5"/><ROW ID="660" TEXTSTR="" LINEID="6"/><ROW ID="660" TEXTSTR="wmt.sourceid, wmt.posid," LINEID="7"/><ROW ID="660" TEXTSTR="" LINEID="8"/><ROW ID="660" TEXTSTR="wblin.wbillid as wbidin, wblin.num as docnumin, wblin.ondate as ondatein, wblin.wtype as wtypein," LINEID="9"/><ROW ID="660" TEXTSTR="wbdin.price as pricein, curr.currid as curridin, currin.shortname as currnamein, wbdin.onvalue as ratein," LINEID="10"/><ROW ID="660" TEXTSTR="wbdin.nds as ndsin, s.serialno as sn" LINEID="11"/><ROW ID="660" TEXTSTR="" LINEID="12"/><ROW ID="660" TEXTSTR="from wmatturn wmt" LINEID="13"/><ROW ID="660" TEXTSTR="  join waybilldet wbd on wmt.sourceid=wbd.posid" LINEID="14"/><ROW ID="660" TEXTSTR="  join waybilllist wbl on wbd.wbillid=wbl.wbillid" LINEID="15"/><ROW ID="660" TEXTSTR="  join materials mats on mats.matid=wbd.matid" LINEID="16"/><ROW ID="660" TEXTSTR="  join currency curr on curr.currid=wbd.currid" LINEID="17"/><ROW ID="660" TEXTSTR="  join warehouse wh on wh.wid=wbd.wid" LINEID="18"/><ROW ID="660" TEXTSTR="  join measures mr on mr.mid=mats.mid" LINEID="19"/><ROW ID="660" TEXTSTR="  join waybilldet wbdin on" LINEID="20"/><ROW ID="660" TEXTSTR="    (wbdin.posid=(select er.extposid from extrel er where er.intposid=wmt.posid)" LINEID="21"/><ROW ID="660" TEXTSTR="     or" LINEID="22"/><ROW ID="660" TEXTSTR="    (wbdin.posid=wmt.posid))" LINEID="23"/><ROW ID="660" TEXTSTR="  join currency currin on currin.currid=wbdin.currid" LINEID="24"/><ROW ID="660" TEXTSTR="  join waybilllist wblin on wblin.wbillid=wbdin.wbillid" LINEID="25"/><ROW ID="660" TEXTSTR="  left join serials s on s.posid=wbd.posid" LINEID="26"/><ROW ID="660" TEXTSTR="where wbl.kaid=:kaid" LINEID="27"/><ROW ID="660" TEXTSTR="      and wbl.ondate between :fromdate and :todate" LINEID="28"/><ROW ID="660" TEXTSTR="      and wbl.wtype=-1" LINEID="29"/><ROW ID="660" TEXTSTR="      and wbl.checked=1" LINEID="30"/><ROW ID="660" TEXTSTR="      %m" LINEID="31"/><ROW ID="660" TEXTSTR="      and wblin.wtype in (1,5)" LINEID="32"/><ROW ID="660" TEXTSTR="order by 5" LINEID="33"/><ROW ID="660" TEXTSTR="" LINEID="34"/><ROW ID="660" TEXTSTR="" LINEID="35"/><ROW ID="624" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="624" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="624" TEXTSTR="  curr.shortname as currname, wbdet.onvalue," LINEID="2"/><ROW ID="624" TEXTSTR="  rr.outposid as sourceid, rr.pposid as pposid, rr.dposid, mat.grpid," LINEID="3"/><ROW ID="624" TEXTSTR="  wbdap.producer, wbdap.gtd, s.serialno as sn" LINEID="4"/><ROW ID="624" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="624" TEXTSTR=" join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="624" TEXTSTR=" join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="624" TEXTSTR=" join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="8"/><ROW ID="624" TEXTSTR=" join currency curr on curr.currid=wbdet.currid" LINEID="9"/><ROW ID="624" TEXTSTR=" join returnrel rr on rr.posid=wbdet.posid" LINEID="10"/><ROW ID="624" TEXTSTR=" left outer join serials s on s.posid=wbdet.posid" LINEID="11"/><ROW ID="624" TEXTSTR=" left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="12"/><ROW ID="624" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="13"/><ROW ID="624" TEXTSTR="order by wbdet.num" LINEID="14"/><ROW ID="624" TEXTSTR="" LINEID="15"/><ROW ID="1005" TEXTSTR="execute procedure sp_accoutdet_fix(:wbillid)" LINEID="0"/><ROW ID="386" TEXTSTR="select distinct wblist.wbillid as pwbid, wblist.wbillid as docid," LINEID="0"/><ROW ID="386" TEXTSTR="  cast(wblist.num as varchar(255)) as name, wblist.ondate," LINEID="1"/><ROW ID="386" TEXTSTR="  wblist.wtype, wblist.checked, wblist.num," LINEID="2"/><ROW ID="386" TEXTSTR="  cast(null as numeric(15,8)) as amount," LINEID="3"/><ROW ID="386" TEXTSTR="  cast(null as integer) as posnum" LINEID="4"/><ROW ID="386" TEXTSTR="from waybilldet wbdet, waybilllist wblist, wmatturn wmt," LINEID="5"/><ROW ID="386" TEXTSTR="  waybilldet wbdet2" LINEID="6"/><ROW ID="386" TEXTSTR="where wbdet.posid=wmt.sourceid" LINEID="7"/><ROW ID="386" TEXTSTR="  and wmt.posid=wbdet2.posid" LINEID="8"/><ROW ID="386" TEXTSTR="  and wbdet2.wbillid=:wbillid" LINEID="9"/><ROW ID="386" TEXTSTR="  and wmt.turntype&lt;&gt;1" LINEID="10"/><ROW ID="386" TEXTSTR="  and wbdet.wbillid=wblist.wbillid" LINEID="11"/><ROW ID="386" TEXTSTR="" LINEID="12"/><ROW ID="386" TEXTSTR="union all" LINEID="13"/><ROW ID="386" TEXTSTR="" LINEID="14"/><ROW ID="386" TEXTSTR="select wbdet.wbillid as pwbid, wbdet.posid as docid," LINEID="15"/><ROW ID="386" TEXTSTR="  mats.name, CAST(null as timestamp) as ondate," LINEID="16"/><ROW ID="386" TEXTSTR="  cast(-100 as integer) as wtype," LINEID="17"/><ROW ID="386" TEXTSTR="  cast(-1 as integer) as checked," LINEID="18"/><ROW ID="386" TEXTSTR="  cast(null as varchar(20)) as num," LINEID="19"/><ROW ID="386" TEXTSTR="  cast(wbdet.amount as numeric(15,8))," LINEID="20"/><ROW ID="386" TEXTSTR="  wbdet.num as posnum" LINEID="21"/><ROW ID="386" TEXTSTR="from waybilldet wbdet, waybilllist wblist, materials mats," LINEID="22"/><ROW ID="386" TEXTSTR="  wmatturn wmt, waybilldet wbdet2" LINEID="23"/><ROW ID="386" TEXTSTR="where wbdet.posid=wmt.sourceid" LINEID="24"/><ROW ID="386" TEXTSTR="  and wmt.posid=wbdet2.posid" LINEID="25"/><ROW ID="386" TEXTSTR="  and wbdet2.wbillid=:wbillid" LINEID="26"/><ROW ID="386" TEXTSTR="  and wmt.turntype&lt;&gt;1" LINEID="27"/><ROW ID="386" TEXTSTR="  and wbdet.wbillid=wblist.wbillid" LINEID="28"/><ROW ID="386" TEXTSTR="  and mats.matid=wbdet.matid" LINEID="29"/><ROW ID="386" TEXTSTR="" LINEID="30"/><ROW ID="386" TEXTSTR="order by 4,9" LINEID="31"/><ROW ID="162" TEXTSTR="insert into AgentAccount (AccId, KAID, TypeId, BankId, AccNum, Def)" LINEID="0"/><ROW ID="162" TEXTSTR="values (:AccId, :KAID, :TypeId, :BankId, :AccNum, :Def)" LINEID="1"/><ROW ID="338" TEXTSTR="update agentaccount set accnum=:accnum, bankid=:bankid, typeid=:typeid, kaid=:kaid, def=:def" LINEID="0"/><ROW ID="338" TEXTSTR=" where accid=:accid" LINEID="1"/><ROW ID="154" TEXTSTR="select * from agentaccount where kaid=:kaid order by def" LINEID="0"/><ROW ID="569" TEXTSTR="select aa.*, b.mfo, b.name, act.name as typename" LINEID="0"/><ROW ID="569" TEXTSTR=" from agentaccount aa, banks b, accounttype act, kagent ka" LINEID="1"/><ROW ID="569" TEXTSTR=" where aa.bankid=b.bankid" LINEID="2"/><ROW ID="569" TEXTSTR="  and act.typeid=aa.typeid" LINEID="3"/><ROW ID="569" TEXTSTR="  and ka.kaid=aa.kaid" LINEID="4"/><ROW ID="569" TEXTSTR="  and ka.ktype=3" LINEID="5"/><ROW ID="569" TEXTSTR="  order by aa.def" LINEID="6"/><ROW ID="569" TEXTSTR="" LINEID="7"/><ROW ID="373" TEXTSTR="select mats.name, msr.shortname as msrname, mats.artikul," LINEID="0"/><ROW ID="373" TEXTSTR="  mats.wid, mats.serials, mg.name as grpname, mats.serials," LINEID="1"/><ROW ID="373" TEXTSTR="  mats.producer, mats.barcode, c.name as country" LINEID="2"/><ROW ID="373" TEXTSTR=" from Materials mats" LINEID="3"/><ROW ID="373" TEXTSTR="  join measures msr on mats.mid=msr.mid" LINEID="4"/><ROW ID="373" TEXTSTR="  join matgroup mg on mg.grpid=mats.grpid" LINEID="5"/><ROW ID="373" TEXTSTR="  left join countries c on mats.cid=c.cid" LINEID="6"/><ROW ID="373" TEXTSTR=" where mats.matid=:matid" LINEID="7"/><ROW ID="1009" TEXTSTR="select mats.name, msr.shortname as msrname, mats.artikul," LINEID="0"/><ROW ID="1009" TEXTSTR="  pr.wid, mats.serials, mg.name as grpname, mats.serials," LINEID="1"/><ROW ID="1009" TEXTSTR="  mats.producer, mats.barcode, c.name as country" LINEID="2"/><ROW ID="1009" TEXTSTR=" from Materials mats" LINEID="3"/><ROW ID="1009" TEXTSTR="  join measures msr on mats.mid=msr.mid" LINEID="4"/><ROW ID="1009" TEXTSTR="  join matgroup mg on mg.grpid=mats.grpid" LINEID="5"/><ROW ID="1009" TEXTSTR="  join posremains pr on (pr.matid=mats.matid and pr.wid in (%w) )" LINEID="6"/><ROW ID="1009" TEXTSTR="  left join countries c on mats.cid=c.cid" LINEID="7"/><ROW ID="1009" TEXTSTR=" where mats.matid=:matid" LINEID="8"/><ROW ID="1010" TEXTSTR="select mats.name, msr.shortname as msrname, mats.artikul," LINEID="0"/><ROW ID="1010" TEXTSTR="  mats.wid, mats.serials, mg.name as grpname, mats.serials," LINEID="1"/><ROW ID="1010" TEXTSTR="  mats.producer, mats.barcode, c.name as country" LINEID="2"/><ROW ID="1010" TEXTSTR=" from Materials mats" LINEID="3"/><ROW ID="1010" TEXTSTR="  join measures msr on mats.mid=msr.mid" LINEID="4"/><ROW ID="1010" TEXTSTR="  join matgroup mg on mg.grpid=mats.grpid" LINEID="5"/><ROW ID="1010" TEXTSTR="  left join countries c on mats.cid=c.cid" LINEID="6"/><ROW ID="1010" TEXTSTR=" where mats.matid=:matid" LINEID="7"/><ROW ID="66" TEXTSTR="select f.funid, f.classname, f.flags, ua.canview, ua.caninsert, ua.canmodify," LINEID="0"/><ROW ID="66" TEXTSTR="       ua.candelete, ua.canpost, utv.name, utv.id, utv.pid" LINEID="1"/><ROW ID="66" TEXTSTR=" from functions f, useraccess ua, usertreeview utv, profiles p" LINEID="2"/><ROW ID="66" TEXTSTR=" where ua.userid=:userid" LINEID="3"/><ROW ID="66" TEXTSTR="  and ua.funid=f.funid" LINEID="4"/><ROW ID="66" TEXTSTR="  and utv.funid=f.funid" LINEID="5"/><ROW ID="66" TEXTSTR="  and utv.treeid=p.treeid" LINEID="6"/><ROW ID="66" TEXTSTR="  and p.profid=:profid" LINEID="7"/><ROW ID="69" TEXTSTR="insert into useraccess" LINEID="0"/><ROW ID="69" TEXTSTR="  (userid, funid, canview, caninsert, canmodify, candelete, canpost)" LINEID="1"/><ROW ID="69" TEXTSTR=" values" LINEID="2"/><ROW ID="69" TEXTSTR="  (:userid, :funid, :canview, :caninsert, :canmodify, :candelete, :canpost)" LINEID="3"/><ROW ID="69" TEXTSTR="" LINEID="4"/><ROW ID="1011" TEXTSTR="select pr.matid, pr.wid, pr.posid, cast(999999 as integer) as amount," LINEID="0"/><ROW ID="1011" TEXTSTR="   cast(0 as integer) as rsv, wbd.ondate, wbd.price, wbd.currid, cr.onvalue," LINEID="1"/><ROW ID="1011" TEXTSTR="   wbd.nds, wbd.discount, curr.shortname as currname," LINEID="2"/><ROW ID="1011" TEXTSTR="   wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="3"/><ROW ID="1011" TEXTSTR="   s.serialno as sn, wbl.wtype, wbl.wbillid, wbdap.gtd," LINEID="4"/><ROW ID="1011" TEXTSTR="   wbdap.certnum, wbdap.certdate, wbdap.producer," LINEID="5"/><ROW ID="1011" TEXTSTR="   cast(0 as integer) as postype" LINEID="6"/><ROW ID="1011" TEXTSTR="from posremains pr" LINEID="7"/><ROW ID="1011" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid" LINEID="8"/><ROW ID="1011" TEXTSTR="     left outer join serials s on s.posid=pr.posid" LINEID="9"/><ROW ID="1011" TEXTSTR="     join waybilldet wbd on wbd.posid=pr.posid" LINEID="10"/><ROW ID="1011" TEXTSTR="     join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="11"/><ROW ID="1011" TEXTSTR="     join warehouse wh on wh.wid=pr.wid" LINEID="12"/><ROW ID="1011" TEXTSTR="     left outer join currency curr on curr.currid=wbd.currid" LINEID="13"/><ROW ID="1011" TEXTSTR="     left outer join currencyrate cr on" LINEID="14"/><ROW ID="1011" TEXTSTR="       (curr.currid=cr.currid and cr.ondate=" LINEID="15"/><ROW ID="1011" TEXTSTR="        (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate)" LINEID="16"/><ROW ID="1011" TEXTSTR="       )" LINEID="17"/><ROW ID="1011" TEXTSTR="     join materials mats on mats.matid=pr.matid" LINEID="18"/><ROW ID="1011" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="19"/><ROW ID="1011" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="20"/><ROW ID="1011" TEXTSTR="                 from posremains" LINEID="21"/><ROW ID="1011" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="22"/><ROW ID="1011" TEXTSTR="      and pr.matid=:matid" LINEID="23"/><ROW ID="1011" TEXTSTR="      and wbl.wtype not in(4,6)" LINEID="24"/><ROW ID="1011" TEXTSTR="      and pr.wid&lt;&gt;:wid" LINEID="25"/><ROW ID="1011" TEXTSTR="" LINEID="26"/><ROW ID="1011" TEXTSTR="union all" LINEID="27"/><ROW ID="1011" TEXTSTR="" LINEID="28"/><ROW ID="1011" TEXTSTR="select pr.matid, pr.wid, pr.posid, cast(999999 as integer) as amount, cast(0 as integer) as rsv, wbl.ondate," LINEID="29"/><ROW ID="1011" TEXTSTR="       wbd.price, wbd.currid, cr.onvalue, wbd.nds, wbd.discount," LINEID="30"/><ROW ID="1011" TEXTSTR="       curr.shortname as currname, wbl.num as docnum, wbl.ondate as docdate, wh.name as whname," LINEID="31"/><ROW ID="1011" TEXTSTR="       s.serialno as sn, wbl.wtype, wbl.wbillid, wbdap.gtd, wbdap.certnum," LINEID="32"/><ROW ID="1011" TEXTSTR="       wbdap.certdate, wbdap.producer, cast(0 as integer) as postype" LINEID="33"/><ROW ID="1011" TEXTSTR="from posremains pr" LINEID="34"/><ROW ID="1011" TEXTSTR="     join waybilldet wbd on wbd.posid=pr.posid" LINEID="35"/><ROW ID="1011" TEXTSTR="     join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="36"/><ROW ID="1011" TEXTSTR="     join warehouse wh on wh.wid=pr.wid" LINEID="37"/><ROW ID="1011" TEXTSTR="     join currency curr on curr.currid=wbd.currid" LINEID="38"/><ROW ID="1011" TEXTSTR="     join currencyrate cr on (curr.currid=cr.currid and cr.ondate=" LINEID="39"/><ROW ID="1011" TEXTSTR="      (select max(ondate) from currencyrate where currid=curr.currid and ondate&lt;=wbd.ondate))" LINEID="40"/><ROW ID="1011" TEXTSTR="     join materials mats on mats.matid=pr.matid" LINEID="41"/><ROW ID="1011" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="42"/><ROW ID="1011" TEXTSTR="     join extrel er on er.intposid=pr.posid" LINEID="43"/><ROW ID="1011" TEXTSTR="     join waybilldet wbdext on wbdext.posid=er.extposid" LINEID="44"/><ROW ID="1011" TEXTSTR="     join waybilllist wblext on wblext.wbillid=wbdext.wbillid" LINEID="45"/><ROW ID="1011" TEXTSTR="     left outer join serials s on s.posid=er.extposid" LINEID="46"/><ROW ID="1011" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=pr.posid" LINEID="47"/><ROW ID="1011" TEXTSTR="where pr.ondate=(select max(ondate)" LINEID="48"/><ROW ID="1011" TEXTSTR="                 from posremains" LINEID="49"/><ROW ID="1011" TEXTSTR="                 where posid=pr.posid and ondate&lt;=:ondate)" LINEID="50"/><ROW ID="1011" TEXTSTR="      and pr.matid=:matid" LINEID="51"/><ROW ID="1011" TEXTSTR="      and wbl.wtype in (4,6)" LINEID="52"/><ROW ID="1011" TEXTSTR="      and pr.wid&lt;&gt;:wid" LINEID="53"/><ROW ID="1011" TEXTSTR="" LINEID="54"/><ROW ID="1011" TEXTSTR="order by 13 %d" LINEID="55"/><ROW ID="747" TEXTSTR="select wbdet.*, mat.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="747" TEXTSTR="  wh.name whname, mat.artikul as artikul, mat.barcode," LINEID="1"/><ROW ID="747" TEXTSTR="  curr.shortname as currname, 0 as postype," LINEID="2"/><ROW ID="747" TEXTSTR="  s.serialno as sn, wbdap.producer, mat.serials as bySN," LINEID="3"/><ROW ID="747" TEXTSTR="  wbdap.*, dc.num as cardnum, dch.name as holder" LINEID="4"/><ROW ID="747" TEXTSTR="from WAYBILLDET wbdet" LINEID="5"/><ROW ID="747" TEXTSTR="     join MATERIALS mat on mat.matid=wbdet.matid" LINEID="6"/><ROW ID="747" TEXTSTR="     join MEASURES msr on msr.mid=mat.mid" LINEID="7"/><ROW ID="747" TEXTSTR="     join currency curr on curr.currid=wbdet.currid" LINEID="8"/><ROW ID="747" TEXTSTR="     left outer join WAREHOUSE wh on wh.wid=wbdet.wid" LINEID="9"/><ROW ID="747" TEXTSTR="     left outer join serials s on s.posid=wbdet.posid" LINEID="10"/><ROW ID="747" TEXTSTR="     left outer join waybilldetaddprops wbdap on wbdap.posid=wbdet.posid" LINEID="11"/><ROW ID="747" TEXTSTR="     left outer join disccards dc on dc.cardid=wbdap.cardid" LINEID="12"/><ROW ID="747" TEXTSTR="     left outer join kagent dch on dch.kaid=dc.kaid" LINEID="13"/><ROW ID="747" TEXTSTR="where wbdet.WBILLID=:WBILLID" LINEID="14"/><ROW ID="747" TEXTSTR="order by wbdet.num" LINEID="15"/><ROW ID="747" TEXTSTR="" LINEID="16"/><ROW ID="370" TEXTSTR="select name, kaid, job, jobtype, userid" LINEID="0"/><ROW ID="370" TEXTSTR=" from kagent" LINEID="1"/><ROW ID="370" TEXTSTR=" where ktype=2 and deleted=0 and coalesce(archived,0)=0" LINEID="2"/><ROW ID="370" TEXTSTR=" order by name" LINEID="3"/><ROW ID="1025" TEXTSTR="delete from blobs where %w" LINEID="0"/><ROW ID="1026" TEXTSTR="update blobs set data=:data where ownerid=:ownerid and ownertype=:ownertype" LINEID="0"/><ROW ID="1028" TEXTSTR="select id,data from blobs where ownerid=:ownerid and ownertype=:ownertype" LINEID="0"/><ROW ID="1030" TEXTSTR="SELECT * FROM webshops WHERE id=:id" LINEID="0"/><ROW ID="1031" TEXTSTR="SELECT id,name,docprefix,docsuffix,description FROM webshops" LINEID="0"/><ROW ID="1039" TEXTSTR="update CustomTree set parentid=:parentid, pos=:pos, name=:name, data=:data" LINEID="0"/><ROW ID="1039" TEXTSTR="  where id=:id" LINEID="1"/><ROW ID="1040" TEXTSTR="select fType, fNodeID, fcid, fint, fnum, fdbl, ftxt from sp_ct_tree_data(:treeid, :ownerid)" LINEID="0"/><ROW ID="1038" TEXTSTR="insert into CustomTree (treeid, parentid, pos, ownertype, name, data)" LINEID="0"/><ROW ID="1038" TEXTSTR="  values (:treeid,  :parentid, :pos, :ownertype, :name, :data)" LINEID="1"/><ROW ID="686" TEXTSTR="select name from materials where artikul=:artikul %w" LINEID="0"/><ROW ID="831" TEXTSTR="select name from materials where artikul=:artikul" LINEID="0"/><ROW ID="831" TEXTSTR=" and matid&lt;&gt;:matid" LINEID="1"/><ROW ID="831" TEXTSTR=" %w" LINEID="2"/><ROW ID="1041" TEXTSTR="select id, treeid, parentid, pos, name, data, ownertype from customtree where treeid=:treeid %w" LINEID="0"/><ROW ID="107" TEXTSTR="insert into materials" LINEID="0"/><ROW ID="107" TEXTSTR=" (matid, mid, name, artikul, notes, def, deleted, grpid," LINEID="1"/><ROW ID="107" TEXTSTR="  wid, num, producer, cid, weight, msize, barcode, demandcat," LINEID="2"/><ROW ID="107" TEXTSTR="  minreserv, nds, serials, archived," LINEID="3"/><ROW ID="107" TEXTSTR="  LabelDescr, TypeID, DateAdded, DateModified," LINEID="4"/><ROW ID="107" TEXTSTR="  cf1, cf2, cf3, cf4, cf5" LINEID="5"/><ROW ID="107" TEXTSTR=")" LINEID="6"/><ROW ID="107" TEXTSTR="values" LINEID="7"/><ROW ID="107" TEXTSTR=" (:matid, :mid, :name, :artikul, :notes, :def, :deleted, :grpid," LINEID="8"/><ROW ID="107" TEXTSTR="  :wid, :num, :producer, :cid, :weight, :msize, :barcode," LINEID="9"/><ROW ID="107" TEXTSTR="  :demandcat, :minreserv, :nds, :serials, 0," LINEID="10"/><ROW ID="107" TEXTSTR="  :LabelDescr, :TypeID, :DateAdded, :DateModified," LINEID="11"/><ROW ID="107" TEXTSTR="  :cf1, :cf2, :cf3, :cf4, :cf5" LINEID="12"/><ROW ID="107" TEXTSTR=")" LINEID="13"/><ROW ID="108" TEXTSTR="update materials" LINEID="0"/><ROW ID="108" TEXTSTR=" set name=:name," LINEID="1"/><ROW ID="108" TEXTSTR="     mid=:mid," LINEID="2"/><ROW ID="108" TEXTSTR="     artikul=:artikul," LINEID="3"/><ROW ID="108" TEXTSTR="     notes=:notes," LINEID="4"/><ROW ID="108" TEXTSTR="     def=:def," LINEID="5"/><ROW ID="108" TEXTSTR="     deleted=:deleted," LINEID="6"/><ROW ID="108" TEXTSTR="     grpid=:grpid," LINEID="7"/><ROW ID="108" TEXTSTR="     wid=:wid," LINEID="8"/><ROW ID="108" TEXTSTR="     num=:num," LINEID="9"/><ROW ID="108" TEXTSTR="     producer=:producer," LINEID="10"/><ROW ID="108" TEXTSTR="     cid=:cid," LINEID="11"/><ROW ID="108" TEXTSTR="     weight=:weight," LINEID="12"/><ROW ID="108" TEXTSTR="     msize=:msize," LINEID="13"/><ROW ID="108" TEXTSTR="     barcode=:barcode," LINEID="14"/><ROW ID="108" TEXTSTR="     demandcat=:demandcat," LINEID="15"/><ROW ID="108" TEXTSTR="     minreserv=:minreserv," LINEID="16"/><ROW ID="108" TEXTSTR="     nds=:nds," LINEID="17"/><ROW ID="108" TEXTSTR="     serials=:serials," LINEID="18"/><ROW ID="108" TEXTSTR="     LabelDescr=:LabelDescr," LINEID="19"/><ROW ID="108" TEXTSTR="     TypeID=:TypeID," LINEID="20"/><ROW ID="108" TEXTSTR="     DateAdded=:DateAdded," LINEID="21"/><ROW ID="108" TEXTSTR="     DateModified=:DateModified," LINEID="22"/><ROW ID="108" TEXTSTR="     cf1=:cf1, cf2=:cf2, cf3=:cf3, cf4=:cf4, cf5=:cf5" LINEID="23"/><ROW ID="108" TEXTSTR="where matid=:matid" LINEID="24"/><ROW ID="1043" TEXTSTR="select langid,shortname,name,flags from languages;" LINEID="0"/><ROW ID="1046" TEXTSTR="select * from materials where matid=:matid" LINEID="0"/><ROW ID="1048" TEXTSTR="execute procedure sp_ct_delete_node(:nodeID)" LINEID="0"/><ROW ID="1047" TEXTSTR="select * from materials where deleted=0" LINEID="0"/><ROW ID="1042" TEXTSTR="select id,treeid from customtree" LINEID="0"/><ROW ID="1042" TEXTSTR="where ownertype = :ownertype and name = :name and parentid = 0" LINEID="1"/><ROW ID="1051" TEXTSTR="SELECT * FROM webshops WHERE name=:name" LINEID="0"/><ROW ID="1049" TEXTSTR="update webshops set" LINEID="0"/><ROW ID="1049" TEXTSTR="  name=:name," LINEID="1"/><ROW ID="1049" TEXTSTR="  docprefix=:docprefix," LINEID="2"/><ROW ID="1049" TEXTSTR="  docsuffix=:docsuffix," LINEID="3"/><ROW ID="1049" TEXTSTR="  description=:description," LINEID="4"/><ROW ID="1049" TEXTSTR="  xmlurl=:xmlurl," LINEID="5"/><ROW ID="1049" TEXTSTR="  xmllogin=:xmllogin," LINEID="6"/><ROW ID="1049" TEXTSTR="  xmlpass=:xmlpass," LINEID="7"/><ROW ID="1049" TEXTSTR="  xmlseckey=:xmlseckey" LINEID="8"/><ROW ID="1049" TEXTSTR="where id = :id" LINEID="9"/><ROW ID="1037" TEXTSTR="select treeid from sp_ct_newctreeid" LINEID="0"/><ROW ID="1035" TEXTSTR="select v_id as id from sp_ct_set_node_data (:id, :CTNodeID, :OwnerID , :cid, :fType, :fint, :fnum, :fdbl, :ftxt)" LINEID="0"/><ROW ID="1034" TEXTSTR="select fID, fOwnerID, fType, fcid, fint, fnum, fdbl, ftxt from sp_ct_get_node_data(:nodeid, :ownerid)" LINEID="0"/><ROW ID="1052" TEXTSTR="select ptype, price, currid, currname, dis from sp_list_mat_prices(:matid, null)" LINEID="0"/><ROW ID="1036" TEXTSTR="delete from %t where id=:id" LINEID="0"/><ROW ID="1024" TEXTSTR="insert into blobs (ownerid,ownertype,userdata,data) values (:ownerid, :ownertype, :userdata, :data)" LINEID="0"/><ROW ID="1027" TEXTSTR="select FIRST 1 id from blobs where ownerid=:ownerid and ownertype=:ownertype order by id desc" LINEID="0"/><ROW ID="1050" TEXTSTR="insert into webshops (" LINEID="0"/><ROW ID="1050" TEXTSTR="  name," LINEID="1"/><ROW ID="1050" TEXTSTR="  docprefix," LINEID="2"/><ROW ID="1050" TEXTSTR="  docsuffix," LINEID="3"/><ROW ID="1050" TEXTSTR="  description," LINEID="4"/><ROW ID="1050" TEXTSTR="  xmlurl," LINEID="5"/><ROW ID="1050" TEXTSTR="  xmllogin," LINEID="6"/><ROW ID="1050" TEXTSTR="  xmlpass," LINEID="7"/><ROW ID="1050" TEXTSTR="  xmlseckey" LINEID="8"/><ROW ID="1050" TEXTSTR=") values (" LINEID="9"/><ROW ID="1050" TEXTSTR="  :name," LINEID="10"/><ROW ID="1050" TEXTSTR="  :docprefix," LINEID="11"/><ROW ID="1050" TEXTSTR="  :docsuffix," LINEID="12"/><ROW ID="1050" TEXTSTR="  :description," LINEID="13"/><ROW ID="1050" TEXTSTR="  :xmlurl," LINEID="14"/><ROW ID="1050" TEXTSTR="  :xmllogin," LINEID="15"/><ROW ID="1050" TEXTSTR="  :xmlpass," LINEID="16"/><ROW ID="1050" TEXTSTR="  :xmlseckey" LINEID="17"/><ROW ID="1050" TEXTSTR=")" LINEID="18"/><ROW ID="1023" TEXTSTR="select id,userdata,data from blobs where ownerid=:ownerid and ownertype=:ownertype order by id asc" LINEID="0"/><ROW ID="1053" TEXTSTR="execute procedure sp_ct_data_del(:treeid, :nodeid, :ownerid, :ownertype, :cid)" LINEID="0"/><ROW ID="1054" TEXTSTR="select" LINEID="0"/><ROW ID="1054" TEXTSTR="   pr.remain, pr.wid, pr.rsv" LINEID="1"/><ROW ID="1054" TEXTSTR="from posremains pr" LINEID="2"/><ROW ID="1054" TEXTSTR="     join waybilldet wbd on wbd.posid=pr.posid" LINEID="3"/><ROW ID="1054" TEXTSTR="     join waybilllist wbl on wbl.wbillid=wbd.wbillid" LINEID="4"/><ROW ID="1054" TEXTSTR="where" LINEID="5"/><ROW ID="1054" TEXTSTR="  and pr.matid=:matid" LINEID="6"/><ROW ID="1054" TEXTSTR="  and pr.remain &gt; 0" LINEID="7"/><ROW ID="1054" TEXTSTR="  and wbl.wtype not in(4,6)" LINEID="8"/><ROW ID="1054" TEXTSTR="  and pr.ondate=(select max(ondate) from posremains  where posid=pr.posid)" LINEID="9"/><ROW ID="1055" TEXTSTR="select pr.posid, pr.wid, pr.matid, pr.remain, pr.rsv, pr.avgprice, pr.ordered" LINEID="0"/><ROW ID="1055" TEXTSTR="    from posremains pr" LINEID="1"/><ROW ID="1055" TEXTSTR="    where (pr.wid = 0 or pr.wid = :WID) and (pr.matid=0 or pr.matid=:ProdID)" LINEID="2"/><ROW ID="1055" TEXTSTR="                and pr.remain &gt; 0" LINEID="3"/><ROW ID="1055" TEXTSTR="   order by pr.matid, pr.wid" LINEID="4"/><ROW ID="1033" TEXTSTR="select id, treeid, parentid, pos, name, data, ownertype from customtree" LINEID="0"/><ROW ID="1033" TEXTSTR="  where ownertype = :ownertype and treeid = :treeid" LINEID="1"/><ROW ID="1033" TEXTSTR="  order by parentid, id" LINEID="2"/><ROW ID="595" TEXTSTR="select twbdet.twbdetid as posid, twbdet.twbid as wbillid," LINEID="0"/><ROW ID="595" TEXTSTR="       twbdet.matid, twbdet.amount, twbdet.price, mat.name matname," LINEID="1"/><ROW ID="595" TEXTSTR="       msr.shortname msrname, mat.barcode," LINEID="2"/><ROW ID="595" TEXTSTR="       CAST(null as integer) as wid, CAST(null as varchar(64)) as whname," LINEID="3"/><ROW ID="595" TEXTSTR="       mat.artikul, cast(20 as numeric(15,8)) as nds," LINEID="4"/><ROW ID="595" TEXTSTR="       cast(1 as numeric(15,8)) as onvalue" LINEID="5"/><ROW ID="595" TEXTSTR="from taxwbdet twbdet, MATERIALS mat, MEASURES msr" LINEID="6"/><ROW ID="595" TEXTSTR="where twbdet.twbid=:twbid" LINEID="7"/><ROW ID="595" TEXTSTR="      and mat.matid=twbdet.matid" LINEID="8"/><ROW ID="595" TEXTSTR="      and msr.mid=mat.mid" LINEID="9"/><ROW ID="595" TEXTSTR="order by twbdetid" LINEID="10"/><ROW ID="844" TEXTSTR="select wmt.matid, mats.name as matname," LINEID="0"/><ROW ID="844" TEXTSTR="       -mats.grpid as grpid, mg.name as grpname," LINEID="1"/><ROW ID="844" TEXTSTR="       msr.shortname as msrname, mats.artikul, mats.producer," LINEID="2"/><ROW ID="844" TEXTSTR="       sum (cast(wmt.amount as double precision)) as amount," LINEID="3"/><ROW ID="844" TEXTSTR="       sum(formatfloat(cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wbd.amount as double precision),-2)) as summ" LINEID="4"/><ROW ID="844" TEXTSTR="from wmatturn wmt" LINEID="5"/><ROW ID="844" TEXTSTR="join waybilldet wbd on wbd.posid=wmt.sourceid" LINEID="6"/><ROW ID="844" TEXTSTR="join waybilllist wbl on wbl.wbillid=wbd.wbillid and wbl.checked=1" LINEID="7"/><ROW ID="844" TEXTSTR="                        and wbl.deleted=0 %k" LINEID="8"/><ROW ID="844" TEXTSTR="join docs d on d.docid=wbl.docid and d.doctype in (1,5,6%t)" LINEID="9"/><ROW ID="844" TEXTSTR="join materials mats on mats.matid=wmt.matid %g" LINEID="10"/><ROW ID="844" TEXTSTR="join measures msr on msr.mid=mats.mid" LINEID="11"/><ROW ID="844" TEXTSTR="join matgroup mg on mg.grpid=mats.grpid" LINEID="12"/><ROW ID="844" TEXTSTR="" LINEID="13"/><ROW ID="844" TEXTSTR="where wmt.turntype = 1" LINEID="14"/><ROW ID="844" TEXTSTR="and wmt.ondate between :fromdate and :todate" LINEID="15"/><ROW ID="844" TEXTSTR="  %w" LINEID="16"/><ROW ID="844" TEXTSTR="" LINEID="17"/><ROW ID="844" TEXTSTR="group by 1,2,3,4,5,6,7" LINEID="18"/><ROW ID="844" TEXTSTR="order by %o 2" LINEID="19"/><ROW ID="895" TEXTSTR="select DOCID, DOCTYPE, NUM, ONDATE, CHECKED, DELETED," LINEID="0"/><ROW ID="895" TEXTSTR="    cast(SUMM as double precision)," LINEID="1"/><ROW ID="895" TEXTSTR="    SHORTNAME, CURRID" LINEID="2"/><ROW ID="895" TEXTSTR=" from sp_get_reldoclist_c(:docid) dr %m" LINEID="3"/><ROW ID="895" TEXTSTR="order by dr.doctype,dr.ondate" LINEID="4"/><ROW ID="645" TEXTSTR="select wblist.wtype, wblist.num," LINEID="0"/><ROW ID="645" TEXTSTR="       case" LINEID="1"/><ROW ID="645" TEXTSTR="         when wblist.wtype=4 then" LINEID="2"/><ROW ID="645" TEXTSTR="           (select cast(whout.name||&apos; -&gt; &apos;||whin.name as varchar(132))" LINEID="3"/><ROW ID="645" TEXTSTR="            from waybillmove wbm" LINEID="4"/><ROW ID="645" TEXTSTR="            left outer join warehouse whout on whout.wid=wbm.sourcewid" LINEID="5"/><ROW ID="645" TEXTSTR="            left outer join warehouse whin on whin.wid=wbm.destwid" LINEID="6"/><ROW ID="645" TEXTSTR="            where wbm.wbillid=wblist.wbillid" LINEID="7"/><ROW ID="645" TEXTSTR="           )" LINEID="8"/><ROW ID="645" TEXTSTR="         else cast(ka.name as varchar(132))" LINEID="9"/><ROW ID="645" TEXTSTR="       end as kaname," LINEID="10"/><ROW ID="645" TEXTSTR="wblist.ondate," LINEID="11"/><ROW ID="645" TEXTSTR="wblist.checked, cast(wblist.summall as double precision) as summall" LINEID="12"/><ROW ID="645" TEXTSTR="from waybilllist wblist" LINEID="13"/><ROW ID="645" TEXTSTR="left outer join kagent ka on wblist.kaid=ka.kaid" LINEID="14"/><ROW ID="645" TEXTSTR="where wblist.deleted=0" LINEID="15"/><ROW ID="645" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="16"/><ROW ID="645" TEXTSTR="       %m" LINEID="17"/><ROW ID="645" TEXTSTR="" LINEID="18"/><ROW ID="645" TEXTSTR="union all" LINEID="19"/><ROW ID="645" TEXTSTR="" LINEID="20"/><ROW ID="645" TEXTSTR="" LINEID="21"/><ROW ID="645" TEXTSTR="select cast(pd.doctype*3 as integer) as wtype, pd.docnum num, cast(ka.name as varchar(132)) as kaname, pd.ondate," LINEID="22"/><ROW ID="645" TEXTSTR="pd.checked," LINEID="23"/><ROW ID="645" TEXTSTR="cast(cast(pd.total as double precision) * cast(pd.onvalue as double precision) as double precision) summall" LINEID="24"/><ROW ID="645" TEXTSTR="from paydoc pd, kagent ka" LINEID="25"/><ROW ID="645" TEXTSTR="where pd.deleted=0" LINEID="26"/><ROW ID="645" TEXTSTR="      and (pd.ondate between :fromdate and :todate)" LINEID="27"/><ROW ID="645" TEXTSTR="      and pd.kaid=ka.kaid" LINEID="28"/><ROW ID="645" TEXTSTR="      %n" LINEID="29"/><ROW ID="645" TEXTSTR="order by 4" LINEID="30"/><ROW ID="650" TEXTSTR="select wmt.ondate," LINEID="0"/><ROW ID="650" TEXTSTR="  sum(formatfloat(cast(wbdet.price as double precision) * cast(wbdet.onvalue as double precision) * cast(wmt.amount as double precision), -2)) summout" LINEID="1"/><ROW ID="650" TEXTSTR="from wmatturn wmt, waybilldet wbdet, waybilllist wbl, materials mats" LINEID="2"/><ROW ID="650" TEXTSTR="where wmt.turntype=-1" LINEID="3"/><ROW ID="650" TEXTSTR="      and wbdet.posid=wmt.sourceid" LINEID="4"/><ROW ID="650" TEXTSTR="      and wbl.wbillid=wbdet.wbillid" LINEID="5"/><ROW ID="650" TEXTSTR="      and (wmt.ondate between :fromdate and :todate)" LINEID="6"/><ROW ID="650" TEXTSTR="      and mats.matid=wbdet.matid" LINEID="7"/><ROW ID="650" TEXTSTR="      and wbl.wtype&lt;&gt;4" LINEID="8"/><ROW ID="650" TEXTSTR="%m" LINEID="9"/><ROW ID="650" TEXTSTR="group by wmt.ondate" LINEID="10"/><ROW ID="650" TEXTSTR="order by wmt.ondate" LINEID="11"/><ROW ID="651" TEXTSTR="select extractdate(pd.ondate) as ondate,pd.docnum, ct.name as ctname, curr.shortname as currname," LINEID="0"/><ROW ID="651" TEXTSTR="  ka.name as kaname, kap.name as personname, cast(pd.onvalue as double precision) as currrate," LINEID="1"/><ROW ID="651" TEXTSTR="  formatfloat(cast(pd.total as double precision)*cast(pd.onvalue as double precision),-2) as totaldef" LINEID="2"/><ROW ID="651" TEXTSTR="from paydoc pd" LINEID="3"/><ROW ID="651" TEXTSTR=" join currency curr on curr.currid=pd.currid" LINEID="4"/><ROW ID="651" TEXTSTR=" join chargetype ct on ct.ctypeid=pd.ctypeid" LINEID="5"/><ROW ID="651" TEXTSTR=" left outer join kagent ka on ka.kaid=pd.kaid" LINEID="6"/><ROW ID="651" TEXTSTR=" left outer join kagent kap on kap.kaid=pd.mpersonid" LINEID="7"/><ROW ID="651" TEXTSTR="where pd.deleted=0" LINEID="8"/><ROW ID="651" TEXTSTR="      and pd.checked=1" LINEID="9"/><ROW ID="651" TEXTSTR="      and pd.ondate between :fromdate and :todate" LINEID="10"/><ROW ID="651" TEXTSTR="      %m" LINEID="11"/><ROW ID="651" TEXTSTR="order by pd.ondate" LINEID="12"/><ROW ID="654" TEXTSTR="select kas.kaid, ka.name, formatfloat(cast(kas.saldo as double precision), -2) as summdef" LINEID="0"/><ROW ID="654" TEXTSTR="from kagentsaldo kas, kagent ka" LINEID="1"/><ROW ID="654" TEXTSTR="where ka.kaid=kas.kaid" LINEID="2"/><ROW ID="654" TEXTSTR="and kas.ondate=(select max(kas2.ondate)" LINEID="3"/><ROW ID="654" TEXTSTR="                from kagentsaldo kas2" LINEID="4"/><ROW ID="654" TEXTSTR="                where kas2.kaid=kas.kaid and kas2.ondate&lt;=:ondate)" LINEID="5"/><ROW ID="654" TEXTSTR="and formatfloat(kas.saldo,-2) %m 0" LINEID="6"/><ROW ID="654" TEXTSTR="order by ka.name" LINEID="7"/><ROW ID="654" TEXTSTR="" LINEID="8"/><ROW ID="659" TEXTSTR="select wblist.num num, wblist.ondate, wblist.wtype tp," LINEID="0"/><ROW ID="659" TEXTSTR=" formatfloat(cast(wblist.summall as double precision) * (wblist.wtype / abs(wblist.wtype)),-2) summdef," LINEID="1"/><ROW ID="659" TEXTSTR=" 1 wb, CAST(null as varchar(48)) as ptname" LINEID="2"/><ROW ID="659" TEXTSTR="from waybilllist wblist" LINEID="3"/><ROW ID="659" TEXTSTR="where wblist.deleted=0" LINEID="4"/><ROW ID="659" TEXTSTR="      and wblist.checked=1" LINEID="5"/><ROW ID="659" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="6"/><ROW ID="659" TEXTSTR="      and wblist.kaid=:kaid" LINEID="7"/><ROW ID="659" TEXTSTR="      and wblist.wtype in (-6,-1,1,6)" LINEID="8"/><ROW ID="659" TEXTSTR="" LINEID="9"/><ROW ID="659" TEXTSTR="union all" LINEID="10"/><ROW ID="659" TEXTSTR="" LINEID="11"/><ROW ID="659" TEXTSTR="select pd.docnum, pd.ondate, pd.doctype tp," LINEID="12"/><ROW ID="659" TEXTSTR=" cast(formatfloat(cast(pd.total as double precision)*cast(pd.onvalue as double precision)*pd.doctype,-2) as double precision) summdef," LINEID="13"/><ROW ID="659" TEXTSTR=" 0 wb, pt.name ptname" LINEID="14"/><ROW ID="659" TEXTSTR="from paydoc pd, paytype pt" LINEID="15"/><ROW ID="659" TEXTSTR="where pd.deleted=0" LINEID="16"/><ROW ID="659" TEXTSTR="      and (pd.doctype=1 or pd.doctype=-1)" LINEID="17"/><ROW ID="659" TEXTSTR="      and pd.checked=1" LINEID="18"/><ROW ID="659" TEXTSTR="      and (pd.ondate between :fromdate and :todate)" LINEID="19"/><ROW ID="659" TEXTSTR="      and pd.kaid=:kaid" LINEID="20"/><ROW ID="659" TEXTSTR="      and pt.ptypeid=pd.ptypeid" LINEID="21"/><ROW ID="659" TEXTSTR="" LINEID="22"/><ROW ID="659" TEXTSTR="union all" LINEID="23"/><ROW ID="659" TEXTSTR="" LINEID="24"/><ROW ID="659" TEXTSTR="select cast(null as varchar(20)) num, kagent.startsaldodate ondate, 0 tp," LINEID="25"/><ROW ID="659" TEXTSTR="       cast(kagent.startsaldo as double precision) summdef, 0 wb, CAST(null as varchar(48)) ptname" LINEID="26"/><ROW ID="659" TEXTSTR="from kagent" LINEID="27"/><ROW ID="659" TEXTSTR="where kagent.kaid=:kaid and kagent.startsaldo&lt;&gt;0" LINEID="28"/><ROW ID="659" TEXTSTR="" LINEID="29"/><ROW ID="659" TEXTSTR="order by 2" LINEID="30"/><ROW ID="705" TEXTSTR="select %f wmt.matid, -mats.grpid as grpid, mats.name as matname," LINEID="0"/><ROW ID="705" TEXTSTR="       msr.shortname as msrname, mats.deleted as del, mats.artikul," LINEID="1"/><ROW ID="705" TEXTSTR="       mats.producer, cast(mr.remain-mr.rsv as double precision) as remain," LINEID="2"/><ROW ID="705" TEXTSTR="       cast(sum(wmt.amount) as double precision) as amountout," LINEID="3"/><ROW ID="705" TEXTSTR="       cast(sum(formatfloat(cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision), -2)) as double precision) as summin," LINEID="4"/><ROW ID="705" TEXTSTR="       cast(sum(((cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbd.nds))*cast(wbd.nds as double precision)) as double precision) as ndsin," LINEID="5"/><ROW ID="705" TEXTSTR="       cast(sum(formatfloat(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision), -2)) as double precision) as summout," LINEID="6"/><ROW ID="705" TEXTSTR="       cast(sum(((cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbds.nds))*cast(wbds.nds as double precision)) as double precision) as ndsout," LINEID="7"/><ROW ID="705" TEXTSTR="       cast(sum(((cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbds.nds))*cast(wbds.nds as double precision) -" LINEID="8"/><ROW ID="705" TEXTSTR="           ((cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbd.nds))*cast(wbd.nds as double precision)) as double precision) as ndsdif," LINEID="9"/><ROW ID="705" TEXTSTR="       cast(sum(formatfloat(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision), -2) -" LINEID="10"/><ROW ID="705" TEXTSTR="           formatfloat(cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision), -2)) as double precision) as prib," LINEID="11"/><ROW ID="705" TEXTSTR="       cast(sum(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision)-" LINEID="12"/><ROW ID="705" TEXTSTR="         cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision))/" LINEID="13"/><ROW ID="705" TEXTSTR="         sum(cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision)+0.0000000000000000000000000000000000000001)*100 as double precision) as koef" LINEID="14"/><ROW ID="705" TEXTSTR="from wmatturn wmt," LINEID="15"/><ROW ID="705" TEXTSTR="     materials mats, measures msr, waybilldet wbd," LINEID="16"/><ROW ID="705" TEXTSTR="     currency curr, waybilldet wbds, waybilllist wbls," LINEID="17"/><ROW ID="705" TEXTSTR="     currency currs, matremains mr" LINEID="18"/><ROW ID="705" TEXTSTR="where wmt.turntype=-1" LINEID="19"/><ROW ID="705" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="20"/><ROW ID="705" TEXTSTR="      and mats.matid=wmt.matid" LINEID="21"/><ROW ID="705" TEXTSTR="      and msr.mid=mats.mid" LINEID="22"/><ROW ID="705" TEXTSTR="      and wbd.posid=wmt.posid" LINEID="23"/><ROW ID="705" TEXTSTR="      and curr.currid=wbd.currid" LINEID="24"/><ROW ID="705" TEXTSTR="      and wbds.posid=wmt.sourceid" LINEID="25"/><ROW ID="705" TEXTSTR="      and currs.currid=wbds.currid" LINEID="26"/><ROW ID="705" TEXTSTR="      and wbls.wbillid=wbds.wbillid" LINEID="27"/><ROW ID="705" TEXTSTR="      and wbls.wtype=-1" LINEID="28"/><ROW ID="705" TEXTSTR="      and mats.matid=mr.matid" LINEID="29"/><ROW ID="705" TEXTSTR="      and mr.ondate=(select max(ondate) from matremains where mr.matid=matid and ondate&lt;=:todate)" LINEID="30"/><ROW ID="705" TEXTSTR="      %m" LINEID="31"/><ROW ID="705" TEXTSTR="group by 1,2,3,4,5,6,7,8" LINEID="32"/><ROW ID="705" TEXTSTR="" LINEID="33"/><ROW ID="705" TEXTSTR="union all" LINEID="34"/><ROW ID="705" TEXTSTR="" LINEID="35"/><ROW ID="705" TEXTSTR="select distinct mats.matid, cast(-mats.grpid as integer) as grpid, mats.name as matname," LINEID="36"/><ROW ID="705" TEXTSTR="    msr.shortname as msrname, mats.deleted as del, mats.artikul, mats.producer," LINEID="37"/><ROW ID="705" TEXTSTR="    cast(mr.remain-mr.rsv as double precision) as remain," LINEID="38"/><ROW ID="705" TEXTSTR="    cast(0.0 as as double precision) as amountout," LINEID="39"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as summin," LINEID="40"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as ndsin," LINEID="41"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as summout," LINEID="42"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as ndsout," LINEID="43"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as ndsdif," LINEID="44"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as prib," LINEID="45"/><ROW ID="705" TEXTSTR="    cast(0.0 as double precision) as koef" LINEID="46"/><ROW ID="705" TEXTSTR=" from wmatturn wmt, materials mats, measures msr, matremains mr" LINEID="47"/><ROW ID="705" TEXTSTR=" where wmt.matid=mats.matid" LINEID="48"/><ROW ID="705" TEXTSTR="  and mats.mid=msr.mid" LINEID="49"/><ROW ID="705" TEXTSTR="  and wmt.ondate between :fromdate and :todate" LINEID="50"/><ROW ID="705" TEXTSTR="  and wmt.turntype in (1, 2)" LINEID="51"/><ROW ID="705" TEXTSTR="  and mr.matid=mats.matid" LINEID="52"/><ROW ID="705" TEXTSTR="  and mr.ondate=(select max(ondate) from matremains where mr.matid=matid and ondate&lt;=:todate)" LINEID="53"/><ROW ID="705" TEXTSTR="  and not exists" LINEID="54"/><ROW ID="705" TEXTSTR="   (select distinct matid from wmatturn" LINEID="55"/><ROW ID="705" TEXTSTR="     where ondate between :fromdate and :todate" LINEID="56"/><ROW ID="705" TEXTSTR="      and turntype=-1 and matid=mats.matid)" LINEID="57"/><ROW ID="705" TEXTSTR=" %m" LINEID="58"/><ROW ID="705" TEXTSTR=" %n" LINEID="59"/><ROW ID="705" TEXTSTR="" LINEID="60"/><ROW ID="704" TEXTSTR="select %f distinct mats.matid, -mats.grpid as grpid, mats.name as matname," LINEID="0"/><ROW ID="704" TEXTSTR="    msr.shortname as msrname, mats.deleted as del, mats.artikul," LINEID="1"/><ROW ID="704" TEXTSTR="    mats.producer, mr.remain-mr.rsv as remain," LINEID="2"/><ROW ID="704" TEXTSTR="    0.0 as amountout," LINEID="3"/><ROW ID="704" TEXTSTR="    0.0 as summin," LINEID="4"/><ROW ID="704" TEXTSTR="    0.0 as ndsin," LINEID="5"/><ROW ID="704" TEXTSTR="    0.0 as summout," LINEID="6"/><ROW ID="704" TEXTSTR="    0.0 as ndsout," LINEID="7"/><ROW ID="704" TEXTSTR="    0.0 as ndsdif," LINEID="8"/><ROW ID="704" TEXTSTR="    0.0 as prib," LINEID="9"/><ROW ID="704" TEXTSTR="    0.0 as koef" LINEID="10"/><ROW ID="704" TEXTSTR=" from wmatturn wmt, materials mats, measures msr, matremains mr" LINEID="11"/><ROW ID="704" TEXTSTR=" where wmt.matid=mats.matid" LINEID="12"/><ROW ID="704" TEXTSTR="  and mats.mid=msr.mid" LINEID="13"/><ROW ID="704" TEXTSTR="  and wmt.ondate between :fromdate and :todate" LINEID="14"/><ROW ID="704" TEXTSTR="  and wmt.turntype in (1, 2)" LINEID="15"/><ROW ID="704" TEXTSTR="  and mr.matid=mats.matid" LINEID="16"/><ROW ID="704" TEXTSTR="  and mr.ondate=(select max(ondate) from matremains where mr.matid=matid and ondate&lt;=:todate)" LINEID="17"/><ROW ID="704" TEXTSTR="  and not exists" LINEID="18"/><ROW ID="704" TEXTSTR="   (select distinct matid from wmatturn" LINEID="19"/><ROW ID="704" TEXTSTR="     where ondate between :fromdate and :todate" LINEID="20"/><ROW ID="704" TEXTSTR="      and turntype=-1 and matid=mats.matid)" LINEID="21"/><ROW ID="704" TEXTSTR="  %m" LINEID="22"/><ROW ID="704" TEXTSTR="  %n" LINEID="23"/><ROW ID="711" TEXTSTR="select m.matid, m.name as matname, ms.shortname as msrname, m.artikul, m.producer," LINEID="0"/><ROW ID="711" TEXTSTR="   sum(formatfloat(cast(wmt.amount as double precision)*cast(wbd.price as double precision)*cast(wbd.onvalue as double precision), -2)) as total," LINEID="1"/><ROW ID="711" TEXTSTR="   sum(cast(wmt.amount as double precision)) as amount," LINEID="2"/><ROW ID="711" TEXTSTR="   sum(formatfloat(cast(wmt.amount as double precision)*cast(wbdin.price as double precision)*cast(wbdin.onvalue as double precision), -2)) as totalin" LINEID="3"/><ROW ID="711" TEXTSTR="  from wmatturn wmt, returnrel rr, waybilldet wbd," LINEID="4"/><ROW ID="711" TEXTSTR="    materials m, measures ms, waybilldet wbdin" LINEID="5"/><ROW ID="711" TEXTSTR="  where wmt.sourceid=rr.dposid" LINEID="6"/><ROW ID="711" TEXTSTR="   and rr.outposid=wbd.posid" LINEID="7"/><ROW ID="711" TEXTSTR="   and wmt.turntype=1" LINEID="8"/><ROW ID="711" TEXTSTR="   and wmt.matid=m.matid" LINEID="9"/><ROW ID="711" TEXTSTR="   and m.mid=ms.mid" LINEID="10"/><ROW ID="711" TEXTSTR="   and wmt.ondate between :fromdate and :todate" LINEID="11"/><ROW ID="711" TEXTSTR="   and wbdin.posid=rr.pposid" LINEID="12"/><ROW ID="711" TEXTSTR="   %m" LINEID="13"/><ROW ID="711" TEXTSTR=" group by 1,2,3,4,5" LINEID="14"/><ROW ID="711" TEXTSTR=" order by 2" LINEID="15"/><ROW ID="709" TEXTSTR="select m.matid, m.name as matname, ms.shortname as msrname, m.artikul, m.producer," LINEID="0"/><ROW ID="709" TEXTSTR="  sum(formatfloat(cast(wmt.amount as double precision)*cast(wbd.price as double precision)*cast(wbd.onvalue as double precision), -2)) as total," LINEID="1"/><ROW ID="709" TEXTSTR="  sum(cast(wmt.amount as double precision)) as amount" LINEID="2"/><ROW ID="709" TEXTSTR="  from wmatturn wmt, waybilldet wbd, waybilllist wbl," LINEID="3"/><ROW ID="709" TEXTSTR="    materials m, measures ms" LINEID="4"/><ROW ID="709" TEXTSTR="  where wmt.sourceid=wbd.posid" LINEID="5"/><ROW ID="709" TEXTSTR="   and wbd.wbillid=wbl.wbillid" LINEID="6"/><ROW ID="709" TEXTSTR="   and wmt.turntype=-1" LINEID="7"/><ROW ID="709" TEXTSTR="   and wbl.wtype=-5" LINEID="8"/><ROW ID="709" TEXTSTR="   and wbl.defnum&lt;&gt;0" LINEID="9"/><ROW ID="709" TEXTSTR="   and wmt.ondate between :fromdate and :todate" LINEID="10"/><ROW ID="709" TEXTSTR="   and m.matid=wmt.matid" LINEID="11"/><ROW ID="709" TEXTSTR="   and m.mid=ms.mid" LINEID="12"/><ROW ID="709" TEXTSTR="   %m" LINEID="13"/><ROW ID="709" TEXTSTR=" group by 1,2,3,4,5" LINEID="14"/><ROW ID="709" TEXTSTR=" order by 2" LINEID="15"/><ROW ID="738" TEXTSTR="select sum(formatfloat(cast(wbds.price as double precision)*cast(wbd.onvalue as double precision)/" LINEID="0"/><ROW ID="738" TEXTSTR=" (1+wbd.nds/100)*cast(wmt.amount as double precision)/100*cast(wbd.nds as double precision), -2))" LINEID="1"/><ROW ID="738" TEXTSTR=" from waybilldet wbd, waybilllist wbl, wmatturn wmt, waybilldet wbds" LINEID="2"/><ROW ID="738" TEXTSTR=" where wbl.wbillid=wbd.wbillid" LINEID="3"/><ROW ID="738" TEXTSTR="   and wbl.wtype=-1" LINEID="4"/><ROW ID="738" TEXTSTR="   and wbl.defnum=1" LINEID="5"/><ROW ID="738" TEXTSTR="   and wbl.checked=1" LINEID="6"/><ROW ID="738" TEXTSTR="   and wmt.sourceid=wbd.posid" LINEID="7"/><ROW ID="738" TEXTSTR="   and wmt.posid=wbds.posid" LINEID="8"/><ROW ID="738" TEXTSTR="   and wbl.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="738" TEXTSTR="   %m" LINEID="10"/><ROW ID="738" TEXTSTR="" LINEID="11"/><ROW ID="856" TEXTSTR="select mats.matid, mats.name as matname, -mats.grpid as grpid, mg.name as grpname," LINEID="0"/><ROW ID="856" TEXTSTR="       msr.shortname as msrname," LINEID="1"/><ROW ID="856" TEXTSTR="       sum(cast(pr.remain as double precision)) as rest1," LINEID="2"/><ROW ID="856" TEXTSTR="       CAST(" LINEID="3"/><ROW ID="856" TEXTSTR="         sum(" LINEID="4"/><ROW ID="856" TEXTSTR="           case" LINEID="5"/><ROW ID="856" TEXTSTR="             when :ptype=0 then pr.avgprice" LINEID="6"/><ROW ID="856" TEXTSTR="             else (select extra from sp_get_mat_extra(pr.matid,:ptype,pr.ondate,pr.avgprice,0,0))" LINEID="7"/><ROW ID="856" TEXTSTR="           end * cast(pr.remain as double precision)" LINEID="8"/><ROW ID="856" TEXTSTR="          ) as double precision" LINEID="9"/><ROW ID="856" TEXTSTR="        ) as summrest1," LINEID="10"/><ROW ID="856" TEXTSTR="       CAST(sum(case" LINEID="11"/><ROW ID="856" TEXTSTR="         when :ptype=0 then pr.avgprice" LINEID="12"/><ROW ID="856" TEXTSTR="         else (select extra from sp_get_mat_extra(pr.matid,:ptype,pr.ondate,pr.avgprice,0,0))" LINEID="13"/><ROW ID="856" TEXTSTR="         end * cast(pr.remain as double precision)) / case when sum(pr.remain)=0 then 1 else sum(pr.remain) end as double precision) as priceout," LINEID="14"/><ROW ID="856" TEXTSTR="       CAST(sum(cast(pr.avgprice as double precision)*cast(pr.remain as double precision)) as double precision) as summin," LINEID="15"/><ROW ID="856" TEXTSTR="       CAST(sum(cast(pr.avgprice as double precision)*cast(pr.remain as double precision)) / case when sum(pr.remain)=0 then 1 else sum(pr.remain) end as double precision) as pricein," LINEID="16"/><ROW ID="856" TEXTSTR="       CAST(0 as numeric(15,8)) as rest2, CAST(0 as double precision) as summrest2," LINEID="17"/><ROW ID="856" TEXTSTR="       CAST(0 as numeric(15,8)) as rest3, CAST(0 as double precision) as summrest3," LINEID="18"/><ROW ID="856" TEXTSTR="       CAST(0 as numeric(15,8)) as rest4, CAST(0 as double precision) as summrest4" LINEID="19"/><ROW ID="856" TEXTSTR="from posremains pr" LINEID="20"/><ROW ID="856" TEXTSTR="     join materials mats on mats.matid=pr.matid %g" LINEID="21"/><ROW ID="856" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="22"/><ROW ID="856" TEXTSTR="     join matgroup mg on mg.grpid=mats.grpid" LINEID="23"/><ROW ID="856" TEXTSTR="where pr.ondate = (select max(ondate) from posremains where posid=pr.posid and ondate &lt;%e :ondate)" LINEID="24"/><ROW ID="856" TEXTSTR="     %w" LINEID="25"/><ROW ID="856" TEXTSTR="group by 1,2,3,4,5" LINEID="26"/><ROW ID="856" TEXTSTR="     %p" LINEID="27"/><ROW ID="856" TEXTSTR="order by 3" LINEID="28"/><ROW ID="862" TEXTSTR="select wmt.matid,mats.name as matname," LINEID="0"/><ROW ID="862" TEXTSTR="       -mats.grpid as grpid, mg.name as grpname," LINEID="1"/><ROW ID="862" TEXTSTR="       msr.shortname as msrname, sum(wmt.amount) as rest," LINEID="2"/><ROW ID="862" TEXTSTR="       CAST(sum(case" LINEID="3"/><ROW ID="862" TEXTSTR="         when :ptype=0 then cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)" LINEID="4"/><ROW ID="862" TEXTSTR="         else (select extra from sp_get_mat_extra(wmt.matid,:ptype,wmt.ondate,cast(wbd.price as double precision)*cast(wbd.onvalue as double precision),0,0))" LINEID="5"/><ROW ID="862" TEXTSTR="       end*wmt.amount) as double precision) as summrest," LINEID="6"/><ROW ID="862" TEXTSTR="       cast(sum(cast(wmt.amount as double precision)*cast(wbd.price as double precision)*cast(wbd.onvalue as double precision))" LINEID="7"/><ROW ID="862" TEXTSTR="         as double precision) as summin" LINEID="8"/><ROW ID="862" TEXTSTR="from wmatturn wmt" LINEID="9"/><ROW ID="862" TEXTSTR="     join materials mats on mats.matid=wmt.matid %g" LINEID="10"/><ROW ID="862" TEXTSTR="     join matgroup mg on mg.grpid=mats.grpid" LINEID="11"/><ROW ID="862" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="12"/><ROW ID="862" TEXTSTR="     join waybilldet wbd on wbd.posid=wmt.posid" LINEID="13"/><ROW ID="862" TEXTSTR="     join currency curr on curr.currid=wbd.currid" LINEID="14"/><ROW ID="862" TEXTSTR="     join waybilldet wbds on wbds.posid=wmt.sourceid" LINEID="15"/><ROW ID="862" TEXTSTR="     join waybilllist wbls on wbls.wbillid=wbds.wbillid %s" LINEID="16"/><ROW ID="862" TEXTSTR="where wmt.turntype=:turntype" LINEID="17"/><ROW ID="862" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="18"/><ROW ID="862" TEXTSTR="      %w" LINEID="19"/><ROW ID="862" TEXTSTR="group by 1,2,3,4,5" LINEID="20"/><ROW ID="862" TEXTSTR="order by 1" LINEID="21"/><ROW ID="849" TEXTSTR="select wmt.matid, mats.name as matname," LINEID="0"/><ROW ID="849" TEXTSTR="      -mats.grpid as grpid, mg.name as grpname," LINEID="1"/><ROW ID="849" TEXTSTR="       msr.shortname as msrname," LINEID="2"/><ROW ID="849" TEXTSTR="       mats.artikul, mats.producer," LINEID="3"/><ROW ID="849" TEXTSTR="       sum(cast(wmt.amount as double precision)) as amount," LINEID="4"/><ROW ID="849" TEXTSTR="       sum(formatfloat(cast(wbd.price as double precision) * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision), -2)) as summin," LINEID="5"/><ROW ID="849" TEXTSTR="       sum(((cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbd.nds))*cast(wbd.nds as double precision)) as ndsin," LINEID="6"/><ROW ID="849" TEXTSTR="       sum(formatfloat(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision), -2)) as summ," LINEID="7"/><ROW ID="849" TEXTSTR="       sum(((cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbds.nds))*cast(wbds.nds as double precision)) as ndsout," LINEID="8"/><ROW ID="849" TEXTSTR="       sum(((cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbds.nds))*cast(wbds.nds as double precision)-" LINEID="9"/><ROW ID="849" TEXTSTR="           ((cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision))/(100+wbd.nds))*cast(wbd.nds as double precision)) as ndsdif," LINEID="10"/><ROW ID="849" TEXTSTR="       sum(formatfloat(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision), -2) -" LINEID="11"/><ROW ID="849" TEXTSTR="           formatfloat(cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision), -2)) prib" LINEID="12"/><ROW ID="849" TEXTSTR="from wmatturn wmt" LINEID="13"/><ROW ID="849" TEXTSTR="     join materials mats on mats.matid=wmt.matid %g" LINEID="14"/><ROW ID="849" TEXTSTR="     join matgroup mg on mg.grpid=mats.grpid" LINEID="15"/><ROW ID="849" TEXTSTR="     join measures msr on msr.mid=mats.mid" LINEID="16"/><ROW ID="849" TEXTSTR="     join waybilldet wbd on wbd.posid=wmt.posid" LINEID="17"/><ROW ID="849" TEXTSTR="     join waybilldet wbds on wbds.posid=wmt.sourceid" LINEID="18"/><ROW ID="849" TEXTSTR="     join waybilllist wbls on wbls.wbillid=wbds.wbillid" LINEID="19"/><ROW ID="849" TEXTSTR="                              and wbls.wtype=-1 %k" LINEID="20"/><ROW ID="849" TEXTSTR="where wmt.turntype=-1" LINEID="21"/><ROW ID="849" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="22"/><ROW ID="849" TEXTSTR="  %w" LINEID="23"/><ROW ID="849" TEXTSTR="group by 1,2,3,4,5,6,7" LINEID="24"/><ROW ID="849" TEXTSTR="having sum(wmt.amount)&gt;0" LINEID="25"/><ROW ID="849" TEXTSTR="order by %o 2" LINEID="26"/><ROW ID="822" TEXTSTR="select distinct wbl.kaid, ka.name as kaname," LINEID="0"/><ROW ID="822" TEXTSTR="       wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate," LINEID="1"/><ROW ID="822" TEXTSTR="       cur.currid, cur.shortname as curname, cast(wbl.onvalue as double precision)," LINEID="2"/><ROW ID="822" TEXTSTR="       wbl.reason" LINEID="3"/><ROW ID="822" TEXTSTR="from waybilllist wbl" LINEID="4"/><ROW ID="822" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="5"/><ROW ID="822" TEXTSTR=" %j" LINEID="6"/><ROW ID="822" TEXTSTR=" left outer join currency cur on cur.currid=wbl.currid" LINEID="7"/><ROW ID="822" TEXTSTR="where wbl.deleted=0" LINEID="8"/><ROW ID="822" TEXTSTR="      and wbl.wtype in (-1,6)" LINEID="9"/><ROW ID="822" TEXTSTR="      and wbl.checked=1" LINEID="10"/><ROW ID="822" TEXTSTR="      and (wbl.ondate between :fromdate and :todate)" LINEID="11"/><ROW ID="822" TEXTSTR="      %m" LINEID="12"/><ROW ID="822" TEXTSTR="order by wbl.kaid, wbl.ondate" LINEID="13"/><ROW ID="826" TEXTSTR="select wbl.kaid, ka.name as kaname," LINEID="0"/><ROW ID="826" TEXTSTR="       wbl.wbillid, wbl.wtype, wbl.num, wbl.ondate," LINEID="1"/><ROW ID="826" TEXTSTR="       cur.currid, cur.shortname as curname, cast(wbl.onvalue as double precision)," LINEID="2"/><ROW ID="826" TEXTSTR="       wbl.reason" LINEID="3"/><ROW ID="826" TEXTSTR="from waybilllist wbl" LINEID="4"/><ROW ID="826" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="5"/><ROW ID="826" TEXTSTR=" left outer join currency cur on cur.currid=wbl.currid" LINEID="6"/><ROW ID="826" TEXTSTR="where wbl.deleted=0" LINEID="7"/><ROW ID="826" TEXTSTR="      and wbl.wtype in (1,-6)" LINEID="8"/><ROW ID="826" TEXTSTR="      and wbl.checked=1" LINEID="9"/><ROW ID="826" TEXTSTR="      and (wbl.ondate between :fromdate and :todate)" LINEID="10"/><ROW ID="826" TEXTSTR="      %m" LINEID="11"/><ROW ID="826" TEXTSTR="order by wbl.kaid, wbl.ondate" LINEID="12"/><ROW ID="656" TEXTSTR="select wbdet.matid, mats.name matname, msr.shortname msrname, SUM(cast(wbdet.amount as double precision)) amount," LINEID="0"/><ROW ID="656" TEXTSTR="       SUM(FormatFloat(cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision)*cast(wbdet.amount as double precision),-2)) summdef" LINEID="1"/><ROW ID="656" TEXTSTR="from waybilldet wbdet, waybilllist wblist, materials mats, measures msr," LINEID="2"/><ROW ID="656" TEXTSTR="     wmatturn wmt" LINEID="3"/><ROW ID="656" TEXTSTR="where wbdet.wbillid=wblist.wbillid" LINEID="4"/><ROW ID="656" TEXTSTR="      and wblist.deleted=0" LINEID="5"/><ROW ID="656" TEXTSTR="      and wblist.wtype in (1,5)" LINEID="6"/><ROW ID="656" TEXTSTR="      and wblist.checked=1" LINEID="7"/><ROW ID="656" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="8"/><ROW ID="656" TEXTSTR="      and wbdet.matid=mats.matid" LINEID="9"/><ROW ID="656" TEXTSTR="      and mats.mid=msr.mid" LINEID="10"/><ROW ID="656" TEXTSTR="      and wmt.sourceid=wbdet.posid" LINEID="11"/><ROW ID="656" TEXTSTR="      and wmt.turntype=1" LINEID="12"/><ROW ID="656" TEXTSTR="      %m" LINEID="13"/><ROW ID="656" TEXTSTR="group by wbdet.matid, mats.name, msr.shortname" LINEID="14"/><ROW ID="656" TEXTSTR="" LINEID="15"/><ROW ID="656" TEXTSTR="union all" LINEID="16"/><ROW ID="656" TEXTSTR="" LINEID="17"/><ROW ID="656" TEXTSTR="select wbdet.matid, mats.name matname, msr.shortname msrname, SUM(wbdet.amount) amount," LINEID="18"/><ROW ID="656" TEXTSTR="       SUM(FormatFloat(cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision)*cast(wbdet.amount as double precision),-2)) summdef" LINEID="19"/><ROW ID="656" TEXTSTR="from waybilldet wbdet, waybilllist wblist, materials mats, measures msr," LINEID="20"/><ROW ID="656" TEXTSTR="     extrel er, wmatturn wmt" LINEID="21"/><ROW ID="656" TEXTSTR="where wbdet.wbillid=wblist.wbillid" LINEID="22"/><ROW ID="656" TEXTSTR="      and wblist.deleted=0" LINEID="23"/><ROW ID="656" TEXTSTR="      and wblist.checked=1" LINEID="24"/><ROW ID="656" TEXTSTR="      and wblist.wtype in (%n)" LINEID="25"/><ROW ID="656" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="26"/><ROW ID="656" TEXTSTR="      and wbdet.matid=mats.matid" LINEID="27"/><ROW ID="656" TEXTSTR="      and mats.mid=msr.mid" LINEID="28"/><ROW ID="656" TEXTSTR="      and er.intposid=wbdet.posid" LINEID="29"/><ROW ID="656" TEXTSTR="      and wmt.sourceid=wbdet.posid" LINEID="30"/><ROW ID="656" TEXTSTR="      and wmt.turntype=1" LINEID="31"/><ROW ID="656" TEXTSTR="      %m" LINEID="32"/><ROW ID="656" TEXTSTR="      and er.extposid not in (select wbd.posid" LINEID="33"/><ROW ID="656" TEXTSTR="                              from waybilldet wbd, waybilllist wbl, materials mats, wmatturn wmt" LINEID="34"/><ROW ID="656" TEXTSTR="                              where wbd.wbillid=wbl.wbillid" LINEID="35"/><ROW ID="656" TEXTSTR="                                    and wbl.deleted=0" LINEID="36"/><ROW ID="656" TEXTSTR="                                    and wbl.wtype in (1,5)" LINEID="37"/><ROW ID="656" TEXTSTR="                                    and wbl.checked=1" LINEID="38"/><ROW ID="656" TEXTSTR="                                    and (wbl.ondate between :fromdate and :todate)" LINEID="39"/><ROW ID="656" TEXTSTR="                                    and mats.matid=wbd.matid" LINEID="40"/><ROW ID="656" TEXTSTR="                                    and wmt.sourceid=wbd.posid" LINEID="41"/><ROW ID="656" TEXTSTR="                                    and wmt.turntype=1" LINEID="42"/><ROW ID="656" TEXTSTR="                                    %m)" LINEID="43"/><ROW ID="656" TEXTSTR="group by wbdet.matid, mats.name, msr.shortname" LINEID="44"/><ROW ID="656" TEXTSTR="" LINEID="45"/><ROW ID="656" TEXTSTR="order by 2" LINEID="46"/><ROW ID="657" TEXTSTR="select wbdet.matid, -1*mats.grpid as grpid, mats.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="657" TEXTSTR="       mats.deleted as del, SUM(cast(wbdet.amount as double precision)) amount," LINEID="1"/><ROW ID="657" TEXTSTR="       SUM(FormatFloat(cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision)*cast(wbdet.amount as double precision),-2)) summdef" LINEID="2"/><ROW ID="657" TEXTSTR="from waybilldet wbdet, waybilllist wblist, materials mats, measures msr," LINEID="3"/><ROW ID="657" TEXTSTR="     wmatturn wmt" LINEID="4"/><ROW ID="657" TEXTSTR="where wbdet.wbillid=wblist.wbillid" LINEID="5"/><ROW ID="657" TEXTSTR="      and wblist.deleted=0" LINEID="6"/><ROW ID="657" TEXTSTR="      and wblist.wtype in (1,5)" LINEID="7"/><ROW ID="657" TEXTSTR="      and wblist.checked=1" LINEID="8"/><ROW ID="657" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="9"/><ROW ID="657" TEXTSTR="      and wbdet.matid=mats.matid" LINEID="10"/><ROW ID="657" TEXTSTR="      and mats.mid=msr.mid" LINEID="11"/><ROW ID="657" TEXTSTR="      and wmt.sourceid=wbdet.posid" LINEID="12"/><ROW ID="657" TEXTSTR="      and wmt.turntype=1" LINEID="13"/><ROW ID="657" TEXTSTR="      %m" LINEID="14"/><ROW ID="657" TEXTSTR="group by 1,2,3,4,5" LINEID="15"/><ROW ID="657" TEXTSTR="" LINEID="16"/><ROW ID="657" TEXTSTR="union all" LINEID="17"/><ROW ID="657" TEXTSTR="" LINEID="18"/><ROW ID="657" TEXTSTR="select wbdet.matid, -1*mats.grpid as grpid, mats.name matname, msr.shortname msrname," LINEID="19"/><ROW ID="657" TEXTSTR="       mats.deleted as del, SUM(wbdet.amount) amount," LINEID="20"/><ROW ID="657" TEXTSTR="       SUM(FormatFloat(cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision)*cast(wbdet.amount as double precision),-2)) summdef" LINEID="21"/><ROW ID="657" TEXTSTR="from waybilldet wbdet, waybilllist wblist, materials mats, measures msr," LINEID="22"/><ROW ID="657" TEXTSTR="     extrel er, wmatturn wmt" LINEID="23"/><ROW ID="657" TEXTSTR="where wbdet.wbillid=wblist.wbillid" LINEID="24"/><ROW ID="657" TEXTSTR="      and wblist.deleted=0" LINEID="25"/><ROW ID="657" TEXTSTR="      and wblist.checked=1" LINEID="26"/><ROW ID="657" TEXTSTR="      and wblist.wtype in (%n)" LINEID="27"/><ROW ID="657" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="28"/><ROW ID="657" TEXTSTR="      and wbdet.matid=mats.matid" LINEID="29"/><ROW ID="657" TEXTSTR="      and mats.mid=msr.mid" LINEID="30"/><ROW ID="657" TEXTSTR="      and er.intposid=wbdet.posid" LINEID="31"/><ROW ID="657" TEXTSTR="      and wmt.sourceid=wbdet.posid" LINEID="32"/><ROW ID="657" TEXTSTR="      and wmt.turntype=1" LINEID="33"/><ROW ID="657" TEXTSTR="      %m" LINEID="34"/><ROW ID="657" TEXTSTR="      and er.extposid not in (select wbd.posid" LINEID="35"/><ROW ID="657" TEXTSTR="                              from waybilldet wbd, waybilllist wbl, materials mats, wmatturn wmt" LINEID="36"/><ROW ID="657" TEXTSTR="                              where wbd.wbillid=wbl.wbillid" LINEID="37"/><ROW ID="657" TEXTSTR="                                    and wbl.deleted=0" LINEID="38"/><ROW ID="657" TEXTSTR="                                    and wbl.wtype in (1,5)" LINEID="39"/><ROW ID="657" TEXTSTR="                                    and wbl.checked=1" LINEID="40"/><ROW ID="657" TEXTSTR="                                    and (wbl.ondate between :fromdate and :todate)" LINEID="41"/><ROW ID="657" TEXTSTR="                                    and mats.matid=wbd.matid" LINEID="42"/><ROW ID="657" TEXTSTR="                                    and wmt.sourceid=wbd.posid" LINEID="43"/><ROW ID="657" TEXTSTR="                                    and wmt.turntype=1" LINEID="44"/><ROW ID="657" TEXTSTR="                                    %m)" LINEID="45"/><ROW ID="657" TEXTSTR="group by 1,2,3,4,5" LINEID="46"/><ROW ID="657" TEXTSTR="" LINEID="47"/><ROW ID="657" TEXTSTR="" LINEID="48"/><ROW ID="657" TEXTSTR="union all" LINEID="49"/><ROW ID="657" TEXTSTR="" LINEID="50"/><ROW ID="657" TEXTSTR="" LINEID="51"/><ROW ID="657" TEXTSTR="select -1*mg.grpid as matid, -1*mg.pid as grpid, CAST(mg.name as varchar(128)) as matname," LINEID="52"/><ROW ID="657" TEXTSTR="CAST(null as varchar(6)) as msrname, CAST(1 as integer) as del," LINEID="53"/><ROW ID="657" TEXTSTR="CAST(null as numeric(15,5)) as amount, CAST(null as DOUBLE PRECISION) as summdef" LINEID="54"/><ROW ID="657" TEXTSTR="from matgroup mg" LINEID="55"/><ROW ID="657" TEXTSTR="where deleted=0" LINEID="56"/><ROW ID="657" TEXTSTR="" LINEID="57"/><ROW ID="643" TEXTSTR="select" LINEID="0"/><ROW ID="643" TEXTSTR="  sum(cast(pr.remain as double precision)) as rest," LINEID="1"/><ROW ID="643" TEXTSTR="  sum(cast(pr.remain as double precision) * cast(pr.avgprice as double precision)) as summ" LINEID="2"/><ROW ID="643" TEXTSTR="from posremains pr" LINEID="3"/><ROW ID="643" TEXTSTR="where pr.ondate=(select max(ondate) from posremains where posid=pr.posid and ondate&lt;:ondate)" LINEID="4"/><ROW ID="643" TEXTSTR="      and pr.matid=:matid" LINEID="5"/><ROW ID="643" TEXTSTR="      %m" LINEID="6"/><ROW ID="652" TEXTSTR="select pr.matid, -mats.grpid as grpid, mats.name as matname," LINEID="0"/><ROW ID="652" TEXTSTR="       msr.shortname as msrname, mats.deleted as del," LINEID="1"/><ROW ID="652" TEXTSTR="       sum(cast(pr.remain as double precision)) as rest1, sum(cast(pr.remain as double precision)*cast(pr.avgprice as double precision)) as summrest1," LINEID="2"/><ROW ID="652" TEXTSTR="       CAST(0 as double precision) rest2, CAST(0 as double precision) summrest2," LINEID="3"/><ROW ID="652" TEXTSTR="       CAST(0 as double precision) rest3, CAST(0 as double precision) summrest3," LINEID="4"/><ROW ID="652" TEXTSTR="       CAST(0 as double precision) rest4, CAST(0 as double precision) summrest4" LINEID="5"/><ROW ID="652" TEXTSTR="from posremains pr, materials mats, measures msr" LINEID="6"/><ROW ID="652" TEXTSTR="where pr.ondate=(select max(ondate) from posremains where posid=pr.posid and ondate&lt;:ondate)" LINEID="7"/><ROW ID="652" TEXTSTR="      and mats.matid=pr.matid" LINEID="8"/><ROW ID="652" TEXTSTR="      and msr.mid=mats.mid" LINEID="9"/><ROW ID="652" TEXTSTR="      %m" LINEID="10"/><ROW ID="652" TEXTSTR="group by pr.matid, mats.grpid, mats.name, msr.shortname, mats.deleted" LINEID="11"/><ROW ID="652" TEXTSTR="having sum(pr.remain)&gt;0" LINEID="12"/><ROW ID="652" TEXTSTR="order by 3" LINEID="13"/><ROW ID="652" TEXTSTR="" LINEID="14"/><ROW ID="653" TEXTSTR="select wmt.matid, -mats.grpid as grpid, mats.name as matname," LINEID="0"/><ROW ID="653" TEXTSTR="       msr.shortname as msrname, mats.deleted as del, sum(cast(wmt.amount as double precision)) as rest," LINEID="1"/><ROW ID="653" TEXTSTR="       cast(sum(cast(wbd.price as double precision) * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision)) as double precision) as summrest" LINEID="2"/><ROW ID="653" TEXTSTR="from wmatturn wmt, materials mats, measures msr, waybilldet wbd," LINEID="3"/><ROW ID="653" TEXTSTR="     currency curr, waybilldet wbds, waybilllist wbls" LINEID="4"/><ROW ID="653" TEXTSTR="where wmt.turntype=:turntype" LINEID="5"/><ROW ID="653" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="6"/><ROW ID="653" TEXTSTR="      and mats.matid=wmt.matid" LINEID="7"/><ROW ID="653" TEXTSTR="      and msr.mid=mats.mid" LINEID="8"/><ROW ID="653" TEXTSTR="      and wbd.posid=wmt.posid" LINEID="9"/><ROW ID="653" TEXTSTR="      and curr.currid=wbd.currid" LINEID="10"/><ROW ID="653" TEXTSTR="      and wbds.posid=wmt.sourceid" LINEID="11"/><ROW ID="653" TEXTSTR="      and wbls.wbillid=wbds.wbillid" LINEID="12"/><ROW ID="653" TEXTSTR="      %m" LINEID="13"/><ROW ID="653" TEXTSTR="group by 1,2,3,4,5" LINEID="14"/><ROW ID="653" TEXTSTR="order by 1" LINEID="15"/><ROW ID="693" TEXTSTR="select svc.svcid, -svc.pid as pid, svc.name as svcname," LINEID="0"/><ROW ID="693" TEXTSTR="       msr.shortname as msrname, svc.deleted as del," LINEID="1"/><ROW ID="693" TEXTSTR="       sum(cast(wbsvc.amount as double precision)) as amountout," LINEID="2"/><ROW ID="693" TEXTSTR="       sum(cast(wbsvc.price as double precision)*cast(wbl.onvalue as double precision)*cast(wbsvc.amount as double precision)) as summout" LINEID="3"/><ROW ID="693" TEXTSTR="" LINEID="4"/><ROW ID="693" TEXTSTR="from waybilllist wbl, waybillsvc wbsvc, services svc, measures msr," LINEID="5"/><ROW ID="693" TEXTSTR="     currency curr" LINEID="6"/><ROW ID="693" TEXTSTR="where wbl.checked=1" LINEID="7"/><ROW ID="693" TEXTSTR="  and wbl.wtype=-1" LINEID="8"/><ROW ID="693" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="693" TEXTSTR="  and wbl.wbillid=wbsvc.wbillid" LINEID="10"/><ROW ID="693" TEXTSTR="  and svc.svcid=wbsvc.svcid" LINEID="11"/><ROW ID="693" TEXTSTR="  and msr.mid=svc.mid" LINEID="12"/><ROW ID="693" TEXTSTR="" LINEID="13"/><ROW ID="693" TEXTSTR="  and curr.currid=wbsvc.currid" LINEID="14"/><ROW ID="693" TEXTSTR="  %m" LINEID="15"/><ROW ID="693" TEXTSTR="group by 1,2,3,4,5" LINEID="16"/><ROW ID="693" TEXTSTR="  %n" LINEID="17"/><ROW ID="694" TEXTSTR="select svc.svcid, -svc.pid as pid, svc.name as svcname," LINEID="0"/><ROW ID="694" TEXTSTR="  msr.shortname as msrname, svc.deleted as del," LINEID="1"/><ROW ID="694" TEXTSTR="  cast(sum(wbsvc.amount) as double precision) as amountout," LINEID="2"/><ROW ID="694" TEXTSTR="  cast(sum(cast(wbsvc.price as double precision) * cast(wbl.onvalue as double precision)*cast(wbsvc.amount as double precision)) as double precision) as summout" LINEID="3"/><ROW ID="694" TEXTSTR="" LINEID="4"/><ROW ID="694" TEXTSTR="from waybilllist wbl, waybillsvc wbsvc, services svc, measures msr," LINEID="5"/><ROW ID="694" TEXTSTR="  currency curr" LINEID="6"/><ROW ID="694" TEXTSTR="where wbl.checked=1" LINEID="7"/><ROW ID="694" TEXTSTR="  and wbl.wtype=-1" LINEID="8"/><ROW ID="694" TEXTSTR="  and wbl.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="694" TEXTSTR="  and wbl.wbillid=wbsvc.wbillid" LINEID="10"/><ROW ID="694" TEXTSTR="  and svc.svcid=wbsvc.svcid" LINEID="11"/><ROW ID="694" TEXTSTR="  and msr.mid=svc.mid" LINEID="12"/><ROW ID="694" TEXTSTR="" LINEID="13"/><ROW ID="694" TEXTSTR="  and curr.currid=wbsvc.currid" LINEID="14"/><ROW ID="694" TEXTSTR="  %m" LINEID="15"/><ROW ID="694" TEXTSTR="group by 1,2,3,4,5" LINEID="16"/><ROW ID="694" TEXTSTR="" LINEID="17"/><ROW ID="694" TEXTSTR="union all" LINEID="18"/><ROW ID="694" TEXTSTR="" LINEID="19"/><ROW ID="694" TEXTSTR="select -svc.svcid as svcid, -svc.pid as pid, svc.name as svcname," LINEID="20"/><ROW ID="694" TEXTSTR="CAST(null as varchar(6)) as msrname, CAST(1 as integer) as del," LINEID="21"/><ROW ID="694" TEXTSTR="CAST(null as double precision) as amountout," LINEID="22"/><ROW ID="694" TEXTSTR="CAST(null as double precision) as summout" LINEID="23"/><ROW ID="694" TEXTSTR="" LINEID="24"/><ROW ID="694" TEXTSTR="from services svc" LINEID="25"/><ROW ID="694" TEXTSTR="where deleted=0" LINEID="26"/><ROW ID="694" TEXTSTR="" LINEID="27"/><ROW ID="694" TEXTSTR="%n" LINEID="28"/><ROW ID="694" TEXTSTR="" LINEID="29"/><ROW ID="694" TEXTSTR="" LINEID="30"/><ROW ID="639" TEXTSTR="select wblist.kaid, ka.name kaname, wblist.num, wblist.ondate," LINEID="0"/><ROW ID="639" TEXTSTR="       mats.name matname, msr.shortname msrname," LINEID="1"/><ROW ID="639" TEXTSTR="       wbdet.amount," LINEID="2"/><ROW ID="639" TEXTSTR="       cast(wbdet.price as double precision) * cast(wblist.onvalue as double precision) as pricedef," LINEID="3"/><ROW ID="639" TEXTSTR="       formatfloat(cast(wbdet.amount as double precision) * cast(wbdet.price as double precision)" LINEID="4"/><ROW ID="639" TEXTSTR="           * cast(wblist.onvalue as double precision),-2) as summdef" LINEID="5"/><ROW ID="639" TEXTSTR="from waybilllist wblist, waybilldet wbdet, materials mats, kagent ka," LINEID="6"/><ROW ID="639" TEXTSTR="     measures msr" LINEID="7"/><ROW ID="639" TEXTSTR="where wblist.deleted=0" LINEID="8"/><ROW ID="639" TEXTSTR="      and wblist.wtype=:wtype" LINEID="9"/><ROW ID="639" TEXTSTR="      and wblist.checked=1" LINEID="10"/><ROW ID="639" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="11"/><ROW ID="639" TEXTSTR="      and  wblist.kaid=ka.kaid" LINEID="12"/><ROW ID="639" TEXTSTR="      and wblist.wbillid=wbdet.wbillid" LINEID="13"/><ROW ID="639" TEXTSTR="      and wbdet.matid=mats.matid" LINEID="14"/><ROW ID="639" TEXTSTR="      and mats.mid=msr.mid" LINEID="15"/><ROW ID="639" TEXTSTR="      %m" LINEID="16"/><ROW ID="639" TEXTSTR="" LINEID="17"/><ROW ID="481" TEXTSTR="delete from wmatturn" LINEID="0"/><ROW ID="481" TEXTSTR="where wmatturn.turntype=1" LINEID="1"/><ROW ID="481" TEXTSTR="  and wmatturn.sourceid in" LINEID="2"/><ROW ID="481" TEXTSTR="     (select posid from waybilldet wbd where wbd.wbillid=:wbillid)" LINEID="3"/><ROW ID="481" TEXTSTR="" LINEID="4"/><ROW ID="723" TEXTSTR="select wbd.num as num, wbd.posid as posid, cast(wbd.price as double precision) as price," LINEID="0"/><ROW ID="723" TEXTSTR="  cast(wbd.amount as double precision) as amount," LINEID="1"/><ROW ID="723" TEXTSTR="  cast(wbd.nds as double precision)as nds, m.name as matname," LINEID="2"/><ROW ID="723" TEXTSTR="  ms.shortname as msrname, cast(wbd.onvalue as double precision) as onvalue, cast(0 as integer) as postype," LINEID="3"/><ROW ID="723" TEXTSTR="  cast(1 as double precision) as norm" LINEID="4"/><ROW ID="723" TEXTSTR="" LINEID="5"/><ROW ID="723" TEXTSTR="from waybilldet wbd" LINEID="6"/><ROW ID="723" TEXTSTR=" join materials m on m.matid=wbd.matid" LINEID="7"/><ROW ID="723" TEXTSTR=" join measures ms on ms.mid=m.mid" LINEID="8"/><ROW ID="723" TEXTSTR="" LINEID="9"/><ROW ID="723" TEXTSTR="where wbd.wbillid=:wbillid" LINEID="10"/><ROW ID="723" TEXTSTR="   %m" LINEID="11"/><ROW ID="723" TEXTSTR="union all" LINEID="12"/><ROW ID="723" TEXTSTR="" LINEID="13"/><ROW ID="723" TEXTSTR="select wbs.num as num, -wbs.posid as posid, cast(wbs.price as double precision) as price," LINEID="14"/><ROW ID="723" TEXTSTR="  cast(wbs.amount as double precision) as amount," LINEID="15"/><ROW ID="723" TEXTSTR="  cast(wbs.nds as double precision) as nds, cast(s.name as varchar(255)) as matname," LINEID="16"/><ROW ID="723" TEXTSTR="  ms.shortname as msrname, cast(wbl.onvalue as double precision) as onvalue, cast(1 as integer) as postype," LINEID="17"/><ROW ID="723" TEXTSTR="  cast(wbs.norm as double precision) as norm" LINEID="18"/><ROW ID="723" TEXTSTR="from waybillsvc wbs" LINEID="19"/><ROW ID="723" TEXTSTR=" join services s on s.svcid=wbs.svcid" LINEID="20"/><ROW ID="723" TEXTSTR=" join measures ms on ms.mid=s.mid" LINEID="21"/><ROW ID="723" TEXTSTR=" join waybilllist wbl on wbl.wbillid=wbs.wbillid" LINEID="22"/><ROW ID="723" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="23"/><ROW ID="723" TEXTSTR=" %s" LINEID="24"/><ROW ID="723" TEXTSTR="order by 1" LINEID="25"/><ROW ID="723" TEXTSTR="" LINEID="26"/><ROW ID="720" TEXTSTR="select sum(cast(wbl.summall as double precision)) as summall, count(wbl.wbillid) as amount, wbl.wtype as type" LINEID="0"/><ROW ID="720" TEXTSTR="from waybilllist wbl" LINEID="1"/><ROW ID="720" TEXTSTR="where wbl.deleted=0" LINEID="2"/><ROW ID="720" TEXTSTR=" and wbl.wtype in (%wtype)" LINEID="3"/><ROW ID="720" TEXTSTR=" and wbl.checked=1" LINEID="4"/><ROW ID="720" TEXTSTR=" and wbl.ondate between :fromdate and :todate" LINEID="5"/><ROW ID="720" TEXTSTR=" and wbl.personid=:personid" LINEID="6"/><ROW ID="720" TEXTSTR="group by wbl.wtype" LINEID="7"/><ROW ID="721" TEXTSTR="select wbd.num as num, m.name as matname, ms.shortname as msrname, cast(wbd.amount as double precision) as amount," LINEID="0"/><ROW ID="721" TEXTSTR=" cast(wbd.price as double precision) as price, cast(wbd.onvalue as double precision) as onvalue," LINEID="1"/><ROW ID="721" TEXTSTR=" wbd.posid as posid, cast(wbd.nds as double precision) as nds" LINEID="2"/><ROW ID="721" TEXTSTR="" LINEID="3"/><ROW ID="721" TEXTSTR="from waybilldet wbd" LINEID="4"/><ROW ID="721" TEXTSTR="  join materials m on m.matid=wbd.matid" LINEID="5"/><ROW ID="721" TEXTSTR="  join measures ms on ms.mid=m.mid" LINEID="6"/><ROW ID="721" TEXTSTR="" LINEID="7"/><ROW ID="721" TEXTSTR="where wbd.wbillid=:wbillid" LINEID="8"/><ROW ID="721" TEXTSTR="   %m" LINEID="9"/><ROW ID="721" TEXTSTR="order by 1" LINEID="10"/><ROW ID="722" TEXTSTR="select wbl.wbillid as wbillid, wbl.num as num, wbl.ondate as ondate, cast(wbl.summall as double precision) as summall," LINEID="0"/><ROW ID="722" TEXTSTR="  ka.name as name" LINEID="1"/><ROW ID="722" TEXTSTR="" LINEID="2"/><ROW ID="722" TEXTSTR="from waybilllist wbl" LINEID="3"/><ROW ID="722" TEXTSTR=" join kagent ka on ka.kaid=wbl.kaid" LINEID="4"/><ROW ID="722" TEXTSTR="" LINEID="5"/><ROW ID="722" TEXTSTR="where wbl.deleted=0" LINEID="6"/><ROW ID="722" TEXTSTR=" and wbl.wtype=:wtype" LINEID="7"/><ROW ID="722" TEXTSTR=" and wbl.checked=1" LINEID="8"/><ROW ID="722" TEXTSTR=" and wbl.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="722" TEXTSTR=" and wbl.personid=:personid" LINEID="10"/><ROW ID="722" TEXTSTR="order by wbl.ondate" LINEID="11"/><ROW ID="722" TEXTSTR="" LINEID="12"/><ROW ID="800" TEXTSTR="select wbl.wbillid as wbillid, wbl.num as num, wbl.ondate as ondate, ka.name as name," LINEID="0"/><ROW ID="800" TEXTSTR="  cast(sum(wbd.price * wbd.amount * wbd.onvalue) as double precision) as summall" LINEID="1"/><ROW ID="800" TEXTSTR="" LINEID="2"/><ROW ID="800" TEXTSTR="from waybilldet wbd" LINEID="3"/><ROW ID="800" TEXTSTR="  join waybilllist wbl on wbd.wbillid=wbl.wbillid" LINEID="4"/><ROW ID="800" TEXTSTR="  join kagent ka on ka.kaid=wbl.kaid" LINEID="5"/><ROW ID="800" TEXTSTR="" LINEID="6"/><ROW ID="800" TEXTSTR="where wbl.wtype=:wtype" LINEID="7"/><ROW ID="800" TEXTSTR=" and wbl.checked=1" LINEID="8"/><ROW ID="800" TEXTSTR=" and wbl.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="800" TEXTSTR=" and wbl.personid=:personid" LINEID="10"/><ROW ID="800" TEXTSTR=" %m" LINEID="11"/><ROW ID="800" TEXTSTR="group by 1,2,3,4" LINEID="12"/><ROW ID="903" TEXTSTR="select wbl.wbillid as wbillid, wbl.num as num, wbl.ondate as ondate, ka.name as name," LINEID="0"/><ROW ID="903" TEXTSTR="  cast(sum(wbs.price * wbs.amount * wbl.onvalue) as double precision) as summall" LINEID="1"/><ROW ID="903" TEXTSTR="" LINEID="2"/><ROW ID="903" TEXTSTR="from waybillsvc wbs" LINEID="3"/><ROW ID="903" TEXTSTR="  join waybilllist wbl on wbs.wbillid=wbl.wbillid" LINEID="4"/><ROW ID="903" TEXTSTR="  join kagent ka on ka.kaid=wbl.kaid" LINEID="5"/><ROW ID="903" TEXTSTR="" LINEID="6"/><ROW ID="903" TEXTSTR="where wbl.wtype=:wtype" LINEID="7"/><ROW ID="903" TEXTSTR=" and wbl.checked=1" LINEID="8"/><ROW ID="903" TEXTSTR=" and wbl.ondate between :fromdate and :todate" LINEID="9"/><ROW ID="903" TEXTSTR=" and wbl.personid=:personid" LINEID="10"/><ROW ID="903" TEXTSTR=" %m" LINEID="11"/><ROW ID="903" TEXTSTR="group by 1,2,3,4" LINEID="12"/><ROW ID="11" TEXTSTR="select f.funid, f.classname, f.flags, ua.canview," LINEID="0"/><ROW ID="11" TEXTSTR="  ua.caninsert, ua.canmodify, ua.candelete, ua.canpost," LINEID="1"/><ROW ID="11" TEXTSTR="  t.tabid, t.keyname, t.tablename" LINEID="2"/><ROW ID="11" TEXTSTR=" from functions f, useraccess ua, tables t" LINEID="3"/><ROW ID="11" TEXTSTR=" where ua.userid=:userid" LINEID="4"/><ROW ID="11" TEXTSTR="  and t.tabid=f.tabid" LINEID="5"/><ROW ID="11" TEXTSTR="  and ua.funid=f.funid" LINEID="6"/><ROW ID="11" TEXTSTR="" LINEID="7"/><ROW ID="646" TEXTSTR="select %f wmt.matid, -mats.grpid as grpid, mats.name as matname," LINEID="0"/><ROW ID="646" TEXTSTR="       msr.shortname as msrname, mats.deleted as del, mats.artikul," LINEID="1"/><ROW ID="646" TEXTSTR="       mats.producer, mr.remain - mr.rsv as remain," LINEID="2"/><ROW ID="646" TEXTSTR="       sum(wmt.amount) as amountout," LINEID="3"/><ROW ID="646" TEXTSTR="" LINEID="4"/><ROW ID="646" TEXTSTR="       sum(formatfloat(cast(wbd.price as double precision) * cast(wbd.onvalue as double precision)" LINEID="5"/><ROW ID="646" TEXTSTR="       * cast(wmt.amount as double precision), -2)) as summin," LINEID="6"/><ROW ID="646" TEXTSTR="" LINEID="7"/><ROW ID="646" TEXTSTR="       sum(((cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)" LINEID="8"/><ROW ID="646" TEXTSTR="       * cast(wmt.amount as double precision)) / (100 + wbd.nds)) * cast(wbd.nds as double precision)) as ndsin," LINEID="9"/><ROW ID="646" TEXTSTR="" LINEID="10"/><ROW ID="646" TEXTSTR="       sum(formatfloat(cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)" LINEID="11"/><ROW ID="646" TEXTSTR="       * cast(wmt.amount as double precision), -2)) as summout," LINEID="12"/><ROW ID="646" TEXTSTR="" LINEID="13"/><ROW ID="646" TEXTSTR="       sum(((cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)" LINEID="14"/><ROW ID="646" TEXTSTR="       * cast(wmt.amount as double precision)) / (100+wbds.nds)) * cast(wbds.nds as double precision)) as ndsout," LINEID="15"/><ROW ID="646" TEXTSTR="" LINEID="16"/><ROW ID="646" TEXTSTR="       sum(((cast(wbds.price as double precision)*cast(wbds.onvalue as double precision)*cast(wmt.amount as double precision))" LINEID="17"/><ROW ID="646" TEXTSTR="           / (100+wbds.nds)) * cast(wbds.nds as double precision)" LINEID="18"/><ROW ID="646" TEXTSTR="           - ((cast(wbd.price as double precision)*cast(wbd.onvalue as double precision)*cast(wmt.amount as double precision))" LINEID="19"/><ROW ID="646" TEXTSTR="           / (100+wbd.nds))*cast(wbd.nds as double precision)) as ndsdif," LINEID="20"/><ROW ID="646" TEXTSTR="" LINEID="21"/><ROW ID="646" TEXTSTR="       cast(" LINEID="22"/><ROW ID="646" TEXTSTR="         sum(formatfloat(cast(wbds.price * wbds.onvalue * cast(wmt.amount as double precision) as double precision), -2)" LINEID="23"/><ROW ID="646" TEXTSTR="             - formatfloat(cast(wbd.price * wbd.onvalue * cast(wmt.amount as double precision) as double precision), -2))" LINEID="24"/><ROW ID="646" TEXTSTR="       as double precision) as prib," LINEID="25"/><ROW ID="646" TEXTSTR="" LINEID="26"/><ROW ID="646" TEXTSTR="       cast(" LINEID="27"/><ROW ID="646" TEXTSTR="         sum(wbds.price * wbds.onvalue * cast(wmt.amount as double precision)" LINEID="28"/><ROW ID="646" TEXTSTR="             - wbd.price * wbd.onvalue * cast(wmt.amount as double precision) )" LINEID="29"/><ROW ID="646" TEXTSTR="         / sum(wbd.price * wbd.onvalue * cast(wmt.amount as double precision) + 0.0000000000000000000000000000000000000001)" LINEID="30"/><ROW ID="646" TEXTSTR="         * 100.0" LINEID="31"/><ROW ID="646" TEXTSTR="       as double precision) as koef" LINEID="32"/><ROW ID="646" TEXTSTR="" LINEID="33"/><ROW ID="646" TEXTSTR="from wmatturn wmt," LINEID="34"/><ROW ID="646" TEXTSTR="     materials mats, measures msr, waybilldet wbd," LINEID="35"/><ROW ID="646" TEXTSTR="     currency curr, waybilldet wbds, waybilllist wbls," LINEID="36"/><ROW ID="646" TEXTSTR="     currency currs, matremains mr" LINEID="37"/><ROW ID="646" TEXTSTR="where wmt.turntype=-1" LINEID="38"/><ROW ID="646" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="39"/><ROW ID="646" TEXTSTR="      and mats.matid=wmt.matid" LINEID="40"/><ROW ID="646" TEXTSTR="      and msr.mid=mats.mid" LINEID="41"/><ROW ID="646" TEXTSTR="      and wbd.posid=wmt.posid" LINEID="42"/><ROW ID="646" TEXTSTR="      and curr.currid=wbd.currid" LINEID="43"/><ROW ID="646" TEXTSTR="      and wbds.posid=wmt.sourceid" LINEID="44"/><ROW ID="646" TEXTSTR="      and currs.currid=wbds.currid" LINEID="45"/><ROW ID="646" TEXTSTR="      and wbls.wbillid=wbds.wbillid" LINEID="46"/><ROW ID="646" TEXTSTR="      and wbls.wtype=-1" LINEID="47"/><ROW ID="646" TEXTSTR="      and mats.matid=mr.matid" LINEID="48"/><ROW ID="646" TEXTSTR="      and mr.ondate=(select max(ondate) from matremains where mr.matid=matid and ondate&lt;=:todate)" LINEID="49"/><ROW ID="646" TEXTSTR="      %m" LINEID="50"/><ROW ID="646" TEXTSTR="group by 1,2,3,4,5,6,7,8" LINEID="51"/><ROW ID="646" TEXTSTR=" %n" LINEID="52"/><ROW ID="646" TEXTSTR="" LINEID="53"/><ROW ID="647" TEXTSTR="select %f wmt.matid, cast(-mats.grpid as integer) as grpid, mats.name as matname," LINEID="0"/><ROW ID="647" TEXTSTR="  msr.shortname as msrname, mats.deleted as del," LINEID="1"/><ROW ID="647" TEXTSTR="  mats.artikul, mats.producer," LINEID="2"/><ROW ID="647" TEXTSTR="  cast(sum(wmt.amount) as double precision) as amountout," LINEID="3"/><ROW ID="647" TEXTSTR="" LINEID="4"/><ROW ID="647" TEXTSTR="  sum(" LINEID="5"/><ROW ID="647" TEXTSTR="    cast(" LINEID="6"/><ROW ID="647" TEXTSTR="      formatfloat(wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision), -2)" LINEID="7"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="8"/><ROW ID="647" TEXTSTR="  ) as summin," LINEID="9"/><ROW ID="647" TEXTSTR="" LINEID="10"/><ROW ID="647" TEXTSTR="  sum(" LINEID="11"/><ROW ID="647" TEXTSTR="    cast(" LINEID="12"/><ROW ID="647" TEXTSTR="      wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision) * wbd.nds / (100.0 + wbd.nds)" LINEID="13"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="14"/><ROW ID="647" TEXTSTR="  ) as ndsin," LINEID="15"/><ROW ID="647" TEXTSTR="" LINEID="16"/><ROW ID="647" TEXTSTR="  sum(" LINEID="17"/><ROW ID="647" TEXTSTR="    cast(" LINEID="18"/><ROW ID="647" TEXTSTR="      formatfloat(wbds.price * cast(wbds.onvalue as double precision) * cast(wmt.amount as double precision), -2)" LINEID="19"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="20"/><ROW ID="647" TEXTSTR="  ) as summout," LINEID="21"/><ROW ID="647" TEXTSTR="" LINEID="22"/><ROW ID="647" TEXTSTR="  sum(" LINEID="23"/><ROW ID="647" TEXTSTR="    cast(" LINEID="24"/><ROW ID="647" TEXTSTR="      wbds.price * cast(wbds.onvalue as double precision) * cast(wmt.amount as double precision) * wbds.nds" LINEID="25"/><ROW ID="647" TEXTSTR="      / (100.0 + wbds.nds)" LINEID="26"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="27"/><ROW ID="647" TEXTSTR="  ) as ndsout," LINEID="28"/><ROW ID="647" TEXTSTR="" LINEID="29"/><ROW ID="647" TEXTSTR="  sum(" LINEID="30"/><ROW ID="647" TEXTSTR="    cast(" LINEID="31"/><ROW ID="647" TEXTSTR="      (wbds.price * cast(wbds.onvalue as double precision) * cast(wmt.amount as double precision) * wbds.nds)" LINEID="32"/><ROW ID="647" TEXTSTR="      / (100.0 + wbds.nds)" LINEID="33"/><ROW ID="647" TEXTSTR="      - (wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision) * wbd.nds)" LINEID="34"/><ROW ID="647" TEXTSTR="      / (100.0 + wbd.nds)" LINEID="35"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="36"/><ROW ID="647" TEXTSTR="  ) as ndsdif," LINEID="37"/><ROW ID="647" TEXTSTR="" LINEID="38"/><ROW ID="647" TEXTSTR="  sum(" LINEID="39"/><ROW ID="647" TEXTSTR="    cast(" LINEID="40"/><ROW ID="647" TEXTSTR="      wbds.price * cast(wbds.onvalue as double precision) * cast(wmt.amount as double precision)" LINEID="41"/><ROW ID="647" TEXTSTR="      - wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision)" LINEID="42"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="43"/><ROW ID="647" TEXTSTR="  ) as prib," LINEID="44"/><ROW ID="647" TEXTSTR="" LINEID="45"/><ROW ID="647" TEXTSTR="  case when sum(wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision)) &gt; 0.0 then" LINEID="46"/><ROW ID="647" TEXTSTR="    cast(" LINEID="47"/><ROW ID="647" TEXTSTR="      sum(" LINEID="48"/><ROW ID="647" TEXTSTR="        wbds.price * cast(wbds.onvalue as double precision) * cast(wmt.amount as double precision)" LINEID="49"/><ROW ID="647" TEXTSTR="        - wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision)" LINEID="50"/><ROW ID="647" TEXTSTR="      )" LINEID="51"/><ROW ID="647" TEXTSTR="      / sum(wbd.price * cast(wbd.onvalue as double precision) * cast(wmt.amount as double precision)) * 100" LINEID="52"/><ROW ID="647" TEXTSTR="    as double precision)" LINEID="53"/><ROW ID="647" TEXTSTR="" LINEID="54"/><ROW ID="647" TEXTSTR="    else cast(0.0 as double precision)" LINEID="55"/><ROW ID="647" TEXTSTR="  end as koef" LINEID="56"/><ROW ID="647" TEXTSTR="" LINEID="57"/><ROW ID="647" TEXTSTR="from wmatturn wmt," LINEID="58"/><ROW ID="647" TEXTSTR="     materials mats, measures msr," LINEID="59"/><ROW ID="647" TEXTSTR="     waybilldet wbd, waybilldet wbds," LINEID="60"/><ROW ID="647" TEXTSTR="     currency curr, waybilllist wbls," LINEID="61"/><ROW ID="647" TEXTSTR="     currency currs" LINEID="62"/><ROW ID="647" TEXTSTR="where wmt.turntype=-1" LINEID="63"/><ROW ID="647" TEXTSTR="      and wmt.ondate between :fromdate and :todate" LINEID="64"/><ROW ID="647" TEXTSTR="      and mats.matid=wmt.matid" LINEID="65"/><ROW ID="647" TEXTSTR="      and msr.mid=mats.mid" LINEID="66"/><ROW ID="647" TEXTSTR="      and wbd.posid=wmt.posid" LINEID="67"/><ROW ID="647" TEXTSTR="      and curr.currid=wbd.currid" LINEID="68"/><ROW ID="647" TEXTSTR="      and wbds.posid=wmt.sourceid" LINEID="69"/><ROW ID="647" TEXTSTR="      and currs.currid=wbds.currid" LINEID="70"/><ROW ID="647" TEXTSTR="      and wbls.wbillid=wbds.wbillid" LINEID="71"/><ROW ID="647" TEXTSTR="      and wbls.wtype=-1" LINEID="72"/><ROW ID="647" TEXTSTR="      %m" LINEID="73"/><ROW ID="647" TEXTSTR="group by 1,2,3,4,5,6,7" LINEID="74"/><ROW ID="647" TEXTSTR=" %n" LINEID="75"/><ROW ID="647" TEXTSTR="" LINEID="76"/><ROW ID="647" TEXTSTR="union all" LINEID="77"/><ROW ID="647" TEXTSTR="" LINEID="78"/><ROW ID="647" TEXTSTR="select cast(-mg.grpid as integer) as matid," LINEID="79"/><ROW ID="647" TEXTSTR="cast(-mg.pid as integer) as grpid," LINEID="80"/><ROW ID="647" TEXTSTR="CAST(mg.name as varchar(255)) as matname," LINEID="81"/><ROW ID="647" TEXTSTR="CAST(null as varchar(6)) as msrname," LINEID="82"/><ROW ID="647" TEXTSTR="CAST(1 as integer) as del," LINEID="83"/><ROW ID="647" TEXTSTR="cast(&apos;&apos; as varchar(255)) as artikul," LINEID="84"/><ROW ID="647" TEXTSTR="cast(&apos;&apos; as varchar(255)) as producer," LINEID="85"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as amountout," LINEID="86"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as summin," LINEID="87"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as ndsin," LINEID="88"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as summout," LINEID="89"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as ndsout," LINEID="90"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as ndsdif," LINEID="91"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as prib," LINEID="92"/><ROW ID="647" TEXTSTR="CAST(null as double precision) as koef" LINEID="93"/><ROW ID="647" TEXTSTR="from matgroup mg" LINEID="94"/><ROW ID="647" TEXTSTR="where deleted=0" LINEID="95"/><ROW ID="655" TEXTSTR="select mats.matid, -mats.grpid as grpid, mats.name as matname, msr.shortname as msrname," LINEID="0"/><ROW ID="655" TEXTSTR="       cast(mats.minreserv as double precision) as minreserv," LINEID="1"/><ROW ID="655" TEXTSTR="       cast(mr.remain - mr.rsv as double precision) as accessible," LINEID="2"/><ROW ID="655" TEXTSTR="       cast(mats.minreserv - (mr.remain - mr.rsv) as double precision) as necessary," LINEID="3"/><ROW ID="655" TEXTSTR="       mats.deleted as del, mats.artikul, mats.producer" LINEID="4"/><ROW ID="655" TEXTSTR="from matremains mr, materials mats, measures msr" LINEID="5"/><ROW ID="655" TEXTSTR="where mr.ondate=(select max(ondate) from matremains where matremains.matid=mr.matid and ondate&lt;=:ondate)" LINEID="6"/><ROW ID="655" TEXTSTR="      and mats.matid = mr.matid" LINEID="7"/><ROW ID="655" TEXTSTR="      and mats.minreserv &gt; mr.remain-mr.rsv" LINEID="8"/><ROW ID="655" TEXTSTR="      and msr.mid = mats.mid" LINEID="9"/><ROW ID="655" TEXTSTR="      %m" LINEID="10"/><ROW ID="655" TEXTSTR="union all" LINEID="11"/><ROW ID="655" TEXTSTR="" LINEID="12"/><ROW ID="655" TEXTSTR="select mats.matid, -mats.grpid as grpid, mats.name as matname, msr.shortname as msrname," LINEID="13"/><ROW ID="655" TEXTSTR="       cast(mats.minreserv as double precision) as minreserv," LINEID="14"/><ROW ID="655" TEXTSTR="       CAST(0 as double precision) as accessible," LINEID="15"/><ROW ID="655" TEXTSTR="       cast(mats.minreserv as double precision) as  necessary," LINEID="16"/><ROW ID="655" TEXTSTR="       mats.deleted as del, mats.artikul, mats.producer" LINEID="17"/><ROW ID="655" TEXTSTR="from materials mats, measures msr" LINEID="18"/><ROW ID="655" TEXTSTR="where mats.matid not in (select matremains.matid from matremains)" LINEID="19"/><ROW ID="655" TEXTSTR="      and msr.mid = mats.mid and mats.minreserv &gt; 0" LINEID="20"/><ROW ID="655" TEXTSTR="      %m" LINEID="21"/><ROW ID="655" TEXTSTR="order by 3" LINEID="22"/><ROW ID="823" TEXTSTR="select mats.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="823" TEXTSTR="  -1*abs(d.doctype)/d.doctype*cast(wbdet.amount as double precision) as amount, wbdet.price, wbdet.onvalue," LINEID="1"/><ROW ID="823" TEXTSTR="  cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision) pricedef," LINEID="2"/><ROW ID="823" TEXTSTR="  -1*abs(d.doctype)/d.doctype*formatfloat(cast(wbdet.amount as double precision)*cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision),-2) possumm," LINEID="3"/><ROW ID="823" TEXTSTR="       wbdet.num," LINEID="4"/><ROW ID="823" TEXTSTR="       case" LINEID="5"/><ROW ID="823" TEXTSTR="         when d.doctype=-1 then" LINEID="6"/><ROW ID="823" TEXTSTR="           coalesce(" LINEID="7"/><ROW ID="823" TEXTSTR="            (select sum(formatfloat(cast(wbdin.price as double precision)*cast(wmt.amount as double precision)*cast(wbdin.onvalue as double precision),-2))" LINEID="8"/><ROW ID="823" TEXTSTR="            from wmatturn wmt, waybilldet wbdin" LINEID="9"/><ROW ID="823" TEXTSTR="            where wmt.sourceid=wbdet.posid" LINEID="10"/><ROW ID="823" TEXTSTR="                  and wbdin.posid=wmt.posid" LINEID="11"/><ROW ID="823" TEXTSTR="            ),0)" LINEID="12"/><ROW ID="823" TEXTSTR="          else" LINEID="13"/><ROW ID="823" TEXTSTR="            case when d.doctype=6 then" LINEID="14"/><ROW ID="823" TEXTSTR="              coalesce(" LINEID="15"/><ROW ID="823" TEXTSTR="                -1*(select sum(formatfloat(cast(wbdin.price as double precision)*cast(wbdet.amount as double precision)*cast(wbdin.onvalue as double precision),-2))" LINEID="16"/><ROW ID="823" TEXTSTR="                from returnrel rr, waybilldet wbdin" LINEID="17"/><ROW ID="823" TEXTSTR="                where rr.posid=wbdet.posid" LINEID="18"/><ROW ID="823" TEXTSTR="                  and wbdin.posid=rr.pposid" LINEID="19"/><ROW ID="823" TEXTSTR="              ),0)" LINEID="20"/><ROW ID="823" TEXTSTR="            else null" LINEID="21"/><ROW ID="823" TEXTSTR="            end" LINEID="22"/><ROW ID="823" TEXTSTR="       end as summin, 0 as mattype" LINEID="23"/><ROW ID="823" TEXTSTR="from waybilldet wbdet, materials mats, measures msr, waybilllist wblist," LINEID="24"/><ROW ID="823" TEXTSTR="     docs d" LINEID="25"/><ROW ID="823" TEXTSTR="where wbdet.wbillid=:wbillid" LINEID="26"/><ROW ID="823" TEXTSTR="  and wbdet.matid=mats.matid" LINEID="27"/><ROW ID="823" TEXTSTR="  and mats.mid=msr.mid" LINEID="28"/><ROW ID="823" TEXTSTR="  and wbdet.wbillid=wblist.wbillid" LINEID="29"/><ROW ID="823" TEXTSTR="  and wbdet.posid not in (select rr.dposid from returnrel rr where rr.dposid=wbdet.posid)" LINEID="30"/><ROW ID="823" TEXTSTR="  and d.docid=wblist.docid" LINEID="31"/><ROW ID="823" TEXTSTR="  %m" LINEID="32"/><ROW ID="823" TEXTSTR="" LINEID="33"/><ROW ID="823" TEXTSTR="union all" LINEID="34"/><ROW ID="823" TEXTSTR="" LINEID="35"/><ROW ID="823" TEXTSTR="select cast(s.name as varchar(255)), ms.shortname," LINEID="36"/><ROW ID="823" TEXTSTR="  case" LINEID="37"/><ROW ID="823" TEXTSTR="    when s.isnormed = 1" LINEID="38"/><ROW ID="823" TEXTSTR="     then cast(wbs.amount as double precision)*cast(wbs.norm as double precision)" LINEID="39"/><ROW ID="823" TEXTSTR="     else wbs.amount" LINEID="40"/><ROW ID="823" TEXTSTR="  end," LINEID="41"/><ROW ID="823" TEXTSTR="  wbs.price, wbl.onvalue, cast(wbs.price as double precision)*cast(wbl.onvalue as double precision) as pricedef," LINEID="42"/><ROW ID="823" TEXTSTR="  formatfloat(cast(wbs.amount as double precision)*cast(wbs.price as double precision)*cast(wbl.onvalue as double precision), -2) as possumm," LINEID="43"/><ROW ID="823" TEXTSTR="  wbs.num," LINEID="44"/><ROW ID="823" TEXTSTR="  CAST(0 as DOUBLE PRECISION) as summin, 1 as mattype" LINEID="45"/><ROW ID="823" TEXTSTR="from waybillsvc wbs, services s, measures ms, waybilllist wbl," LINEID="46"/><ROW ID="823" TEXTSTR="  currency c" LINEID="47"/><ROW ID="823" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="48"/><ROW ID="823" TEXTSTR="  and s.svcid=wbs.svcid" LINEID="49"/><ROW ID="823" TEXTSTR="  and ms.mid=s.mid" LINEID="50"/><ROW ID="823" TEXTSTR="  and wbl.wbillid=wbs.wbillid" LINEID="51"/><ROW ID="823" TEXTSTR="  and c.currid=wbs.currid" LINEID="52"/><ROW ID="823" TEXTSTR="  %s" LINEID="53"/><ROW ID="823" TEXTSTR="order by 8" LINEID="54"/><ROW ID="827" TEXTSTR="select mats.name matname, msr.shortname msrname," LINEID="0"/><ROW ID="827" TEXTSTR="  abs(d.doctype)/d.doctype*cast(wbdet.amount as double precision) as amount, wbdet.price, wbdet.onvalue," LINEID="1"/><ROW ID="827" TEXTSTR="  cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision) pricedef," LINEID="2"/><ROW ID="827" TEXTSTR="  abs(d.doctype)/d.doctype*formatfloat(cast(wbdet.amount as double precision)*cast(wbdet.price as double precision)" LINEID="3"/><ROW ID="827" TEXTSTR="    *cast(wbdet.onvalue as double precision),-2) possumm," LINEID="4"/><ROW ID="827" TEXTSTR="  wbdet.num" LINEID="5"/><ROW ID="827" TEXTSTR="from waybilldet wbdet, materials mats, measures msr, waybilllist wblist," LINEID="6"/><ROW ID="827" TEXTSTR="     docs d" LINEID="7"/><ROW ID="827" TEXTSTR="where wbdet.wbillid=:wbillid" LINEID="8"/><ROW ID="827" TEXTSTR="  and wbdet.matid=mats.matid" LINEID="9"/><ROW ID="827" TEXTSTR="  and mats.mid=msr.mid" LINEID="10"/><ROW ID="827" TEXTSTR="  and wbdet.wbillid=wblist.wbillid" LINEID="11"/><ROW ID="827" TEXTSTR="  and wbdet.posid not in (select rr.dposid from returnrel rr where rr.dposid=wbdet.posid)" LINEID="12"/><ROW ID="827" TEXTSTR="  and d.docid=wblist.docid" LINEID="13"/><ROW ID="827" TEXTSTR="  %m" LINEID="14"/><ROW ID="827" TEXTSTR="union all" LINEID="15"/><ROW ID="827" TEXTSTR="" LINEID="16"/><ROW ID="827" TEXTSTR="select cast(s.name as varchar(255)), ms.shortname," LINEID="17"/><ROW ID="827" TEXTSTR=" case" LINEID="18"/><ROW ID="827" TEXTSTR="  when s.isnormed = 1" LINEID="19"/><ROW ID="827" TEXTSTR="   then cast(wbs.amount as double precision) * cast(wbs.norm as double precision)" LINEID="20"/><ROW ID="827" TEXTSTR="   else cast(wbs.amount as double precision)" LINEID="21"/><ROW ID="827" TEXTSTR=" end," LINEID="22"/><ROW ID="827" TEXTSTR="  wbs.price, wbl.onvalue," LINEID="23"/><ROW ID="827" TEXTSTR="  cast(wbs.price as double precision)*cast(wbl.onvalue as double precision) as pricedef," LINEID="24"/><ROW ID="827" TEXTSTR="  formatfloat(cast(wbs.amount as double precision)*cast(wbs.price as double precision)" LINEID="25"/><ROW ID="827" TEXTSTR="    * cast(wbl.onvalue as double precision), -2) as possumm," LINEID="26"/><ROW ID="827" TEXTSTR="  wbs.num" LINEID="27"/><ROW ID="827" TEXTSTR="from waybillsvc wbs, services s, measures ms, waybilllist wbl," LINEID="28"/><ROW ID="827" TEXTSTR="  currency c" LINEID="29"/><ROW ID="827" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="30"/><ROW ID="827" TEXTSTR="  and s.svcid=wbs.svcid" LINEID="31"/><ROW ID="827" TEXTSTR="  and ms.mid=s.mid" LINEID="32"/><ROW ID="827" TEXTSTR="  and wbl.wbillid=wbs.wbillid" LINEID="33"/><ROW ID="827" TEXTSTR="  and c.currid=wbs.currid" LINEID="34"/><ROW ID="827" TEXTSTR="  %s" LINEID="35"/><ROW ID="827" TEXTSTR="order by 8" LINEID="36"/><ROW ID="642" TEXTSTR="select mats.name matname, msr.shortname msrname, wbdet.amount, wbdet.price, wbdet.onvalue," LINEID="0"/><ROW ID="642" TEXTSTR="  cast(wbdet.price as double precision)*cast(wbdet.onvalue as double precision) pricedef," LINEID="1"/><ROW ID="642" TEXTSTR="  formatfloat(cast(wbdet.amount as double precision)*cast(wbdet.price as double precision)" LINEID="2"/><ROW ID="642" TEXTSTR="    * cast(wbdet.onvalue as double precision),-2) possumm" LINEID="3"/><ROW ID="642" TEXTSTR="from waybilldet wbdet, materials mats, measures msr, waybilllist wblist" LINEID="4"/><ROW ID="642" TEXTSTR="where wbdet.wbillid=:wbillid" LINEID="5"/><ROW ID="642" TEXTSTR="  and wbdet.matid=mats.matid" LINEID="6"/><ROW ID="642" TEXTSTR="  and mats.mid=msr.mid" LINEID="7"/><ROW ID="642" TEXTSTR="  and wbdet.wbillid=wblist.wbillid" LINEID="8"/><ROW ID="642" TEXTSTR="  and wbdet.posid not in (select rr.dposid from returnrel rr where rr.dposid=wbdet.posid)" LINEID="9"/><ROW ID="642" TEXTSTR="" LINEID="10"/><ROW ID="642" TEXTSTR="union all" LINEID="11"/><ROW ID="642" TEXTSTR="" LINEID="12"/><ROW ID="642" TEXTSTR="select cast(s.name as varchar(255)), ms.shortname," LINEID="13"/><ROW ID="642" TEXTSTR=" case" LINEID="14"/><ROW ID="642" TEXTSTR="  when s.isnormed = 1" LINEID="15"/><ROW ID="642" TEXTSTR="   then cast(cast(wbs.amount as double precision)*cast(wbs.norm as double precision) as numeric(15,8))" LINEID="16"/><ROW ID="642" TEXTSTR="   else wbs.amount" LINEID="17"/><ROW ID="642" TEXTSTR=" end," LINEID="18"/><ROW ID="642" TEXTSTR="  wbs.price, wbl.onvalue," LINEID="19"/><ROW ID="642" TEXTSTR="  cast(wbs.price as double precision)*cast(wbl.onvalue as double precision) as pricedef," LINEID="20"/><ROW ID="642" TEXTSTR="  formatfloat(cast(wbs.amount as double precision)*cast(wbs.price as double precision)" LINEID="21"/><ROW ID="642" TEXTSTR="    *cast(wbl.onvalue as double precision), -2) as possumm" LINEID="22"/><ROW ID="642" TEXTSTR="from waybillsvc wbs, services s, measures ms, waybilllist wbl," LINEID="23"/><ROW ID="642" TEXTSTR="  currency c" LINEID="24"/><ROW ID="642" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="25"/><ROW ID="642" TEXTSTR="  and s.svcid=wbs.svcid" LINEID="26"/><ROW ID="642" TEXTSTR="  and ms.mid=s.mid" LINEID="27"/><ROW ID="642" TEXTSTR="  and wbl.wbillid=wbs.wbillid" LINEID="28"/><ROW ID="642" TEXTSTR="  and c.currid=wbs.currid" LINEID="29"/><ROW ID="695" TEXTSTR="select svc.svcid, svc.pid, svc.artikul, svc.name, msr.shortname as msrname," LINEID="0"/><ROW ID="695" TEXTSTR="       svc.price, svc.currid, cur.shortname as currname," LINEID="1"/><ROW ID="695" TEXTSTR="       (svc.isgrp+2)as isgrp" LINEID="2"/><ROW ID="695" TEXTSTR="from services svc, measures msr, currency cur" LINEID="3"/><ROW ID="695" TEXTSTR="where  msr.mid=svc.mid" LINEID="4"/><ROW ID="695" TEXTSTR="       and svc.deleted=0" LINEID="5"/><ROW ID="695" TEXTSTR="       and cur.currid=svc.currid" LINEID="6"/><ROW ID="695" TEXTSTR="       and svc.isgrp=0" LINEID="7"/><ROW ID="695" TEXTSTR="" LINEID="8"/><ROW ID="695" TEXTSTR="union all" LINEID="9"/><ROW ID="695" TEXTSTR="" LINEID="10"/><ROW ID="695" TEXTSTR="select svc.svcid, svc.pid, svc.artikul, svc.name," LINEID="11"/><ROW ID="695" TEXTSTR="       CAST(null as varchar(6)) as msrname," LINEID="12"/><ROW ID="695" TEXTSTR="       svc.price, svc.currid, CAST(null as varchar(3)) as currname," LINEID="13"/><ROW ID="695" TEXTSTR="       (svc.isgrp+2)as isgrp" LINEID="14"/><ROW ID="695" TEXTSTR="from services svc" LINEID="15"/><ROW ID="695" TEXTSTR="where  svc.deleted=0" LINEID="16"/><ROW ID="695" TEXTSTR="       and svc.isgrp=1" LINEID="17"/><ROW ID="10" TEXTSTR="select f.funid, f.classname, f.flags, 1 as canview, t.tabid," LINEID="0"/><ROW ID="10" TEXTSTR="       1 as caninsert, 1 as canmodify, 1 as candelete, 1 as canpost," LINEID="1"/><ROW ID="10" TEXTSTR="       t.tablename, t.keyname" LINEID="2"/><ROW ID="10" TEXTSTR="from functions f, tables t" LINEID="3"/><ROW ID="10" TEXTSTR="where f.tabid=t.tabid" LINEID="4"/><ROW ID="104" TEXTSTR="select m.*, 1 as mtype, ms.shortname, c.name as cname," LINEID="0"/><ROW ID="104" TEXTSTR="       m.name as prices, 0.0 as avgprice" LINEID="1"/><ROW ID="104" TEXTSTR=" from materials m" LINEID="2"/><ROW ID="104" TEXTSTR="  join measures ms on m.mid=ms.mid" LINEID="3"/><ROW ID="104" TEXTSTR="  left outer join countries c on c.cid=m.cid" LINEID="4"/><ROW ID="104" TEXTSTR=" where m.deleted=0" LINEID="5"/><ROW ID="104" TEXTSTR="  %grp" LINEID="6"/><ROW ID="104" TEXTSTR=" order by m.num" LINEID="7"/><ROW ID="507" TEXTSTR="Select RDB$RELATION_NAME from RDB$RELATIONS where RDB$RELATION_NAME = :TableName" LINEID="0"/><ROW ID="1056" TEXTSTR="select cast(2 as integer) as id,0 as type,(select name from viewlng where id=6 and langid=:langid) as name," LINEID="0"/><ROW ID="1056" TEXTSTR="       &apos;&apos; as model, cast(0 as integer) as pid, &apos;&apos; as msrname" LINEID="1"/><ROW ID="1056" TEXTSTR="       from commonparams" LINEID="2"/><ROW ID="1056" TEXTSTR="" LINEID="3"/><ROW ID="1056" TEXTSTR="union all" LINEID="4"/><ROW ID="1056" TEXTSTR="" LINEID="5"/><ROW ID="1056" TEXTSTR="select cast(g.grpid+1000000 as integer) as id,8 as type,g.name as name,&apos;&apos; as model," LINEID="6"/><ROW ID="1056" TEXTSTR="cast(" LINEID="7"/><ROW ID="1056" TEXTSTR="  case" LINEID="8"/><ROW ID="1056" TEXTSTR="    when g.pid=g.grpid then 2" LINEID="9"/><ROW ID="1056" TEXTSTR="    else g.grpid+1000000" LINEID="10"/><ROW ID="1056" TEXTSTR="  end as integer) as pid, &apos;&apos; as msrname" LINEID="11"/><ROW ID="1056" TEXTSTR="from matgroup g" LINEID="12"/><ROW ID="1056" TEXTSTR="" LINEID="13"/><ROW ID="1056" TEXTSTR="union all" LINEID="14"/><ROW ID="1056" TEXTSTR="" LINEID="15"/><ROW ID="1056" TEXTSTR="select cast(m.matid+10000000 as integer) as id,14 as type,m.name as name,m.artikul as model," LINEID="16"/><ROW ID="1056" TEXTSTR="       cast(m.grpid+1000000 as integer) as pid," LINEID="17"/><ROW ID="1056" TEXTSTR="       shortname as msrname" LINEID="18"/><ROW ID="1056" TEXTSTR="from materials m" LINEID="19"/><ROW ID="1056" TEXTSTR="left join measures msr on msr.mid = m.mid" LINEID="20"/><ROW ID="1056" TEXTSTR="where m.deleted=0 and m.archived=0" LINEID="21"/><ROW ID="1056" TEXTSTR="" LINEID="22"/><ROW ID="1056" TEXTSTR="union all" LINEID="23"/><ROW ID="1056" TEXTSTR="" LINEID="24"/><ROW ID="1056" TEXTSTR="select cast(1 as integer) as id, 0 as type,(select name from viewlng where id=51 and langid=:langid) as name," LINEID="25"/><ROW ID="1056" TEXTSTR="       &apos;&apos; as model, cast(0 as integer) as pid, &apos;&apos; as msrname" LINEID="26"/><ROW ID="1056" TEXTSTR="       from commonparams" LINEID="27"/><ROW ID="1056" TEXTSTR="" LINEID="28"/><ROW ID="1056" TEXTSTR="union all" LINEID="29"/><ROW ID="1056" TEXTSTR="" LINEID="30"/><ROW ID="1056" TEXTSTR="select cast(s.svcid+100000000 as integer) as id,15 as type,s.name as name,s.artikul as model," LINEID="31"/><ROW ID="1056" TEXTSTR="       cast(1 as integer) as pid," LINEID="32"/><ROW ID="1056" TEXTSTR="       msr.shortname as msrname" LINEID="33"/><ROW ID="1056" TEXTSTR="from services s" LINEID="34"/><ROW ID="1056" TEXTSTR="left join measures msr on msr.mid = s.mid" LINEID="35"/><ROW ID="1056" TEXTSTR="where s.deleted=0" LINEID="36"/><ROW ID="1056" TEXTSTR="order by 2,3" LINEID="37"/><ROW ID="1056" TEXTSTR=";" LINEID="38"/><ROW ID="1060" TEXTSTR="delete from bundles where bundleid=:bundleid" LINEID="0"/><ROW ID="1059" TEXTSTR="insert into bundles (bundleid,itemType,itemID,quantity,pos)" LINEID="0"/><ROW ID="1059" TEXTSTR="  values (:bundleid,:itemtype,:itemid,:quantity,:pos)" LINEID="1"/><ROW ID="1061" TEXTSTR="select matid as id, 0 as pid, typeid as type, name, artikul as model, serials as bysn" LINEID="0"/><ROW ID="1061" TEXTSTR="  from materials where typeid=1 and archived=0 and deleted=0" LINEID="1"/><ROW ID="1057" TEXTSTR="select b.pos, b.bundleid, b.itemtype, b.itemid, b.quantity," LINEID="0"/><ROW ID="1057" TEXTSTR="  m.name as name, m.artikul as model, msr.shortname as msrname, m.serials as bysn" LINEID="1"/><ROW ID="1057" TEXTSTR="  from bundles b" LINEID="2"/><ROW ID="1057" TEXTSTR="  join materials m on m.matid=b.itemid" LINEID="3"/><ROW ID="1057" TEXTSTR="  left join measures msr on msr.mid=m.mid" LINEID="4"/><ROW ID="1057" TEXTSTR="where b.bundleid=:bundleid and itemType=0" LINEID="5"/><ROW ID="1057" TEXTSTR="" LINEID="6"/><ROW ID="1057" TEXTSTR="union all" LINEID="7"/><ROW ID="1057" TEXTSTR="" LINEID="8"/><ROW ID="1057" TEXTSTR="select b.pos,b.bundleid, b.itemtype, b.itemid, b.quantity," LINEID="9"/><ROW ID="1057" TEXTSTR="  s.name as name, s.artikul as model, msr.shortname as msrname, 0 as bysn" LINEID="10"/><ROW ID="1057" TEXTSTR="  from bundles b" LINEID="11"/><ROW ID="1057" TEXTSTR="  join services s on s.svcid=b.itemid" LINEID="12"/><ROW ID="1057" TEXTSTR="  left join measures msr on msr.mid=s.mid" LINEID="13"/><ROW ID="1057" TEXTSTR="where b.bundleid=:bundleid and itemType=1" LINEID="14"/><ROW ID="1057" TEXTSTR="order by 1" LINEID="15"/><ROW ID="1062" TEXTSTR="select 1 as type, matid as id," LINEID="0"/><ROW ID="1062" TEXTSTR="    posid, remain, rsv, matname, msrname, model, avgprice, grpname, num, barcode," LINEID="1"/><ROW ID="1062" TEXTSTR="    country, producer, minreserv, ordered, isserial, serial, invnumb, posdate" LINEID="2"/><ROW ID="1062" TEXTSTR="  from sp_wmat_get_for_bundling(:matids, :wid, :ondate);" LINEID="3"/><ROW ID="928" TEXTSTR="select WBILLID, WTYPE, ONDATE, NUM, MATID, MATNAME, GRPID, GRPNAME," LINEID="0"/><ROW ID="928" TEXTSTR="    cast(AMOUNT as double precision) as AMOUNT," LINEID="1"/><ROW ID="928" TEXTSTR="    cast(PRICE as double precision) as PRICE," LINEID="2"/><ROW ID="928" TEXTSTR="    SHORTNAME," LINEID="3"/><ROW ID="928" TEXTSTR="    cast(ONVALUE as double precision) as ONVALUE," LINEID="4"/><ROW ID="928" TEXTSTR="    POSID, KANAME, FROMWID, FROMWH, TOWID, TOWH, DOCID" LINEID="5"/><ROW ID="928" TEXTSTR=" from sp_matgrp_move(:fromdate,:todate,:wid,:grplist)" LINEID="6"/><ROW ID="1063" TEXTSTR="update waybillsvc" LINEID="0"/><ROW ID="1063" TEXTSTR="  set posid=:posid, wbillid=:wbillid, currid=:currid, svcid=:svcid, num=:num," LINEID="1"/><ROW ID="1063" TEXTSTR="  price=:price, norm=:norm, amount=:amount," LINEID="2"/><ROW ID="1063" TEXTSTR="  nds=:nds, discount=:discount, personid=:personid, svctoprice=:svctoprice" LINEID="3"/><ROW ID="983" TEXTSTR="select wbs.num, -wbs.posid as posid, wbs.wbillid, s.svcid as matid," LINEID="0"/><ROW ID="983" TEXTSTR="  cast(0 as integer) as wid, wbs.amount, wbs.price," LINEID="1"/><ROW ID="983" TEXTSTR="  wbs.discount, wbs.nds, wbs.currid, wbl.ondate," LINEID="2"/><ROW ID="983" TEXTSTR="  cast(0 as integer) as ptypeid, wbs.num, 0, s.name as matname," LINEID="3"/><ROW ID="983" TEXTSTR="  ms.shortname as msrname, cast(&apos;&apos; as varchar(64)) as whname," LINEID="4"/><ROW ID="983" TEXTSTR="  cast(s.artikul as varchar(80)), c.shortname as currname, wbl.onvalue," LINEID="5"/><ROW ID="983" TEXTSTR="  1 as postype, wbs.norm, cast(&apos;&apos; as varchar(255)) as producer," LINEID="6"/><ROW ID="983" TEXTSTR="  cast(&apos;&apos; as varchar(64)) as gtd, cast(&apos;&apos; as varchar(64)) as certnum," LINEID="7"/><ROW ID="983" TEXTSTR="  cast(null as date) as certdate, acs.amount as shippedamount, ar.accposid," LINEID="8"/><ROW ID="983" TEXTSTR="  wbs.posid as realposid" LINEID="9"/><ROW ID="983" TEXTSTR="from waybillsvc wbs" LINEID="10"/><ROW ID="983" TEXTSTR="  join services s on s.svcid=wbs.svcid" LINEID="11"/><ROW ID="983" TEXTSTR="  join measures ms on ms.mid=s.mid" LINEID="12"/><ROW ID="983" TEXTSTR="  join waybilllist wbl on wbl.wbillid=wbs.wbillid" LINEID="13"/><ROW ID="983" TEXTSTR="  left outer join accoutsvcrel ar on ar.posid=wbs.posid" LINEID="14"/><ROW ID="983" TEXTSTR="  left outer join accoutsvc acs on acs.posid=wbs.posid" LINEID="15"/><ROW ID="983" TEXTSTR="  join currency c on c.currid=wbs.currid" LINEID="16"/><ROW ID="983" TEXTSTR="where wbs.wbillid=:wbillid" LINEID="17"/><ROW ID="983" TEXTSTR="" LINEID="18"/><ROW ID="983" TEXTSTR="" LINEID="19"/><ROW ID="1064" TEXTSTR="SELECT GEN_ID( gen_customtree_id, 0 ) as id FROM RDB$DATABASE" LINEID="0"/><ROW ID="658" TEXTSTR="select wblist.wbillid, wblist.wtype, wblist.num, wblist.ondate, cur.currid," LINEID="0"/><ROW ID="658" TEXTSTR="       cur.shortname as curname, cast(wblist.onvalue as double precision) as onvalue, wblist.reason" LINEID="1"/><ROW ID="658" TEXTSTR="  from waybilllist wblist" LINEID="2"/><ROW ID="658" TEXTSTR="  left outer join currency cur on cur.currid=wblist.currid" LINEID="3"/><ROW ID="658" TEXTSTR="  where wblist.deleted=0" LINEID="4"/><ROW ID="658" TEXTSTR="      and wblist.wtype in (1,-6)" LINEID="5"/><ROW ID="658" TEXTSTR="      and wblist.checked=1" LINEID="6"/><ROW ID="658" TEXTSTR="      and (wblist.ondate between :fromdate and :todate)" LINEID="7"/><ROW ID="658" TEXTSTR="      and wblist.kaid=:kaid" LINEID="8"/><ROW ID="658" TEXTSTR="  order by wblist.ondate" LINEID="9"/><ROW ID="954" TEXTSTR="select * from sp_pos_get_all(:ondate)" LINEID="0"/><ROW ID="410" TEXTSTR="insert into matgroupprices" LINEID="0"/><ROW ID="410" TEXTSTR=" (ptypeid, grpid, onvalue, extratype, currid, pptypeid, dis)" LINEID="1"/><ROW ID="410" TEXTSTR="values" LINEID="2"/><ROW ID="410" TEXTSTR=" (:ptypeid, :grpid, :onvalue, :extratype, :currid, :pptypeid, :dis)" LINEID="3"/><ROW ID="410" TEXTSTR="" LINEID="4"/><ROW ID="551" TEXTSTR="select * from sp_wmat_get(:grpid, :wid, :kaid, :ondate, :getempty, :wh," LINEID="0"/><ROW ID="551" TEXTSTR="  :showallmats, :grp)" LINEID="1"/><ROW ID="551" TEXTSTR="" LINEID="2"/><ROW ID="648" TEXTSTR="select" LINEID="0"/><ROW ID="648" TEXTSTR="    matid, grpid, matname, artikul, msrname, del," LINEID="1"/><ROW ID="648" TEXTSTR="    cast(rest as double precision) as rest," LINEID="2"/><ROW ID="648" TEXTSTR="    cast(rsv as double precision) as rsv," LINEID="3"/><ROW ID="648" TEXTSTR="    cast(summrest as double precision) as summrest," LINEID="4"/><ROW ID="648" TEXTSTR="    producer," LINEID="5"/><ROW ID="648" TEXTSTR="    cast(accsum as double precision) as accsum" LINEID="6"/><ROW ID="648" TEXTSTR="" LINEID="7"/><ROW ID="648" TEXTSTR="from sp_rep_7(:ondate, :grp, :wid, :ptypeid, :getacc, :wh)" LINEID="8"/><ROW ID="224" TEXTSTR="select * from sp_wb_list(:in_fromdate, :in_todate, :in_wtype, :in_checked," LINEID="0"/><ROW ID="224" TEXTSTR=" :in_kaid, :wh, :shownullbalance, :in_entid)" LINEID="1"/><ROW ID="958" TEXTSTR="select MATID,  MATNAME, ARTIKUL, BARCODE, KAID_, KANAME, GRPID_, GRPNAME, MSRNAME, WHNAME," LINEID="0"/><ROW ID="958" TEXTSTR="    cast(AMOUNT as double precision) as amount," LINEID="1"/><ROW ID="958" TEXTSTR="    cast(PRICE as double precision) as price," LINEID="2"/><ROW ID="958" TEXTSTR="    cast(PRICEIN as double precision) as pricein," LINEID="3"/><ROW ID="958" TEXTSTR="    cast(PRICEOUT as double precision) as priceout," LINEID="4"/><ROW ID="958" TEXTSTR="    cast(SUMM as double precision) as summ," LINEID="5"/><ROW ID="958" TEXTSTR="    cast(SUMMOUT as double precision) as summout" LINEID="6"/><ROW ID="958" TEXTSTR="  from sp_rep_25(:fromdate, :todate, :wid, :grpid, :kaid, :ptypeid, :grpby, :wh)" LINEID="7"/><ROW ID="218" TEXTSTR="select * from warehouse" LINEID="0"/><ROW ID="218" TEXTSTR="  where deleted=0 %m" LINEID="1"/><ROW ID="218" TEXTSTR="order by name" LINEID="2"/><ROW ID="863" TEXTSTR="select kaid, name, fullname, ndspayer, def from kagent" LINEID="0"/><ROW ID="863" TEXTSTR=" where ktype=3 and deleted=0" LINEID="1"/><ROW ID="548" TEXTSTR="select * from sp_wbrest_list(:fromdate, :todate, :in_checked, :wh, :allwh)" LINEID="0"/></ROWDATA></DATAPACKET>